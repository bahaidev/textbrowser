!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.TextBrowser=t()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e(function(e,t){e.exports=function e(t,n,r){return i=regeneratorRuntime.mark(function i(){var o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!Array.isArray(t)){i.next=7;break}return i.next=4,Promise.all(t.map(function(t){return e(t)}));case 4:return o=i.sent,n&&n.apply(null,o),i.abrupt("return",o);case 7:return i.next=9,fetch(t).then(function(e){return e.json()});case 9:return a=i.sent,i.abrupt("return","function"==typeof n?n(a):a);case 13:if(i.prev=13,i.t0=i.catch(0),i.t0.message+=" (File: "+t+")",!r){i.next=18;break}return i.abrupt("return",r(i.t0,t));case 18:throw i.t0;case 19:case"end":return i.stop()}},i,this,[[0,13]])})(),new Promise(function(e,t){function n(o,a){try{var s=i[a?"throw":"next"](o)}catch(e){return void t(e)}s.done?e(s.value):Promise.resolve(s.value).then(n,r)}function r(e){n(e,1)}n()});var i}}),n=e(function(e,n){e.exports=function(e){e=e&&e.hasOwnProperty("default")?e.default:e;var t=Object.prototype.hasOwnProperty;function n(e){var n,r,i,o,a=Array.prototype.slice.call(arguments,1);for(n=0,r=a.length;n<r;n+=1)if(i=a[n])for(o in i)t.call(i,o)&&(e[o]=i[o]);return e}var r=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}()?Object.defineProperty:function(e,n,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(n,r.get):(!t.call(e,n)||"value"in r)&&(e[n]=r.value)},i=Object.create||function(e,n){var i,o;function a(){}for(o in a.prototype=e,i=new a,n)t.call(n,o)&&r(i,o,n[o]);return i};function o(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function a(e){this.id=e}function s(e,t,n,r,i){this.id=e,this.useOrdinal=t,this.offset=n,this.options=r,this.pluralFn=i}function l(e,t,n,r){this.id=e,this.offset=t,this.numberFormat=n,this.string=r}function u(e,t){this.id=e,this.options=t}o.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},o.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,r,i=e.elements,o=[];for(t=0,n=i.length;t<n;t+=1)switch((r=i[t]).type){case"messageTextElement":o.push(this.compileMessageText(r));break;case"argumentElement":o.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return o},o.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new l(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},o.prototype.compileArgument=function(e){var t=e.format;if(!t)return new a(e.id);var n,r=this.formats,i=this.locales,o=this.pluralFn;switch(t.type){case"numberFormat":return n=r.number[t.style],{id:e.id,format:new Intl.NumberFormat(i,n).format};case"dateFormat":return n=r.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(i,n).format};case"timeFormat":return n=r.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(i,n).format};case"pluralFormat":return n=this.compileOptions(e),new s(e.id,t.ordinal,t.offset,n,o);case"selectFormat":return n=this.compileOptions(e),new u(e.id,n);default:throw new Error("Message element does not have a valid format type")}},o.prototype.compileOptions=function(e){var t,n,r,i=e.format,o=i.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===i.type?e:null,t=0,n=o.length;t<n;t+=1)r=o[t],a[r.selector]=this.compileMessage(r.value);return this.currentPlural=this.pluralStack.pop(),a},a.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},s.prototype.getOption=function(e){var t=this.options,n=t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)];return n||t.other},l.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},u.prototype.getOption=function(e){var t=this.options;return t[e]||t.other};var c=function(){function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},o={start:Ne},a=Ne,s=function(e){return{type:"messageFormatPattern",elements:e,location:Oe()}},l=function(e){var t,n,r,i,o,a="";for(t=0,r=e.length;t<r;t+=1)for(i=e[t],n=0,o=i.length;n<o;n+=1)a+=i[n];return a},u=function(e){return{type:"messageTextElement",value:e,location:Oe()}},c=/^[^ \t\n\r,.+={}#]/,f={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},p="{",h={type:"literal",value:"{",description:'"{"'},d=",",g={type:"literal",value:",",description:'","'},m="}",y={type:"literal",value:"}",description:'"}"'},v=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:Oe()}},b="number",_={type:"literal",value:"number",description:'"number"'},w="date",x={type:"literal",value:"date",description:'"date"'},k="time",E={type:"literal",value:"time",description:'"time"'},O=function(e,t){return{type:e+"Format",style:t&&t[2],location:Oe()}},A="plural",S={type:"literal",value:"plural",description:'"plural"'},C=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:Oe()}},N="selectordinal",F={type:"literal",value:"selectordinal",description:'"selectordinal"'},j=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:Oe()}},D="select",P={type:"literal",value:"select",description:'"select"'},T=function(e){return{type:"selectFormat",options:e,location:Oe()}},I="=",L={type:"literal",value:"=",description:'"="'},$=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:Oe()}},R="offset:",U={type:"literal",value:"offset:",description:'"offset:"'},z=function(e){return e},M=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:Oe()}},q={type:"other",description:"whitespace"},B=/^[ \t\n\r]/,W={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},H={type:"other",description:"optionalWhitespace"},V=/^[0-9]/,J={type:"class",value:"[0-9]",description:"[0-9]"},G=/^[0-9a-f]/i,Y={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Z="0",K={type:"literal",value:"0",description:'"0"'},X=/^[1-9]/,Q={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},re="\\\\",ie={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},oe=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},le=function(){return"\\#"},ue="\\{",ce={type:"literal",value:"\\{",description:'"\\\\{"'},fe=function(){return"{"},pe="\\}",he={type:"literal",value:"\\}",description:'"\\\\}"'},de=function(){return"}"},ge="\\u",me={type:"literal",value:"\\u",description:'"\\\\u"'},ye=function(e){return String.fromCharCode(parseInt(e,16))},ve=function(e){return e.join("")},be=0,_e=0,we=[{line:1,column:1,seenCR:!1}],xe=0,ke=[],Ee=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function Oe(){return Se(_e,be)}function Ae(e){var n,r,i=we[e];if(i)return i;for(n=e-1;!we[n];)n--;for(i={line:(i=we[n]).line,column:i.column,seenCR:i.seenCR};n<e;)"\n"===(r=t.charAt(n))?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return we[e]=i,i}function Se(e,t){var n=Ae(e),r=Ae(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Ce(e){be<xe||(be>xe&&(xe=be,ke=[]),ke.push(e))}function Ne(){return Fe()}function Fe(){var e,t,n;for(e=be,t=[],n=je();n!==i;)t.push(n),n=je();return t!==i&&(_e=e,t=s(t)),e=t}function je(){var e;return(e=De())===i&&(e=Pe()),e}function De(){var e,n;return e=be,(n=function(){var e,n,r,o,a,s;if(e=be,n=[],r=be,(o=Re())!==i&&(a=Be())!==i&&(s=Re())!==i?r=o=[o,a,s]:(be=r,r=i),r!==i)for(;r!==i;)n.push(r),r=be,(o=Re())!==i&&(a=Be())!==i&&(s=Re())!==i?r=o=[o,a,s]:(be=r,r=i);else n=i;return n!==i&&(_e=e,n=l(n)),(e=n)===i&&(e=be,n=$e(),e=n!==i?t.substring(e,be):n),e}())!==i&&(_e=e,n=u(n)),e=n}function Pe(){var e,n,r,o,a,s,l;return e=be,123===t.charCodeAt(be)?(n=p,be++):(n=i,0===Ee&&Ce(h)),n!==i&&Re()!==i&&(r=function(){var e,n,r;if((e=Me())===i){if(e=be,n=[],c.test(t.charAt(be))?(r=t.charAt(be),be++):(r=i,0===Ee&&Ce(f)),r!==i)for(;r!==i;)n.push(r),c.test(t.charAt(be))?(r=t.charAt(be),be++):(r=i,0===Ee&&Ce(f));else n=i;e=n!==i?t.substring(e,be):n}return e}())!==i&&Re()!==i?(o=be,44===t.charCodeAt(be)?(a=d,be++):(a=i,0===Ee&&Ce(g)),a!==i&&(s=Re())!==i&&(l=Te())!==i?o=a=[a,s,l]:(be=o,o=i),o===i&&(o=null),o!==i&&(a=Re())!==i?(125===t.charCodeAt(be)?(s=m,be++):(s=i,0===Ee&&Ce(y)),s!==i?(_e=e,n=v(r,o),e=n):(be=e,e=i)):(be=e,e=i)):(be=e,e=i),e}function Te(){var e;return(e=function(){var e,n,r,o,a,s;return e=be,t.substr(be,6)===b?(n=b,be+=6):(n=i,0===Ee&&Ce(_)),n===i&&(t.substr(be,4)===w?(n=w,be+=4):(n=i,0===Ee&&Ce(x)),n===i&&(t.substr(be,4)===k?(n=k,be+=4):(n=i,0===Ee&&Ce(E)))),n!==i&&Re()!==i?(r=be,44===t.charCodeAt(be)?(o=d,be++):(o=i,0===Ee&&Ce(g)),o!==i&&(a=Re())!==i&&(s=Be())!==i?r=o=[o,a,s]:(be=r,r=i),r===i&&(r=null),r!==i?(_e=e,n=O(n,r),e=n):(be=e,e=i)):(be=e,e=i),e}())===i&&(e=function(){var e,n,r,o;return e=be,t.substr(be,6)===A?(n=A,be+=6):(n=i,0===Ee&&Ce(S)),n!==i&&Re()!==i?(44===t.charCodeAt(be)?(r=d,be++):(r=i,0===Ee&&Ce(g)),r!==i&&Re()!==i&&(o=Le())!==i?(_e=e,n=C(o),e=n):(be=e,e=i)):(be=e,e=i),e}())===i&&(e=function(){var e,n,r,o;return e=be,t.substr(be,13)===N?(n=N,be+=13):(n=i,0===Ee&&Ce(F)),n!==i&&Re()!==i?(44===t.charCodeAt(be)?(r=d,be++):(r=i,0===Ee&&Ce(g)),r!==i&&Re()!==i&&(o=Le())!==i?(_e=e,n=j(o),e=n):(be=e,e=i)):(be=e,e=i),e}())===i&&(e=function(){var e,n,r,o,a;if(e=be,t.substr(be,6)===D?(n=D,be+=6):(n=i,0===Ee&&Ce(P)),n!==i)if(Re()!==i)if(44===t.charCodeAt(be)?(r=d,be++):(r=i,0===Ee&&Ce(g)),r!==i)if(Re()!==i){if(o=[],(a=Ie())!==i)for(;a!==i;)o.push(a),a=Ie();else o=i;o!==i?(_e=e,n=T(o),e=n):(be=e,e=i)}else be=e,e=i;else be=e,e=i;else be=e,e=i;else be=e,e=i;return e}()),e}function Ie(){var e,n,r,o,a,s;return e=be,(n=Re())!==i&&(r=function(){var e,n,r,o;return e=be,n=be,61===t.charCodeAt(be)?(r=I,be++):(r=i,0===Ee&&Ce(L)),r!==i&&(o=Me())!==i?n=r=[r,o]:(be=n,n=i),(e=n!==i?t.substring(e,be):n)===i&&(e=Be()),e}())!==i&&Re()!==i?(123===t.charCodeAt(be)?(o=p,be++):(o=i,0===Ee&&Ce(h)),o!==i&&Re()!==i&&(a=Fe())!==i&&Re()!==i?(125===t.charCodeAt(be)?(s=m,be++):(s=i,0===Ee&&Ce(y)),s!==i?(_e=e,n=$(r,a),e=n):(be=e,e=i)):(be=e,e=i)):(be=e,e=i),e}function Le(){var e,n,r,o;if(e=be,(n=function(){var e,n,r;return e=be,t.substr(be,7)===R?(n=R,be+=7):(n=i,0===Ee&&Ce(U)),n!==i&&Re()!==i&&(r=Me())!==i?(_e=e,n=z(r),e=n):(be=e,e=i),e}())===i&&(n=null),n!==i)if(Re()!==i){if(r=[],(o=Ie())!==i)for(;o!==i;)r.push(o),o=Ie();else r=i;r!==i?(_e=e,n=M(n,r),e=n):(be=e,e=i)}else be=e,e=i;else be=e,e=i;return e}function $e(){var e,n;if(Ee++,e=[],B.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ee&&Ce(W)),n!==i)for(;n!==i;)e.push(n),B.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ee&&Ce(W));else e=i;return Ee--,e===i&&(n=i,0===Ee&&Ce(q)),e}function Re(){var e,n,r;for(Ee++,e=be,n=[],r=$e();r!==i;)n.push(r),r=$e();return e=n!==i?t.substring(e,be):n,Ee--,e===i&&(n=i,0===Ee&&Ce(H)),e}function Ue(){var e;return V.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ee&&Ce(J)),e}function ze(){var e;return G.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ee&&Ce(Y)),e}function Me(){var e,n,r,o,a,s;if(e=be,48===t.charCodeAt(be)?(n=Z,be++):(n=i,0===Ee&&Ce(K)),n===i){if(n=be,r=be,X.test(t.charAt(be))?(o=t.charAt(be),be++):(o=i,0===Ee&&Ce(Q)),o!==i){for(a=[],s=Ue();s!==i;)a.push(s),s=Ue();a!==i?r=o=[o,a]:(be=r,r=i)}else be=r,r=i;n=r!==i?t.substring(n,be):r}return n!==i&&(_e=e,n=ee(n)),e=n}function qe(){var e,n,r,o,a,s,l,u;return te.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ee&&Ce(ne)),e===i&&(e=be,t.substr(be,2)===re?(n=re,be+=2):(n=i,0===Ee&&Ce(ie)),n!==i&&(_e=e,n=oe()),(e=n)===i&&(e=be,t.substr(be,2)===ae?(n=ae,be+=2):(n=i,0===Ee&&Ce(se)),n!==i&&(_e=e,n=le()),(e=n)===i&&(e=be,t.substr(be,2)===ue?(n=ue,be+=2):(n=i,0===Ee&&Ce(ce)),n!==i&&(_e=e,n=fe()),(e=n)===i&&(e=be,t.substr(be,2)===pe?(n=pe,be+=2):(n=i,0===Ee&&Ce(he)),n!==i&&(_e=e,n=de()),(e=n)===i&&(e=be,t.substr(be,2)===ge?(n=ge,be+=2):(n=i,0===Ee&&Ce(me)),n!==i?(r=be,o=be,(a=ze())!==i&&(s=ze())!==i&&(l=ze())!==i&&(u=ze())!==i?o=a=[a,s,l,u]:(be=o,o=i),(r=o!==i?t.substring(r,be):o)!==i?(_e=e,n=ye(r),e=n):(be=e,e=i)):(be=e,e=i)))))),e}function Be(){var e,t,n;if(e=be,t=[],(n=qe())!==i)for(;n!==i;)t.push(n),n=qe();else t=i;return t!==i&&(_e=e,t=ve(t)),e=t}if((n=a())!==i&&be===t.length)return n;throw n!==i&&be<t.length&&Ce({type:"end",description:"end of input"}),function(t,n,r,i){return null!==n&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r,i,o=new Array(e.length);for(i=0;i<e.length;i++)o[i]=e[i].description;return n=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],r=t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}(t)+'"':"end of input","Expected "+n+" but "+r+" found."}(n,r),n,r,i)}(null,ke,xe<t.length?t.charAt(xe):null,xe<t.length?Se(xe,xe+1):Se(xe,xe))}}}();function f(e,t,n){var i="string"==typeof e?f.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(f.formats,n),r(this,"_locale",{value:this._resolveLocale(t)});var o=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,t,n,o),s=this;this.format=function(t){try{return s._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}r(f,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),r(f,"__localeData__",{value:i(null)}),r(f,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");f.__localeData__[e.locale.toLowerCase()]=e}}),r(f,"__parse",{value:c.parse}),r(f,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),f.prototype.resolvedOptions=function(){return{locale:this._locale}},f.prototype._compilePattern=function(e,t,n,r){var i=new o(t,n,r);return i.compile(e)},f.prototype._findPluralRuleFunction=function(e){for(var t=f.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},f.prototype._format=function(e,n){var r,i,o,a,s,l,u="";for(r=0,i=e.length;r<i;r+=1)if("string"!=typeof(o=e[r])){if(a=o.id,!n||!t.call(n,a))throw(l=new Error("A value must be provided for: "+a)).variableId=a,l;s=n[a],o.options?u+=this._format(o.getOption(s),n):u+=o.format(s)}else u+=o;return u},f.prototype._mergeFormats=function(e,r){var o,a,s={};for(o in e)t.call(e,o)&&(s[o]=a=i(e[o]),r&&t.call(r,o)&&n(a,r[o]));return s},f.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(f.defaultLocale);var t,n,r,i,o=f.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(i=o[r.join("-")])return i.locale;r.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)};var p={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&r?"one":"other"}};f.__addLocaleData(p),f.defaultLocale="en";var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e){var t=this,n=arguments;if(!(this instanceof d))return new d(e);e=e||{},this.defaultNamespace=e.defaultNamespace||"",this.defaultSeparator=void 0===e.defaultSeparator?".":e.defaultSeparator,this.basePath=e.basePath||"locales/",this.fallbackLanguages=e.fallbackLanguages,this.localeFileResolver=e.localeFileResolver||function(e){return this.basePath+e+".json"},this.locales=e.locales||[],this.langs=e.langs,this.fallbackLocales=e.fallbackLocales||[];var r=function(e){t.loadLocales(t.fallbackLanguages,function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if((t=this.fallbackLocales).push.apply(t,r),e)return e(r)},!0)};e.languages||e.callback?this.loadLocales(e.languages,function(){var i=Array.from(n),o=function(n){e.callback&&e.callback.apply(t,[t.getFormatter(e.namespace),t.getFormatter.bind(t),i,n])};e.hasOwnProperty("fallbackLanguages")?r(o):o()}):e.hasOwnProperty("fallbackLanguages")&&r()}return d.prototype.getFormatter=function(e,t){var n=this,r=Array.isArray;return e=void 0===e?this.defaultNamespace:e,t=void 0===t?this.defaultSeparator:t,e=r(e)?e.join(t):e,function(i,o,a,s){var l=void 0,u=e;if(i&&!r(i)&&"object"===(void 0===i?"undefined":h(i))&&(o=i.values,a=i.formats,s=i.fallback,i=i.key),r(i)){var c=i.pop();u=i.join(t),i=c}else{var p=i.indexOf(t);!u&&p>-1&&(u=i.slice(0,p),i=i.slice(p+1))}function d(e){return e.some(function(e){return l=e[(u?u+t:"")+i]||function(e,t,n,r){var i=e;return t.split(n).every(function(e){return(i=i[e])&&"object"===(void 0===i?"undefined":h(i))})&&i[r]?i[r]:""}(e,u,t,i)}),l}if(d(n.locales),!l){if("function"==typeof s)return s({message:n.fallbackLocales.length&&d(n.fallbackLocales),langs:n.langs,namespace:u,separator:t,key:i,values:o,formats:a});if(!1!==s)return n.fallbackLocales.length&&d(n.fallbackLocales);throw new Error("Message not found for locales "+n.langs+(n.fallbackLanguages?" (with fallback languages "+n.fallbackLanguages+")":"")+" with key "+i+", namespace "+u+", and namespace separator "+t)}return o||a?new f(l,n.langs,a).format(o):l}},d.prototype.loadLocales=function(t,n,r){var i=this;return t=t||navigator.language||"en-US",t=Array.isArray(t)?t:[t],r||(this.langs=t),e(t.map(this.localeFileResolver,this),function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var a;r||(a=i.locales).push.apply(a,t),n&&n.apply(i,t)})},d}(t)});function r({$p:e,lang:t,langs:r,langData:i,fallbackLanguages:o,resultsDisplay:a,basePath:s="",localeCallback:l=!1}){return new Promise((u,c)=>{const f=n({languages:t,fallbackLanguages:o,localeFileResolver:e=>s+i.localeFileBasePath+r.find(t=>t.code===e).locale.$ref,async callback(...n){l&&l(...n)?u():(await((...n)=>{const[r]=n;return e.l10n||(e.l10n=r),a({l:r,lang:t,fallbackLanguages:o,imfLocales:f.locales,$p:e,basePath:s},...n)})(...n),u())}})})}let i="undefined"!=typeof window&&window,o="undefined"!=typeof document&&document,a="undefined"!=typeof XMLSerializer&&XMLSerializer;const s=["$plugins","$map"],l="http://www.w3.org/1999/xhtml",u=/-([a-z])/g,c={readonly:"readOnly"},f=["checked","defaultChecked","defaultSelected","disabled","indeterminate","open","readOnly","selected"].concat(["accessKey","async","autocapitalize","autofocus","contentEditable","defaultValue","defer","draggable","formnovalidate","hidden","innerText","inputMode","ismap","multiple","novalidate","pattern","required","spellcheck","translate","value","willvalidate"]),p=["dir","lang","max","min","title"],h=e=>o.querySelector(e),d=e=>[...o.querySelectorAll(e)];function g(e){return e.nodeName&&e.nodeName.toLowerCase()}function m(e){if(o.createStyleSheet&&"style"===g(e)){o.createStyleSheet().cssText=e.cssText}}function y(e,t){const n=g(e),r=g(t);if(o.createStyleSheet){if("script"===n)return void(e.text=t.nodeValue);if("style"===n)return void(e.cssText=t.nodeValue)}if("template"!==n)try{e.appendChild(t)}catch(i){if("select"===n&&"option"===r){try{e.add(t)}catch(n){e.add(t,null)}return}throw i}else e.content.appendChild(t)}function v(e,t,n){if(!n.match(/^\w+$/))throw new TypeError("Bad "+e);const r=o.createElement("div");return r.innerHTML="&"+t+n+";",o.createTextNode(r.innerHTML)}function b(e,t){return t.toUpperCase()}function _(e){if("string"==typeof e)return"string";if("object"==typeof e){if(null===e)return"null";if(Array.isArray(e))return"array";if("nodeType"in e){if(1===e.nodeType)return"element";if(11===e.nodeType)return"fragment"}return"object"}}function w(e,t){return e.appendChild(t),e}function x(e){return function(t){let n=e[""]?' xmlns="'+e[""]+'"':t||"";for(const t in e)e.hasOwnProperty(t)&&""!==t&&(n+=" xmlns:"+t+'="'+e[t]+'"');return n}}function k(...e){return N(...void 0===e[0]?e.slice(1):e)}function E(e){return N(e)}function O(e){const t={};return t[e[0]]=e[1],t}function A(e){return function(t,n){const r=e.childNodes[n],i=Array.isArray(t)?N(...t):N(t);r.parentNode.replaceChild(i,r)}}function S(e){return function(t){e.appendChild(N(...t))}}function C(e){return function(t){"string"==typeof t?e.appendChild(o.createTextNode(t)):e.appendChild(N(...t))}}const N=function e(...t){let n=o.createDocumentFragment();function r(t){let r;for(r in t){if(!t.hasOwnProperty(r))continue;const y=t[r];if(r=r in c?c[r]:r,p.includes(r))null!=y&&(n[r]=y);else if(f.includes(r))n[r]=y;else switch(r){case"#":i[i.length]=k(g,y);break;case"$shadow":{const{open:t,closed:r}=y;let{content:i,template:a}=y;const s=n.attachShadow({mode:r||!1===t?"closed":"open"});a?(Array.isArray(a)?a="object"===_(a[0])?e("template",...a,o.body):e("template",a,o.body):"string"==typeof a&&(a=h(a)),e(a.content.cloneNode(!0),s)):(i||(i=t||r),i&&"boolean"!=typeof i&&(Array.isArray(i)?e({"#":i},s):e(i,s)));break}case"is":break;case"$custom":Object.assign(n,y);break;case"$define":{const e=n.localName.toLowerCase(),t=!e.includes("-"),r=t?n.getAttribute("is"):e;if(customElements.get(r))break;const i=n=>{const r=s&&s.extends?o.createElement(s.extends).constructor:t?o.createElement(e).constructor:HTMLElement;return n?class extends r{constructor(){super(),n.call(this)}}:class extends r{}};let a,s,l;Array.isArray(y)?y.length<=2?([a,s]=y,"string"==typeof s?s={extends:s}:s.hasOwnProperty("extends")||(l=s),"object"==typeof a&&(l=a,a=i())):([a,l,s]=y,"string"==typeof s&&(s={extends:s})):"function"==typeof y?a=y:(l=y,a=i()),a.toString().startsWith("class")||(a=i(a)),!s&&t&&(s={extends:e}),l&&Object.assign(a.prototype,l),customElements.define(r,a,t?s:void 0);break}case"$symbol":{const[e,t]=y;if("function"==typeof t){const r=t.bind(n);"string"==typeof e?n[Symbol.for(e)]=r:n[e]=r}else{const r=t;r.elem=n,"string"==typeof e?n[Symbol.for(e)]=r:n[e]=r}break}case"$data":D(y);break;case"$attribute":{const e=3===y.length?o.createAttributeNS(y[0],y[1]):o.createAttribute(y[0]);e.value=y[y.length-1],i[i.length]=e;break}case"$text":{const e=o.createTextNode(y);i[i.length]=e;break}case"$document":{const t=o.implementation.createHTMLDocument();if(y.childNodes){y.childNodes.forEach(A(t));let e=y.childNodes.length;for(;t.childNodes[e];){const n=t.childNodes[e];n.parentNode.removeChild(n),e++}}else{if(y.$DOCTYPE){const n={$DOCTYPE:y.$DOCTYPE},r=e(n);t.firstChild.replaceWith(r)}const n=t.childNodes[1],r=n.childNodes[0],i=n.childNodes[1];if(y.title||y.head){const e=o.createElement("meta");e.setAttribute("charset","utf-8"),r.appendChild(e)}y.title&&(t.title=y.title),y.head&&y.head.forEach(S(r)),y.body&&y.body.forEach(C(i))}i[i.length]=t;break}case"$DOCTYPE":{let e;e=y.entities||y.notations?{name:y.name,nodeName:y.name,nodeValue:null,nodeType:10,entities:y.entities.map(E),notations:y.notations.map(E),publicId:y.publicId,systemId:y.systemId}:o.implementation.createDocumentType(y.name,y.publicId||"",y.systemId||""),i[i.length]=e;break}case"$ENTITY":break;case"$NOTATION":{const e={nodeName:y[0],publicID:y[1],systemID:y[2],nodeValue:null,nodeType:12};i[i.length]=e;break}case"$on":for(const e in y)if(y.hasOwnProperty(e)){let t=y[e];"function"==typeof t&&(t=[t,!1]),"function"==typeof t[0]&&(a=n,s=e,l=t[0],m=t[1],a.addEventListener(s,l,!!m))}break;case"className":case"class":null!=y&&(n.className=y);break;case"dataset":{const e=(t,r)=>{let i="";const o=""!==r;Object.keys(t).forEach(a=>{const s=t[a];if(i=o?r+a.replace(u,b).replace(/^([a-z])/,b):r+a.replace(u,b),null===s||"object"!=typeof s)return null!=s&&(n.dataset[i]=s),void(i=r);e(s,i)})};e(y,"");break}case"innerHTML":null!=y&&(n.innerHTML=y);break;case"htmlFor":case"for":if("label"===d){null!=y&&(n.htmlFor=y);break}n.setAttribute(r,y);break;case"xmlns":break;default:if(r.match(/^on/)){n[r]=y;break}if("style"===r){if(null==y)break;if("object"==typeof y){for(const e in y)y.hasOwnProperty(e)&&null!=y[e]&&("float"===e?(n.style.cssFloat=y[e],n.style.styleFloat=y[e]):n.style[e.replace(u,b)]=y[e]);break}n.setAttribute(r,y);break}const t=g&&g.$plugins&&g.$plugins.find(e=>e.name===r);if(t){t.set({element:n,attribute:{name:r,value:y}});break}n.setAttribute(r,y)}}var a,s,l,m}const i=[];let d,g,N=!1;if("object"===_(t[0])&&Object.keys(t[0]).some(e=>s.includes(e))){if("child"!==(g=t[0]).state&&(N=!0,g.state="child"),g.$map&&!g.$map.root&&!1!==g.$map.root&&(g.$map={root:g.$map}),"$plugins"in g){if(!Array.isArray(g.$plugins))throw new Error("$plugins must be an array");g.$plugins.forEach(e=>{if(!e)throw new TypeError("Plugin must be an object");if(!e.name||!e.name.startsWith("$_"))throw new TypeError("Plugin object name must be present and begin with `$_`");if("function"!=typeof e.set)throw new TypeError("Plugin object must have a `set` method")})}t=t.slice(1)}const F=t.length,j=g&&g.$map&&g.$map.root,D=e=>{let t,r;!0===e?[t,r]=j:Array.isArray(e)?"string"==typeof e[0]?e.forEach(e=>{D(g.$map[e])}):(t=e[0]||j[0],r=e[1]||j[1]):/^\[object (?:Weak)?Map\]$/.test([].toString.call(e))?(t=e,r=j[1]):(t=j[0],r=e),t.set(n,r)};for(let e=0;e<F;e++){let s=t[e];switch(_(s)){case"null":if(e===F-1)return m(i[0]),i.length<=1?i[0]:i.reduce(w,o.createDocumentFragment());break;case"string":switch(s){case"!":i[i.length]=o.createComment(t[++e]);break;case"?":s=t[++e];let r=t[++e];const a=r;if("object"==typeof a){r=[];for(const e in a)a.hasOwnProperty(e)&&r.push(e+'="'+a[e].replace(/"/g,'\\"')+'"');r=r.join(" ")}try{i[i.length]=o.createProcessingInstruction(s,r)}catch(e){i[i.length]=o.createComment("?"+s+" "+r+"?")}break;case"&":i[i.length]=v("entity","",t[++e]);break;case"#":i[i.length]=v("decimal",s,String(t[++e]));break;case"#x":i[i.length]=v("hexadecimal",s,t[++e]);break;case"![":try{i[i.length]=o.createCDATASection(t[++e])}catch(n){i[i.length]=o.createTextNode(t[e])}break;case"":i[i.length]=o.createDocumentFragment();break;default:{d=s;const r=t[e+1];if("object"===_(r)&&r.is){const{is:e}=r;n=o.createElementNS?o.createElementNS(l,d,{is:e}):o.createElement(d,{is:e})}else n=o.createElementNS?o.createElementNS(l,d):o.createElement(d);i[i.length]=n;break}}break;case"object":const u=s;if(void 0!==u.xmlns){let e;e="object"==typeof u.xmlns?x(u.xmlns):' xmlns="'+u.xmlns+'"',n=i[i.length-1]=(new DOMParser).parseFromString((new a).serializeToString(n).replace(' xmlns="'+l+'"',e),"application/xml").documentElement}(u.$a?u.$a.map(O):[u]).forEach(r);break;case"fragment":case"element":if(0===e&&(n=s),e===F-1||e===F-2&&null===t[e+1]){const e=i.length;for(let t=0;t<e;t++)y(s,i[t]);m(i[0])}else i[i.length]=s;break;case"array":const c=s,f=c.length;for(let e=0;e<f;e++){const r=c[e],i=typeof r;if(void 0===r)throw String("Parent array:"+JSON.stringify(t)+"; child: "+c+"; index:"+e);switch(i){case"string":case"number":case"boolean":y(n,o.createTextNode(r));break;default:Array.isArray(r)?y(n,k(g,...r)):r["#"]?y(n,k(g,r["#"])):y(n,r)}}}}const P=i[0]||n;return g&&N&&g.$map&&g.$map.root&&D(!0),P};N.toJML=function(e,t){t=t||{stringOutput:!1},"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/html"));const n=[];let r=n,i=0;function a(){{const e=new function(){return this};throw e.code=11,e}}function s(e,t){t.systemId.includes('"')&&t.systemId.includes("'")&&a();const n=t.publicId,r=t.systemId;r&&(e.systemId=r),n&&(e.publicId=n)}function l(e){r[i]=e,i++}function u(){l([]),r=r[i-1],i=0}function c(e,t){r=r[i-1][e],i=0,t&&(r=r[t])}return function e(n,f){const p="nodeType"in n?n.nodeType:null;f=Object.assign({},f);let h,d,g,m;function y(){g=r,m=i}function v(){r=g,i=m,i++}switch([2,3,4,7,8].includes(p)&&!/([\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD]|[\uD800-\uDBFF][\uDC00-\uDFFF])*$/.test(n.nodeValue)&&a(),p){case 1:y();const b=n.nodeName.toLowerCase();u(),l(b),d={};let _=!1;f[n.prefix||""]!==n.namespaceURI&&(f[n.prefix||""]=n.namespaceURI,n.prefix?d["xmlns:"+n.prefix]=n.namespaceURI:n.namespaceURI&&(d.xmlns=n.namespaceURI),_=!0),n.attributes.length?l(Array.from(n.attributes).reduce(function(e,t){return e[t.name]=t.value,e},d)):_&&l(d),(h=n.childNodes).length&&(u(),Array.from(h).forEach(function(t){e(t,f)})),v();break;case void 0:case 2:l({$attribute:[n.namespaceURI,n.name,n.value]});break;case 3:if(t.stripWhitespace&&/^\s+$/.test(n.nodeValue))return;l(n.nodeValue);break;case 4:n.nodeValue.includes("]]>")&&a(),l(["![",n.nodeValue]);break;case 5:l(["&",n.nodeName]);break;case 6:y(),d={},n.xmlEncoding||n.xmlVersion?d.$ENTITY={name:n.nodeName,version:n.xmlVersion,encoding:n.xmlEncoding}:(d.$ENTITY={name:n.nodeName},(n.publicId||n.systemId)&&(s(d.$ENTITY,n),n.notationName&&(d.$ENTITY.NDATA=n.notationName))),l(d),(h=n.childNodes).length&&(d.$ENTITY.childNodes=[],c("$ENTITY","childNodes"),Array.from(h).forEach(function(t){e(t,f)})),v();break;case 7:/^xml$/i.test(n.target)&&a(),n.target.includes("?>")&&a(),n.target.includes(":")&&a(),n.data.includes("?>")&&a(),l(["?",n.target,n.data]);break;case 8:(n.nodeValue.includes("--")||n.nodeValue.length&&n.nodeValue.lastIndexOf("-")===n.nodeValue.length-1)&&a(),l(["!",n.nodeValue]);break;case 9:y();const w={$document:{childNodes:[]}};t.xmlDeclaration&&(w.$document.xmlDeclaration={version:o.xmlVersion,encoding:o.xmlEncoding,standAlone:o.xmlStandalone}),l(w),c("$document","childNodes"),(h=n.childNodes).length||a(),Array.from(h).forEach(function(t){e(t,f)}),v();break;case 10:y(),d={$DOCTYPE:{name:n.name}},n.internalSubset&&(d.internalSubset=n.internalSubset),/^(\u0020|\u000D|\u000A|[a-zA-Z0-9]|[-'()+,.\/:=?;!*#@$_%])*$/.test(n.publicId)||a(),s(d.$DOCTYPE,n),l(d);const x=n.entities;x&&x.length&&(d.$DOCTYPE.entities=[],c("$DOCTYPE","entities"),Array.from(x).forEach(function(t){e(t,f)}),r=g,i=m+1);const k=n.notations;k&&k.length&&(d.$DOCTYPE.notations=[],c("$DOCTYPE","notations"),Array.from(k).forEach(function(t){e(t,f)})),v();break;case 11:y(),l({"#":[]}),c("#"),h=n.childNodes,Array.from(h).forEach(function(t){e(t,f)}),v();break;case 12:s((d={$NOTATION:{name:n.nodeName}}).$NOTATION,n),l(d);break;default:throw new TypeError("Not an XML type")}}(e,{}),t.stringOutput?JSON.stringify(n[0]):n[0]},N.toJMLString=function(e,t){return N.toJML(e,Object.assign(t||{},{stringOutput:!0}))},N.toDOM=function(...e){return N(...e)},N.toHTML=function(...e){return N(...e).outerHTML},N.toDOMString=function(...e){return N.toHTML(...e)},N.toXML=function(...e){const t=N(...e);return(new a).serializeToString(t)},N.toXMLDOMString=function(...e){return N.toXML(...e)};class F extends Map{get(e){return e="string"==typeof e?h(e):e,super.get.call(this,e)}set(e,t){return e="string"==typeof e?h(e):e,super.set.call(this,e,t)}invoke(e,t,...n){return e="string"==typeof e?h(e):e,this.get(e)[t](e,...n)}}class j extends WeakMap{get(e){return e="string"==typeof e?h(e):e,super.get(e)}set(e,t){return e="string"==typeof e?h(e):e,super.set(e,t)}invoke(e,t,...n){return e="string"==typeof e?h(e):e,this.get(e)[t](e,...n)}}N.Map=F,N.WeakMap=j,N.weak=function(e,...t){const n=new j;return[n,N({$map:[n,e]},...t)]},N.strong=function(e,...t){const n=new F;return[n,N({$map:[n,e]},...t)]},N.symbol=N.sym=N.for=function(e,t){return(e="string"==typeof e?h(e):e)["symbol"==typeof t?t:Symbol.for(t)]},N.command=function(e,t,n,...r){let i;return e="string"==typeof e?h(e):e,["symbol","string"].includes(typeof t)?"function"==typeof(i=N.sym(e,t))?i(n,...r):i[n](...r):"function"==typeof(i=t.get(e))?i.call(e,n,...r):i[n](e,...r)},N.setWindow=(e=>{i=e}),N.setDocument=(e=>{o=e,e&&e.body&&(D=e.body)}),N.setXMLSerializer=(e=>{a=e}),N.getWindow=(()=>i),N.getDocument=(()=>o),N.getXMLSerializer=(()=>a);let D=o&&o.body;const P=" ",T=(e,t)=>(e="string"==typeof e?(e=>document.querySelector(e))(e):e).querySelector(t);var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n};const $="en",R={en:{submit:"Submit",cancel:"Cancel",ok:"Ok"}};const U=new class{constructor({locale:e,localeObject:t}={}){this.setLocale({locale:e,localeObject:t})}setLocale({locale:e={},localeObject:t={}}){this.localeStrings=Object.assign({},R[$],R[e],t)}makeDialog({atts:e={},children:t=[],close:n,remove:r=!0}){n&&(e.$on||(e.$on={}),e.$on.close||(e.$on.close=n));const i=N("dialog",e,t,D);return dialogPolyfill.registerDialog(i),i.showModal(),r&&i.addEventListener("close",()=>{i.remove()}),i}makeSubmitDialog(e){let{submit:t,submitClass:n="submit"}=e,r=L(e,["submit","submitClass"]);const i=this.makeCancelDialog(r);return T(i,`button.${r.cancelClass||"cancel"}`).before(N("button",{class:n,$on:{click(e){t&&t.call(this,{e:e,dialog:i})}}},[this.localeStrings.submit]),P.repeat(2)),i}makeCancelDialog(e){let{submit:t,cancel:n,cancelClass:r="cancel",submitClass:i="submit"}=e,o=L(e,["submit","cancel","cancelClass","submitClass"]);const a=this.makeDialog(o);return N("div",{class:i},[["br"],["br"],["button",{class:r,$on:{click(e){e.preventDefault(),n&&!1===n.call(this,{e:e,dialog:a})||a.close()}}},[this.localeStrings.cancel]]],a),a}alert(e,t){e="string"==typeof e?{message:e}:e;const{ok:n=("object"==typeof t?!1!==t.ok:!1!==t),message:r,submitClass:i="submit"}=e;return new Promise((e,t)=>{const o=N("dialog",[r,...n?[["br"],["br"],["div",{class:i},[["button",{$on:{click(){o.close(),e()}}},[this.localeStrings.ok]]]]]:[]],D);dialogPolyfill.registerDialog(o),o.showModal()})}prompt(e){e="string"==typeof e?{message:e}:e;const{message:t,submit:n}=e,r=L(e,["message","submit"]);return new Promise((e,i)=>{this.makeSubmitDialog(I({},r,{submit:function({e:t,dialog:r}){n&&n.call(this,{e:t,dialog:r}),r.close(),e(T(r,"input").value)},cancel(){i(new Error("cancelled"))},children:[["label",[t,P.repeat(3),["input"]]]]}))})}confirm(e){e="string"==typeof e?{message:e}:e;const{message:t,submitClass:n="submit"}=e;return new Promise((e,r)=>{const i=N("dialog",[t,["br"],["br"],["div",{class:n},[["button",{$on:{click(){i.close(),e()}}},[this.localeStrings.ok]],P.repeat(2),["button",{$on:{click(){i.close(),r(new Error("cancelled"))}}},[this.localeStrings.cancel]]]]],D);dialogPolyfill.registerDialog(i),i.showModal()})}},z=({namespace:e,preferredLocale:t})=>{const n=localStorage.getItem(e+"-langCodes"),r=n&&JSON.parse(n)||[t],i=[];return r.forEach(e=>{const t=e.replace(/-.*$/,"");t===e?i.push(e):i.push(e,t)}),i};class M{constructor({langData:e}){this.langData=e}localeFromLangData(e){return this.langData["localization-strings"][e]}getLanguageFromCode(e){return this.localeFromLangData(e).languages[e]}getFieldNameFromPluginNameAndLocales({pluginName:e,locales:t,lf:n,targetLanguage:r,applicableFieldI18N:i,meta:o,metaApplicableField:a}){return n(["plugins",e,"fieldname"],I({},o,a,{applicableField:i,targetLanguage:r?this.getLanguageFromCode(r):""}))}getLanguageInfo({$p:e}){const t=this.langData.languages,n=e=>!!t.some(({code:t})=>t===e)&&e,r=e.get("lang",!0),i=navigator.languages.filter(n),o=i.length?i:[n(navigator.language)||"en-US"];return{lang:(r||o[0]).split(".").concat(o),langs:t,languageParam:r,fallbackLanguages:o}}}!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JsonRefs=e()}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(n){function r(e,t){k.isString(e)&&(e=C(e)),k.isString(t)&&(t=C(t));var n,r,i=h(k.isUndefined(t)?"":t);return P.indexOf(i.reference)>-1?r=i:(n=k.isUndefined(e)?void 0:h(e),k.isUndefined(n)?r=i:((r=n).path=C(O.join(n.path,i.path)),r.query=function(e,t){function n(e){k.forOwn(e,function(e,t){r[t]=e})}var r={};return n(S.parse(e||"")),n(S.parse(t||"")),0===Object.keys(r).length?void 0:S.stringify(r)}(n.query,i.query))),r.fragment=void 0,(-1===P.indexOf(r.reference)&&0===r.path.indexOf("../")?"../":"")+N.serialize(r)}function i(e){return D.indexOf(l(e))>-1}function o(e){return k.isUndefined(e.error)&&"invalid"!==e.type}function a(e,t){var n=e;return t.forEach(function(e){if(!(e in n))throw Error("JSON Pointer points to missing location: "+w(t));n=n[e]}),n}function s(e){return Object.keys(e).filter(function(e){return"$ref"!==e})}function l(e){var t;switch(e.uriDetails.reference){case"absolute":case"uri":t="remote";break;case"same-document":t="local";break;default:t=e.uriDetails.reference}return t}function u(e,t){var n=j[e],r=Promise.resolve(),i=k.cloneDeep(t.loaderOptions||{});return k.isUndefined(n)?(k.isUndefined(i.processContent)&&(i.processContent=function(e,t){t(void 0,JSON.parse(e.text))}),r=(r=A.load(decodeURI(e),i)).then(function(t){return j[e]={value:t},t}).catch(function(t){throw j[e]={error:t},t})):r=r.then(function(){if(k.isError(n.error))throw n.error;return n.value}),r.then(function(e){return k.cloneDeep(e)})}function c(e,t){var n=!0;try{if(!k.isPlainObject(e))throw new Error("obj is not an Object");if(!k.isString(e.$ref))throw new Error("obj.$ref is not a String")}catch(e){if(t)throw e;n=!1}return n}function f(e){return-1!==e.indexOf("://")||O.isAbsolute(e)?e:O.resolve(n.cwd(),e)}function p(e,t){e.error=t.message,e.missing=!0}function h(e){return N.parse(e)}function d(e,t){var n,i;if(e=k.isUndefined(e)?{}:k.cloneDeep(e),!k.isObject(e))throw new TypeError("options must be an Object");if(!k.isUndefined(e.resolveCirculars)&&!k.isBoolean(e.resolveCirculars))throw new TypeError("options.resolveCirculars must be a Boolean");if(!(k.isUndefined(e.filter)||k.isArray(e.filter)||k.isFunction(e.filter)||k.isString(e.filter)))throw new TypeError("options.filter must be an Array, a Function of a String");if(!k.isUndefined(e.includeInvalid)&&!k.isBoolean(e.includeInvalid))throw new TypeError("options.includeInvalid must be a Boolean");if(!k.isUndefined(e.location)&&!k.isString(e.location))throw new TypeError("options.location must be a String");if(!k.isUndefined(e.refPreProcessor)&&!k.isFunction(e.refPreProcessor))throw new TypeError("options.refPreProcessor must be a Function");if(!k.isUndefined(e.refPostProcessor)&&!k.isFunction(e.refPostProcessor))throw new TypeError("options.refPostProcessor must be a Function");if(!k.isUndefined(e.subDocPath)&&!k.isArray(e.subDocPath)&&!b(e.subDocPath))throw new TypeError("options.subDocPath must be an Array of path segments or a valid JSON Pointer");if(k.isUndefined(e.resolveCirculars)&&(e.resolveCirculars=!1),e.filter=function(e){var t,n;return k.isArray(e.filter)||k.isString(e.filter)?(n=k.isString(e.filter)?[e.filter]:e.filter,t=function(e){return n.indexOf(e.type)>-1||n.indexOf(l(e))>-1}):k.isFunction(e.filter)?t=e.filter:k.isUndefined(e.filter)&&(t=function(){return!0}),function(n,r){return("invalid"!==n.type||!0===e.includeInvalid)&&t(n,r)}}(e),k.isUndefined(e.location)&&(e.location=f("./root.json")),(n=e.location.split("#")).length>1&&(e.subDocPath="#"+n[1]),i=decodeURI(e.location)===e.location,e.location=r(e.location,void 0),i&&(e.location=decodeURI(e.location)),e.subDocPath=function(e){var t;return k.isArray(e.subDocPath)?t=e.subDocPath:k.isString(e.subDocPath)?t=_(e.subDocPath):k.isUndefined(e.subDocPath)&&(t=[]),t}(e),!k.isUndefined(t))try{a(t,e.subDocPath)}catch(e){throw e.message=e.message.replace("JSON Pointer","options.subDocPath"),e}return e}function g(e){if(!k.isArray(e))throw new TypeError("path must be an array");return e.map(function(e){return k.isString(e)||(e=JSON.stringify(e)),e.replace(/~1/g,"/").replace(/~0/g,"~")})}function m(e){if(!k.isArray(e))throw new TypeError("path must be an array");return e.map(function(e){return k.isString(e)||(e=JSON.stringify(e)),e.replace(/~/g,"~0").replace(/\//g,"~1")})}function y(e,t){var n={};if(!k.isArray(e)&&!k.isObject(e))throw new TypeError("obj must be an Array or an Object");return function e(t,n,r,i){function o(n,o){r.push(o),e(t,n,r,i),r.pop()}var a=!0;k.isFunction(i)&&(a=i(t,n,r)),-1===t.indexOf(n)&&(t.push(n),!1!==a&&(k.isArray(n)?n.forEach(function(e,t){o(e,t.toString())}):k.isObject(n)&&k.forOwn(n,function(e,t){o(e,t)})),t.pop())}(function(e,t){var n,r=[];return t.length>0&&(n=e,t.slice(0,t.length-1).forEach(function(e){e in n&&(n=n[e],r.push(n))})),r}(e,(t=d(t,e)).subDocPath),a(e,t.subDocPath),k.cloneDeep(t.subDocPath),function(e,r,i){var o,a,l=!0;return c(r)&&(k.isUndefined(t.refPreProcessor)||(r=t.refPreProcessor(k.cloneDeep(r),i)),o=v(r),k.isUndefined(t.refPostProcessor)||(o=t.refPostProcessor(o,i)),t.filter(o,i)&&(a=w(i),n[a]=o),s(r).length>0&&(l=!1)),l}),n}function v(e){var t,n,r,i={def:e};try{if(c(e,!0)){if(t=e.$ref,r=T[t],k.isUndefined(r)&&(r=T[t]=h(t)),i.uri=t,i.uriDetails=r,k.isUndefined(r.error)){i.type=l(i);try{["#","/"].indexOf(t[0])>-1?b(t,!0):t.indexOf("#")>-1&&b(r.fragment,!0)}catch(e){i.error=e.message,i.type="invalid"}}else i.error=i.uriDetails.error,i.type="invalid";(n=s(e)).length>0&&(i.warning="Extra JSON Reference properties will be ignored: "+n.join(", "))}else i.type="invalid"}catch(e){i.error=e.message,i.type="invalid"}return i}function b(e,t){var n,r=!0;try{if(!k.isString(e))throw new Error("ptr is not a String");if(""!==e){if(n=e.charAt(0),-1===["#","/"].indexOf(n))throw new Error("ptr must start with a / or #/");if("#"===n&&"#"!==e&&"/"!==e.charAt(1))throw new Error("ptr must start with a / or #/");if(e.match(F))throw new Error("ptr has invalid token(s)")}}catch(e){if(!0===t)throw e;r=!1}return r}function _(e){try{b(e,!0)}catch(e){throw new Error("ptr must be a JSON Pointer: "+e.message)}var t=e.split("/");return t.shift(),g(t)}function w(e,t){if(!k.isArray(e))throw new Error("path must be an Array");return(!1!==t?"#":"")+(e.length>0?"/":"")+m(e).join("/")}function x(e,t){var n=Promise.resolve();return n.then(function(){if(!k.isArray(e)&&!k.isObject(e))throw new TypeError("obj must be an Array or an Object");t=d(t,e),e=k.cloneDeep(e)}).then(function(){var n={deps:{},docs:{},refs:{}};return function e(t,n,a){var s,l,c=Promise.resolve(),h=w(n.subDocPath),d=f(n.location),g=O.dirname(n.location),m=d+h;return k.isUndefined(a.docs[d])&&(a.docs[d]=t),k.isUndefined(a.deps[m])&&(a.deps[m]={},s=y(t,n),k.forOwn(s,function(s,d){var y=f(n.location)+d,v=s.refdId=decodeURI(f(i(s)?r(g,s.uri):n.location)+"#"+(s.uri.indexOf("#")>-1?s.uri.split("#")[1]:""));a.refs[y]=s,o(s)&&(s.fqURI=v,a.deps[m][d===h?"#":d.replace(h+"/","#/")]=v,0!==y.indexOf(v+"/")?((l=k.cloneDeep(n)).subDocPath=k.isUndefined(s.uriDetails.fragment)?[]:_(decodeURI(s.uriDetails.fragment)),i(s)?(delete l.filter,l.location=v.split("#")[0],c=c.then(function(e,t){return function(){var n=f(t.location),r=e.docs[n];return k.isUndefined(r)?u(n,t).catch(function(t){return e.docs[n]=t,t}):Promise.resolve().then(function(){return r})}}(a,l))):c=c.then(function(){return t}),c=c.then(function(t,n,r){return function(i){if(k.isError(i))p(r,i);else try{return e(i,n,t).catch(function(e){p(r,e)})}catch(e){p(r,e)}}}(a,l,s))):s.circular=!0)})),c}(e,t,n).then(function(){return n})}).then(function(e){function n(i,a,s){var l,u=a.split("#"),c=e.refs[a];r[u[0]===t.location?"#"+u[1]:w(t.subDocPath.concat(s))]=c,!c.circular&&o(c)?(l=e.deps[c.refdId],0!==c.refdId.indexOf(i)&&Object.keys(l).forEach(function(e){n(c.refdId,c.refdId+e.substr(1),s.concat(_(e)))})):!c.circular&&c.error&&(c.error=c.error.replace("options.subDocPath","JSON Pointer"),c.error.indexOf("#")>-1&&(c.error=c.error.replace(c.uri.substr(c.uri.indexOf("#")),c.uri)),0!==c.error.indexOf("ENOENT:")&&0!==c.error.indexOf("Not Found")||(c.error="JSON Pointer points to missing location: "+c.uri))}var r={},s=[],l=[],u=new E.Graph,c=f(t.location),h=c+w(t.subDocPath),d=O.dirname(c);return Object.keys(e.deps).forEach(function(e){u.setNode(e)}),k.forOwn(e.deps,function(e,t){k.forOwn(e,function(e){u.setEdge(t,e)})}),(s=E.alg.findCycles(u)).forEach(function(e){e.forEach(function(e){-1===l.indexOf(e)&&l.push(e)})}),k.forOwn(e.deps,function(t,n){k.forOwn(t,function(t,r){var o,a=!1,u=n+r.slice(1),c=e.refs[n+r.slice(1)],f=i(c);l.indexOf(t)>-1&&s.forEach(function(e){a||(o=e.indexOf(t))>-1&&e.forEach(function(n){a||0===u.indexOf(n+"/")&&(f&&o!==e.length-1&&"#"===t[t.length-1]||(a=!0))})}),a&&(c.circular=!0)})}),k.forOwn(Object.keys(e.deps).reverse(),function(n){var r=e.deps[n],i=n.split("#"),o=e.docs[i[0]],s=_(i[1]);k.forOwn(r,function(n,r){var l=n.split("#"),u=e.docs[l[0]],c=s.concat(_(r)),f=e.refs[i[0]+w(c)];if(k.isUndefined(f.error)&&k.isUndefined(f.missing))if(!t.resolveCirculars&&f.circular)f.value=f.def;else{try{f.value=a(u,_(l[1]))}catch(e){return void p(f,e)}""===i[1]&&"#"===r?e.docs[i[0]]=f.value:function(e,t,n){a(e,t.slice(0,t.length-1))[t[t.length-1]]=n}(o,c,f.value)}})}),Object.keys(e.refs).forEach(function(t){var r,i,o=e.refs[t];"invalid"!==o.type&&("#"===o.fqURI[o.fqURI.length-1]&&"#"!==o.uri[o.uri.length-1]&&(o.fqURI=o.fqURI.substr(0,o.fqURI.length-1)),r=o.fqURI.split("/"),i=o.uri.split("/"),k.times(i.length-1,function(e){var t=i[i.length-e-1],n=r.length-e-1,o=r[n];"."!==t&&".."!==t||(t=o),r[n]=t}),o.fqURI=r.join("/"),0===o.fqURI.indexOf(c)?o.fqURI=o.fqURI.replace(c,""):0===o.fqURI.indexOf(d)&&(o.fqURI=o.fqURI.replace(d,"")),"/"===o.fqURI[0]&&(o.fqURI="."+o.fqURI)),0===t.indexOf(h)&&n(h,t,_(t.substr(h.length)))}),k.forOwn(e.refs,function(e){delete e.refdId,e.missing&&(e.error=e.error.split(": ")[0]+": "+e.def.$ref)}),{refs:r,resolved:e.docs[c]}})}var k=e("lodash"),E=e("graphlib"),O=e("path"),A=e("path-loader"),S=e("querystring"),C=e("slash"),N=e("uri-js"),F=/~(?:[^01]|$)/g,j={},D=["relative","remote"],P=["absolute","uri"],T={};"undefined"==typeof Promise&&e("native-promise-only"),t.exports.clearCache=function(){j={}},t.exports.decodePath=function(e){return g(e)},t.exports.encodePath=function(e){return m(e)},t.exports.findRefs=function(e,t){return y(e,t)},t.exports.findRefsAt=function(e,t){return function(e,t){var n=Promise.resolve();return n.then(function(){if(!k.isString(e))throw new TypeError("location must be a string");return k.isUndefined(t)&&(t={}),k.isObject(t)&&(t.location=e),u((t=d(t)).location,t)}).then(function(e){var n=k.cloneDeep(j[t.location]),r=k.cloneDeep(t),i=h(t.location);return k.isUndefined(n.refs)&&(delete r.filter,delete r.subDocPath,r.includeInvalid=!0,j[t.location].refs=y(e,r)),k.isUndefined(t.filter)||(r.filter=t.filter),k.isUndefined(i.fragment)?k.isUndefined(i.subDocPath)||(r.subDocPath=t.subDocPath):r.subDocPath=_(decodeURI(i.fragment)),{refs:y(e,r),value:e}})}(e,t)},t.exports.getRefDetails=function(e){return v(e)},t.exports.isPtr=function(e,t){return b(e,t)},t.exports.isRef=function(e,t){return function(e,t){return c(e,t)&&"invalid"!==v(e).type}(e,t)},t.exports.pathFromPtr=function(e){return _(e)},t.exports.pathToPtr=function(e,t){return w(e,t)},t.exports.resolveRefs=function(e,t){return x(e,t)},t.exports.resolveRefsAt=function(e,t){return function(e,t){var n=Promise.resolve();return n.then(function(){if(!k.isString(e))throw new TypeError("location must be a string");return k.isUndefined(t)&&(t={}),k.isObject(t)&&(t.location=e),u((t=d(t)).location,t)}).then(function(e){var n=k.cloneDeep(t),r=h(t.location);return k.isUndefined(r.fragment)||(n.subDocPath=_(decodeURI(r.fragment))),x(e,n).then(function(t){return{refs:t.refs,resolved:t.resolved,value:e}})})}(e,t)}}).call(this,e("_process"))},{_process:29,graphlib:3,lodash:23,"native-promise-only":24,path:25,"path-loader":26,querystring:32,slash:33,"uri-js":40}],2:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}void 0!==t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],3:[function(e,t,n){var r=e("./lib");t.exports={Graph:r.Graph,json:e("./lib/json"),alg:e("./lib/alg"),version:r.version}},{"./lib":19,"./lib/alg":10,"./lib/json":20}],4:[function(e,t,n){var r=e("../lodash");t.exports=function(e){function t(o){r.has(i,o)||(i[o]=!0,n.push(o),r.each(e.successors(o),t),r.each(e.predecessors(o),t))}var n,i={},o=[];return r.each(e.nodes(),function(e){n=[],t(e),n.length&&o.push(n)}),o}},{"../lodash":21}],5:[function(e,t,n){var r=e("../lodash");t.exports=function(e,t,n){r.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],a={};return r.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,i,o,a,s){r.has(o,n)||(o[n]=!0,i||s.push(n),r.each(a(n),function(n){e(t,n,i,o,a,s)}),i&&s.push(n))}(e,t,"post"===n,a,i,o)}),o}},{"../lodash":21}],6:[function(e,t,n){var r=e("./dijkstra"),i=e("../lodash");t.exports=function(e,t,n){return i.transform(e.nodes(),function(i,o){i[o]=r(e,o,t,n)},{})}},{"../lodash":21,"./dijkstra":7}],7:[function(e,t,n){var r=e("../lodash"),i=e("../data/priority-queue");t.exports=function(e,t,n,r){return function(e,t,n,r){var o,a,s={},l=new i;for(e.nodes().forEach(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},l.add(e,n)});l.size()>0&&(o=l.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(function(e){var t=e.v!==o?e.v:e.w,r=s[t],i=n(e),u=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);u<r.distance&&(r.distance=u,r.predecessor=o,l.decrease(t,u))});return s}(e,String(t),n||o,r||function(t){return e.outEdges(t)})};var o=r.constant(1)},{"../data/priority-queue":17,"../lodash":21}],8:[function(e,t,n){var r=e("../lodash"),i=e("./tarjan");t.exports=function(e){return r.filter(i(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},{"../lodash":21,"./tarjan":15}],9:[function(e,t,n){var r=e("../lodash");t.exports=function(e,t,n){return function(e,t,n){var r={},i=e.nodes();return i.forEach(function(e){r[e]={},r[e][e]={distance:0},i.forEach(function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})}),n(e).forEach(function(n){var i=n.v===e?n.w:n.v,o=t(n);r[e][i]={distance:o,predecessor:e}})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[e],i=t[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(e,t||i,n||function(t){return e.outEdges(t)})};var i=r.constant(1)},{"../lodash":21}],10:[function(e,t,n){t.exports={components:e("./components"),dijkstra:e("./dijkstra"),dijkstraAll:e("./dijkstra-all"),findCycles:e("./find-cycles"),floydWarshall:e("./floyd-warshall"),isAcyclic:e("./is-acyclic"),postorder:e("./postorder"),preorder:e("./preorder"),prim:e("./prim"),tarjan:e("./tarjan"),topsort:e("./topsort")}},{"./components":4,"./dijkstra":7,"./dijkstra-all":6,"./find-cycles":8,"./floyd-warshall":9,"./is-acyclic":11,"./postorder":12,"./preorder":13,"./prim":14,"./tarjan":15,"./topsort":16}],11:[function(e,t,n){var r=e("./topsort");t.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},{"./topsort":16}],12:[function(e,t,n){var r=e("./dfs");t.exports=function(e,t){return r(e,t,"post")}},{"./dfs":5}],13:[function(e,t,n){var r=e("./dfs");t.exports=function(e,t){return r(e,t,"pre")}},{"./dfs":5}],14:[function(e,t,n){var r=e("../lodash"),i=e("../graph"),o=e("../data/priority-queue");t.exports=function(e,t){var n,a=new i,s={},l=new o;if(0===e.nodeCount())return a;r.each(e.nodes(),function(e){l.add(e,Number.POSITIVE_INFINITY),a.setNode(e)}),l.decrease(e.nodes()[0],0);for(var u=!1;l.size()>0;){if(n=l.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(u)throw new Error("Input graph is not connected: "+e);u=!0}e.nodeEdges(n).forEach(function(e){var r=e.v===n?e.w:e.v,i=l.priority(r);if(void 0!==i){var o=t(e);o<i&&(s[r]=n,l.decrease(r,o))}})}return a}},{"../data/priority-queue":17,"../graph":18,"../lodash":21}],15:[function(e,t,n){var r=e("../lodash");t.exports=function(e){function t(s){var l=o[s]={onStack:!0,lowlink:n,index:n++};if(i.push(s),e.successors(s).forEach(function(e){r.has(o,e)?o[e].onStack&&(l.lowlink=Math.min(l.lowlink,o[e].index)):(t(e),l.lowlink=Math.min(l.lowlink,o[e].lowlink))}),l.lowlink===l.index){var u,c=[];do{u=i.pop(),o[u].onStack=!1,c.push(u)}while(s!==u);a.push(c)}}var n=0,i=[],o={},a=[];return e.nodes().forEach(function(e){r.has(o,e)||t(e)}),a}},{"../lodash":21}],16:[function(e,t,n){function r(e){var t={},n={},r=[];if(o.each(e.sinks(),function a(s){if(o.has(n,s))throw new i;o.has(t,s)||(n[s]=!0,t[s]=!0,o.each(e.predecessors(s),a),delete n[s],r.push(s))}),o.size(t)!==e.nodeCount())throw new i;return r}function i(){}var o=e("../lodash");t.exports=r,r.CycleException=i},{"../lodash":21}],17:[function(e,t,n){function r(){this._arr=[],this._keyIndices={}}var i=e("../lodash");t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(e){return e.key})},r.prototype.has=function(e){return i.has(this._keyIndices,e)},r.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!i.has(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},r.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},r.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},r.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},r.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},{"../lodash":21}],18:[function(e,t,n){function r(e){this._isDirected=!l.has(e,"directed")||e.directed,this._isMultigraph=!!l.has(e,"multigraph")&&e.multigraph,this._isCompound=!!l.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=l.constant(void 0),this._defaultEdgeLabelFn=l.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[c]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(e,t){e[t]?e[t]++:e[t]=1}function o(e,t){--e[t]||delete e[t]}function a(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}return i+f+o+f+(l.isUndefined(r)?u:r)}function s(e,t){return a(e,t.v,t.w,t.name)}var l=e("./lodash");t.exports=r;var u="\0",c="\0",f="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(e){return this._label=e,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(e){return l.isFunction(e)||(e=l.constant(e)),this._defaultNodeLabelFn=e,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return l.keys(this._nodes)},r.prototype.sources=function(){return l.filter(this.nodes(),l.bind(function(e){return l.isEmpty(this._in[e])},this))},r.prototype.sinks=function(){return l.filter(this.nodes(),l.bind(function(e){return l.isEmpty(this._out[e])},this))},r.prototype.setNodes=function(e,t){var n=arguments;return l.each(e,l.bind(function(e){n.length>1?this.setNode(e,t):this.setNode(e)},this)),this},r.prototype.setNode=function(e,t){return l.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=c,this._children[e]={},this._children[c][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},r.prototype.node=function(e){return this._nodes[e]},r.prototype.hasNode=function(e){return l.has(this._nodes,e)},r.prototype.removeNode=function(e){var t=this;if(l.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],l.each(this.children(e),l.bind(function(e){this.setParent(e)},this)),delete this._children[e]),l.each(l.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],l.each(l.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},r.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l.isUndefined(t))t=c;else{for(var n=t+="";!l.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},r.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},r.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==c)return t}},r.prototype.children=function(e){if(l.isUndefined(e)&&(e=c),this._isCompound){var t=this._children[e];if(t)return l.keys(t)}else{if(e===c)return this.nodes();if(this.hasNode(e))return[]}},r.prototype.predecessors=function(e){var t=this._preds[e];if(t)return l.keys(t)},r.prototype.successors=function(e){var t=this._sucs[e];if(t)return l.keys(t)},r.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return l.union(t,this.successors(e))},r.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph()),l.each(this._nodes,l.bind(function(n,r){e(r)&&t.setNode(r,n)},this)),l.each(this._edgeObjs,l.bind(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,this.edge(e))},this));var n=this,r={};return this._isCompound&&l.each(t.nodes(),function(e){t.setParent(e,function e(i){var o=n.parent(i);return void 0===o||t.hasNode(o)?(r[i]=o,o):o in r?r[o]:e(o)}(e))}),t},r.prototype.setDefaultEdgeLabel=function(e){return l.isFunction(e)||(e=l.constant(e)),this._defaultEdgeLabelFn=e,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return l.values(this._edgeObjs)},r.prototype.setPath=function(e,t){var n=this,r=arguments;return l.reduce(e,function(e,i){return r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i}),this},r.prototype.setEdge=function(){var e,t,n,r,o=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(e=s.v,t=s.w,n=s.name,2===arguments.length&&(r=arguments[1],o=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,l.isUndefined(n)||(n=""+n);var u=a(this._isDirected,e,t,n);if(l.has(this._edgeLabels,u))return o&&(this._edgeLabels[u]=r),this;if(!l.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[u]=o?r:this._defaultEdgeLabelFn(e,t,n);var c=function(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}(this._isDirected,e,t,n);return e=c.v,t=c.w,Object.freeze(c),this._edgeObjs[u]=c,i(this._preds[t],e),i(this._sucs[e],t),this._in[t][u]=c,this._out[e][u]=c,this._edgeCount++,this},r.prototype.edge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):a(this._isDirected,e,t,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):a(this._isDirected,e,t,n);return l.has(this._edgeLabels,r)},r.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):a(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[t],e),o(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},r.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=l.values(n);return t?l.filter(r,function(e){return e.v===t}):r}},r.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=l.values(n);return t?l.filter(r,function(e){return e.w===t}):r}},r.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},{"./lodash":21}],19:[function(e,t,n){t.exports={Graph:e("./graph"),version:e("./version")}},{"./graph":18,"./version":22}],20:[function(e,t,n){var r=e("./lodash"),i=e("./graph");t.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:function(e){return r.map(e.nodes(),function(t){var n=e.node(t),i=e.parent(t),o={v:t};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}(e),edges:function(e){return r.map(e.edges(),function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.isUndefined(t.name)||(i.name=t.name),r.isUndefined(n)||(i.value=n),i})}(e)};return r.isUndefined(e.graph())||(t.value=r.clone(e.graph())),t},read:function(e){var t=new i(e.options).setGraph(e.value);return r.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),r.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},{"./graph":18,"./lodash":21}],21:[function(e,t,n){var r;if("function"==typeof e)try{r=e("lodash")}catch(e){}r||(r=window._),t.exports=r},{lodash:23}],22:[function(e,t,n){t.exports="2.1.1"},{}],23:[function(e,t,n){(function(e){(function(){function r(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function u(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function c(e,t){return!(null==e||!e.length)&&_(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function p(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function h(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function d(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function g(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function m(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){return e.match(bt)||[]}function v(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function b(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function _(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):b(e,x,n)}function w(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function x(e){return e!=e}function k(e,t){var n=null==e?0:e.length;return n?S(e,t)/n:ge}function E(e){return function(t){return null==t?W:t[e]}}function O(e){return function(t){return null==e?W:e[t]}}function A(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function S(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==W&&(n=n===W?o:n+o)}return n}function C(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function N(e){return function(t){return e(t)}}function F(e,t){return p(t,function(t){return e[t]})}function j(e,t){return e.has(t)}function D(e,t){for(var n=-1,r=e.length;++n<r&&_(t,e[n],0)>-1;);return n}function P(e,t){for(var n=e.length;n--&&_(t,e[n],0)>-1;);return n}function T(e){return"\\"+tn[e]}function I(e){return Yt.test(e)}function L(e){return Zt.test(e)}function $(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function R(e,t){return function(n){return e(t(n))}}function U(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==G||(e[n]=G,o[i++]=n)}return o}function z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function M(e){return I(e)?function(e){for(var t=Jt.lastIndex=0;Jt.test(e);)++t;return t}(e):bn(e)}function q(e){return I(e)?function(e){return e.match(Jt)||[]}(e):function(e){return e.split("")}(e)}function B(e){return e.match(Gt)||[]}var W,H=200,V="Expected a function",J="__lodash_hash_undefined__",G="__lodash_placeholder__",Y=1,Z=2,K=4,X=1,Q=2,ee=1,te=2,ne=4,re=8,ie=16,oe=32,ae=64,se=128,le=256,ue=512,ce=800,fe=16,pe=1/0,he=9007199254740991,de=1.7976931348623157e308,ge=NaN,me=4294967295,ye=me-1,ve=me>>>1,be=[["ary",se],["bind",ee],["bindKey",te],["curry",re],["curryRight",ie],["flip",ue],["partial",oe],["partialRight",ae],["rearg",le]],_e="[object Arguments]",we="[object Array]",xe="[object AsyncFunction]",ke="[object Boolean]",Ee="[object Date]",Oe="[object DOMException]",Ae="[object Error]",Se="[object Function]",Ce="[object GeneratorFunction]",Ne="[object Map]",Fe="[object Number]",je="[object Null]",De="[object Object]",Pe="[object Proxy]",Te="[object RegExp]",Ie="[object Set]",Le="[object String]",$e="[object Symbol]",Re="[object Undefined]",Ue="[object WeakMap]",ze="[object ArrayBuffer]",Me="[object DataView]",qe="[object Float32Array]",Be="[object Float64Array]",We="[object Int8Array]",He="[object Int16Array]",Ve="[object Int32Array]",Je="[object Uint8Array]",Ge="[object Uint8ClampedArray]",Ye="[object Uint16Array]",Ze="[object Uint32Array]",Ke=/\b__p \+= '';/g,Xe=/\b(__p \+=) '' \+/g,Qe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,et=/&(?:amp|lt|gt|quot|#39);/g,tt=/[&<>"']/g,nt=RegExp(et.source),rt=RegExp(tt.source),it=/<%-([\s\S]+?)%>/g,ot=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,st=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/,ut=/^\./,ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ft=/[\\^$.*+?()[\]{}|]/g,pt=RegExp(ft.source),ht=/^\s+|\s+$/g,dt=/^\s+/,gt=/\s+$/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yt=/\{\n\/\* \[wrapped with (.+)\] \*/,vt=/,? & /,bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/\\(\\)?/g,wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xt=/\w*$/,kt=/^[-+]0x[0-9a-f]+$/i,Et=/^0b[01]+$/i,Ot=/^\[object .+?Constructor\]$/,At=/^0o[0-7]+$/i,St=/^(?:0|[1-9]\d*)$/,Ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nt=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+Dt+"]",Tt="["+jt+"]",It="[a-z\\xdf-\\xf6\\xf8-\\xff]",Lt="\\ud83c[\\udffb-\\udfff]",$t="(?:\\ud83c[\\udde6-\\uddff]){2}",Rt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ut="[A-Z\\xc0-\\xd6\\xd8-\\xde]",zt="(?:"+It+"|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])",Mt="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",qt="[\\ufe0e\\ufe0f]?"+Mt+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",$t,Rt].join("|")+")[\\ufe0e\\ufe0f]?"+Mt+")*",Bt="(?:"+["[\\u2700-\\u27bf]",$t,Rt].join("|")+")"+qt,Wt="(?:"+["[^\\ud800-\\udfff]"+Tt+"?",Tt,$t,Rt,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("['’]","g"),Vt=RegExp(Tt,"g"),Jt=RegExp(Lt+"(?="+Lt+")|"+Wt+qt,"g"),Gt=RegExp([Ut+"?"+It+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Pt,Ut,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Pt,Ut+zt,"$"].join("|")+")",Ut+"?"+zt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Ut+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",Bt].join("|"),"g"),Yt=RegExp("[\\u200d\\ud800-\\udfff"+jt+"\\ufe0e\\ufe0f]"),Zt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,Qt={};Qt[qe]=Qt[Be]=Qt[We]=Qt[He]=Qt[Ve]=Qt[Je]=Qt[Ge]=Qt[Ye]=Qt[Ze]=!0,Qt[_e]=Qt[we]=Qt[ze]=Qt[ke]=Qt[Me]=Qt[Ee]=Qt[Ae]=Qt[Se]=Qt[Ne]=Qt[Fe]=Qt[De]=Qt[Te]=Qt[Ie]=Qt[Le]=Qt[Ue]=!1;var en={};en[_e]=en[we]=en[ze]=en[Me]=en[ke]=en[Ee]=en[qe]=en[Be]=en[We]=en[He]=en[Ve]=en[Ne]=en[Fe]=en[De]=en[Te]=en[Ie]=en[Le]=en[$e]=en[Je]=en[Ge]=en[Ye]=en[Ze]=!0,en[Ae]=en[Se]=en[Ue]=!1;var tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nn=parseFloat,rn=parseInt,on="object"==typeof e&&e&&e.Object===Object&&e,an="object"==typeof self&&self&&self.Object===Object&&self,sn=on||an||Function("return this")(),ln="object"==typeof n&&n&&!n.nodeType&&n,un=ln&&"object"==typeof t&&t&&!t.nodeType&&t,cn=un&&un.exports===ln,fn=cn&&on.process,pn=function(){try{return fn&&fn.binding&&fn.binding("util")}catch(e){}}(),hn=pn&&pn.isArrayBuffer,dn=pn&&pn.isDate,gn=pn&&pn.isMap,mn=pn&&pn.isRegExp,yn=pn&&pn.isSet,vn=pn&&pn.isTypedArray,bn=E("length"),_n=O({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),wn=O({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),xn=O({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),kn=function e(t){function n(e){if(eo(e)&&!Ws(e)&&!(e instanceof jt)){if(e instanceof bt)return e;if(Wo.call(e,"__wrapped__"))return Ai(e)}return new bt(e)}function O(){}function bt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=W}function jt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function Dt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function It(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Tt;++t<n;)this.add(e[t])}function Lt(e){var t=this.__data__=new Pt(e);this.size=t.size}function $t(e,t){var n=Ws(e),r=!n&&Bs(e),i=!n&&!r&&Vs(e),o=!n&&!r&&!i&&Ks(e),a=n||r||i||o,s=a?C(e.length,$o):[],l=s.length;for(var u in e)!t&&!Wo.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||pi(u,l))||s.push(u);return s}function Rt(e){var t=e.length;return t?e[Zn(0,t-1)]:W}function Ut(e,t,n){(n===W||Vi(e[t],n))&&(n!==W||t in e)||Wt(e,t,n)}function zt(e,t,n){var r=e[t];Wo.call(e,t)&&Vi(r,n)&&(n!==W||t in e)||Wt(e,t,n)}function Mt(e,t){for(var n=e.length;n--;)if(Vi(e[n][0],t))return n;return-1}function qt(e,t,n,r){return qa(e,function(e,i,o){t(r,e,n(e),o)}),r}function Bt(e,t){return e&&Sr(t,go(t),e)}function Wt(e,t,n){"__proto__"==t&&la?la(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Jt(e,t){for(var n=-1,r=t.length,i=Fo(r),o=null==e;++n<r;)i[n]=o?W:po(e,t[n]);return i}function Gt(e,t,n){return e==e&&(n!==W&&(e=e<=n?e:n),t!==W&&(e=e>=t?e:t)),e}function Yt(e,t,n,r,i,o){var a,l=t&Y,u=t&Z,c=t&K;if(n&&(a=i?n(e,r,i,o):n(e)),a!==W)return a;if(!Qi(e))return e;var f=Ws(e);if(f){if(a=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Wo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Ar(e,a)}else{var p=es(e),h=p==Se||p==Ce;if(Vs(e))return vr(e,l);if(p==De||p==_e||h&&!i){if(a=u||h?{}:ci(e),!l)return u?function(e,t){return Sr(e,Qa(e),t)}(e,function(e,t){return e&&Sr(t,mo(t),e)}(a,e)):function(e,t){return Sr(e,Xa(e),t)}(e,Bt(a,e))}else{if(!en[p])return i?e:{};a=function(e,t,n,r){var i=e.constructor;switch(t){case ze:return br(e);case ke:case Ee:return new i(+e);case Me:return function(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case qe:case Be:case We:case He:case Ve:case Je:case Ge:case Ye:case Ze:return xr(e,r);case Ne:return _r(e,r,n);case Fe:case Le:return new i(e);case Te:return function(e){var t=new e.constructor(e.source,xt.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ie:return wr(e,r,n);case $e:return function(e){return Ua?Io(Ua.call(e)):{}}(e)}}(e,p,Yt,l)}}o||(o=new Lt);var d=o.get(e);if(d)return d;o.set(e,a);var g=f?W:(c?u?ni:ti:u?mo:go)(e);return s(g||e,function(r,i){g&&(r=e[i=r]),zt(a,i,Yt(r,t,n,i,e,o))}),a}function Zt(e,t,n){var r=n.length;if(null==e)return!r;for(e=Io(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===W&&!(i in e)||!o(a))return!1}return!0}function tn(e,t,n){if("function"!=typeof e)throw new Ro(V);return rs(function(){e.apply(W,n)},t)}function on(e,t,n,r){var i=-1,o=c,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=p(t,N(n))),r?(o=f,a=!1):t.length>=H&&(o=j,a=!1,t=new It(t));e:for(;++i<s;){var h=e[i],d=null==n?h:n(h);if(h=r||0!==h?h:0,a&&d==d){for(var g=u;g--;)if(t[g]===d)continue e;l.push(h)}else o(t,d,r)||l.push(h)}return l}function an(e,t){var n=!0;return qa(e,function(e,r,i){return n=!!t(e,r,i)}),n}function ln(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===W?a==a&&!io(a):n(a,s)))var s=a,l=o}return l}function un(e,t){var n=[];return qa(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function fn(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=fi),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?fn(s,t-1,n,r,i):h(i,s):r||(i[i.length]=s)}return i}function pn(e,t){return e&&Wa(e,t,go)}function bn(e,t){return e&&Ha(e,t,go)}function En(e,t){return u(t,function(t){return Zi(e[t])})}function On(e,t){for(var n=0,r=(t=mr(t,e)).length;null!=e&&n<r;)e=e[Ei(t[n++])];return n&&n==r?e:W}function An(e,t,n){var r=t(e);return Ws(e)?r:h(r,n(e))}function Sn(e){return null==e?e===W?Re:je:sa&&sa in Io(e)?function(e){var t=Wo.call(e,sa),n=e[sa];try{e[sa]=W}catch(e){}var r=Jo.call(e);return t?e[sa]=n:delete e[sa],r}(e):function(e){return Jo.call(e)}(e)}function Cn(e,t){return e>t}function Nn(e,t){return null!=e&&Wo.call(e,t)}function Fn(e,t){return null!=e&&t in Io(e)}function jn(e,t,n){for(var r=n?f:c,i=e[0].length,o=e.length,a=o,s=Fo(o),l=1/0,u=[];a--;){var h=e[a];a&&t&&(h=p(h,N(t))),l=_a(h.length,l),s[a]=!n&&(t||i>=120&&h.length>=120)?new It(a&&h):W}h=e[0];var d=-1,g=s[0];e:for(;++d<i&&u.length<l;){var m=h[d],y=t?t(m):m;if(m=n||0!==m?m:0,!(g?j(g,y):r(u,y,n))){for(a=o;--a;){var v=s[a];if(!(v?j(v,y):r(e[a],y,n)))continue e}g&&g.push(y),u.push(m)}}return u}function Dn(e,t,n){var r=null==(e=_i(e,t=mr(t,e)))?e:e[Ei(ji(t))];return null==r?W:o(r,e,n)}function Pn(e){return eo(e)&&Sn(e)==_e}function Tn(e,t,n,r,i){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Ws(e),s=Ws(t),l=a?we:es(e),u=s?we:es(t),c=(l=l==_e?De:l)==De,f=(u=u==_e?De:u)==De,p=l==u;if(p&&Vs(e)){if(!Vs(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new Lt),a||Ks(e)?Qr(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case Me:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ze:return!(e.byteLength!=t.byteLength||!o(new Qo(e),new Qo(t)));case ke:case Ee:case Fe:return Vi(+e,+t);case Ae:return e.name==t.name&&e.message==t.message;case Te:case Le:return e==t+"";case Ne:var s=$;case Ie:var l=r&X;if(s||(s=z),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=Q,a.set(e,t);var c=Qr(s(e),s(t),r,i,o,a);return a.delete(e),c;case $e:if(Ua)return Ua.call(e)==Ua.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&X)){var h=c&&Wo.call(e,"__wrapped__"),d=f&&Wo.call(t,"__wrapped__");if(h||d){var g=h?e.value():e,m=d?t.value():t;return o||(o=new Lt),i(g,m,n,r,o)}}return!!p&&(o||(o=new Lt),function(e,t,n,r,i,o){var a=n&X,s=ti(e),l=s.length;if(l!=ti(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Wo.call(t,c)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++u<l;){var d=e[c=s[u]],g=t[c];if(r)var m=a?r(g,d,c,t,e,o):r(d,g,c,e,t,o);if(!(m===W?d===g||i(d,g,n,r,o):m)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var y=e.constructor,v=t.constructor;y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}(e,t,n,r,Tn,i))}function In(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Io(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(u===W&&!(l in e))return!1}else{var f=new Lt;if(r)var p=r(u,c,l,e,t,f);if(!(p===W?Tn(c,u,X|Q,r,f):p))return!1}}return!0}function Ln(e){return!(!Qi(e)||function(e){return!!Vo&&Vo in e}(e))&&(Zi(e)?Zo:Ot).test(Oi(e))}function $n(e){return"function"==typeof e?e:null==e?ko:"object"==typeof e?Ws(e)?Bn(e[0],e[1]):qn(e):So(e)}function Rn(e){if(!mi(e))return va(e);var t=[];for(var n in Io(e))Wo.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Un(e){if(!Qi(e))return function(e){var t=[];if(null!=e)for(var n in Io(e))t.push(n);return t}(e);var t=mi(e),n=[];for(var r in e)("constructor"!=r||!t&&Wo.call(e,r))&&n.push(r);return n}function zn(e,t){return e<t}function Mn(e,t){var n=-1,r=Ji(e)?Fo(e.length):[];return qa(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function qn(e){var t=si(e);return 1==t.length&&t[0][2]?vi(t[0][0],t[0][1]):function(n){return n===e||In(n,e,t)}}function Bn(e,t){return di(e)&&yi(t)?vi(Ei(e),t):function(n){var r=po(n,e);return r===W&&r===t?ho(n,e):Tn(t,r,X|Q)}}function Wn(e,t,n,r,i){e!==t&&Wa(t,function(o,a){if(Qi(o))i||(i=new Lt),function(e,t,n,r,i,o,a){var s=e[n],l=t[n],u=a.get(l);if(u)Ut(e,n,u);else{var c=o?o(s,l,n+"",e,t,a):W,f=c===W;if(f){var p=Ws(l),h=!p&&Vs(l),d=!p&&!h&&Ks(l);c=l,p||h||d?Ws(s)?c=s:Gi(s)?c=Ar(s):h?(f=!1,c=vr(l,!0)):d?(f=!1,c=xr(l,!0)):c=[]:no(l)||Bs(l)?(c=s,Bs(s)?c=co(s):(!Qi(s)||r&&Zi(s))&&(c=ci(l))):f=!1}f&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),Ut(e,n,c)}}(e,t,a,n,Wn,r,i);else{var s=r?r(e[a],o,a+"",e,t,i):W;s===W&&(s=o),Ut(e,a,s)}},mo)}function Hn(e,t){var n=e.length;if(n)return pi(t+=t<0?n:0,n)?e[t]:W}function Vn(e,t,n){var r=-1;return t=p(t.length?t:[ko],N(oi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Mn(e,function(e,n,i){return{criteria:p(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=kr(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Jn(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=On(e,a);n(s,a)&&Qn(o,mr(a,e),s)}return o}function Gn(e,t,n,r){var i=r?w:_,o=-1,a=t.length,s=e;for(e===t&&(t=Ar(t)),n&&(s=p(e,N(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&ia.call(s,l,1),ia.call(e,l,1);return e}function Yn(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;pi(i)?ia.call(e,i,1):lr(e,i)}}return e}function Zn(e,t){return e+ha(ka()*(t-e+1))}function Kn(e,t){var n="";if(!e||t<1||t>he)return n;do{t%2&&(n+=e),(t=ha(t/2))&&(e+=e)}while(t);return n}function Xn(e,t){return is(bi(e,t,ko),e+"")}function Qn(e,t,n,r){if(!Qi(e))return e;for(var i=-1,o=(t=mr(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Ei(t[i]),u=n;if(i!=a){var c=s[l];(u=r?r(c,l,s):W)===W&&(u=Qi(c)?c:pi(t[i+1])?[]:{})}zt(s,l,u),s=s[l]}return e}function er(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Fo(i);++r<i;)o[r]=e[r+t];return o}function tr(e,t){var n;return qa(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function nr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=ve){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!io(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return rr(e,t,ko,n)}function rr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!=t,s=null===t,l=io(t),u=t===W;i<o;){var c=ha((i+o)/2),f=n(e[c]),p=f!==W,h=null===f,d=f==f,g=io(f);if(a)var m=r||d;else m=u?d&&(r||p):s?d&&p&&(r||!h):l?d&&p&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);m?i=c+1:o=c}return _a(o,ye)}function ir(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Vi(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function or(e){return"number"==typeof e?e:io(e)?ge:+e}function ar(e){if("string"==typeof e)return e;if(Ws(e))return p(e,ar)+"";if(io(e))return za?za.call(e):"";var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function sr(e,t,n){var r=-1,i=c,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=f;else if(o>=H){var u=t?null:Za(e);if(u)return z(u);a=!1,i=j,l=new It}else l=t?[]:s;e:for(;++r<o;){var p=e[r],h=t?t(p):p;if(p=n||0!==p?p:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(p)}else i(l,h,n)||(l!==s&&l.push(h),s.push(p))}return s}function lr(e,t){return null==(e=_i(e,t=mr(t,e)))||delete e[Ei(ji(t))]}function ur(e,t,n,r){return Qn(e,t,n(On(e,t)),r)}function cr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?er(e,r?0:o,r?o+1:i):er(e,r?o+1:0,r?i:o)}function fr(e,t){var n=e;return n instanceof jt&&(n=n.value()),d(t,function(e,t){return t.func.apply(t.thisArg,h([e],t.args))},n)}function pr(e,t,n){var r=e.length;if(r<2)return r?sr(e[0]):[];for(var i=-1,o=Fo(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=on(o[i]||a,e[s],t,n));return sr(fn(o,1),t,n)}function hr(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:W;n(a,e[r],s)}return a}function dr(e){return Gi(e)?e:[]}function gr(e){return"function"==typeof e?e:ko}function mr(e,t){return Ws(e)?e:di(e,t)?[e]:os(fo(e))}function yr(e,t,n){var r=e.length;return n=n===W?r:n,!t&&n>=r?e:er(e,t,n)}function vr(e,t){if(t)return e.slice();var n=e.length,r=ea?ea(n):new e.constructor(n);return e.copy(r),r}function br(e){var t=new e.constructor(e.byteLength);return new Qo(t).set(new Qo(e)),t}function _r(e,t,n){return d(t?n($(e),Y):$(e),r,new e.constructor)}function wr(e,t,n){return d(t?n(z(e),Y):z(e),i,new e.constructor)}function xr(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function kr(e,t){if(e!==t){var n=e!==W,r=null===e,i=e==e,o=io(e),a=t!==W,s=null===t,l=t==t,u=io(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Er(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=ba(o-a,0),c=Fo(l+u),f=!r;++s<l;)c[s]=t[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function Or(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=ba(o-s,0),f=Fo(c+u),p=!r;++i<c;)f[i]=e[i];for(var h=i;++l<u;)f[h+l]=t[l];for(;++a<s;)(p||i<o)&&(f[h+n[a]]=e[i++]);return f}function Ar(e,t){var n=-1,r=e.length;for(t||(t=Fo(r));++n<r;)t[n]=e[n];return t}function Sr(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):W;l===W&&(l=e[s]),i?Wt(n,s,l):zt(n,s,l)}return n}function Cr(e,t){return function(n,r){var i=Ws(n)?a:qt,o=t?t():{};return i(n,e,oi(r,2),o)}}function Nr(e){return Xn(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:W,a=i>2?n[2]:W;for(o=e.length>3&&"function"==typeof o?(i--,o):W,a&&hi(n[0],n[1],a)&&(o=i<3?W:o,i=1),t=Io(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function Fr(e,t){return function(n,r){if(null==n)return n;if(!Ji(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Io(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function jr(e){return function(t,n,r){for(var i=-1,o=Io(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function Dr(e){return function(t){var n=I(t=fo(t))?q(t):W,r=n?n[0]:t.charAt(0),i=n?yr(n,1).join(""):t.slice(1);return r[e]()+i}}function Pr(e){return function(t){return d(wo(_o(t).replace(Ht,"")),e,"")}}function Tr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ma(e.prototype),r=e.apply(n,t);return Qi(r)?r:n}}function Ir(e,t,n){var r=Tr(e);return function i(){for(var a=arguments.length,s=Fo(a),l=a,u=ii(i);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:U(s,u);return(a-=c.length)<n?Vr(e,t,Rr,i.placeholder,W,s,c,W,W,n-a):o(this&&this!==sn&&this instanceof i?r:e,this,s)}}function Lr(e){return function(t,n,r){var i=Io(t);if(!Ji(t)){var o=oi(n,3);t=go(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:W}}function $r(e){return ei(function(t){var n=t.length,r=n,i=bt.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Ro(V);if(i&&!a&&"wrapper"==ri(o))var a=new bt([],!0)}for(r=a?r:n;++r<n;){var s=ri(o=t[r]),l="wrapper"==s?Ka(o):W;a=l&&gi(l[0])&&l[1]==(se|re|oe|le)&&!l[4].length&&1==l[9]?a[ri(l[0])].apply(a,l[3]):1==o.length&&gi(o)?a[s]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Ws(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Rr(e,t,n,r,i,o,a,s,l,u){var c=t&se,f=t&ee,p=t&te,h=t&(re|ie),d=t&ue,g=p?W:Tr(e);return function m(){for(var y=arguments.length,v=Fo(y),b=y;b--;)v[b]=arguments[b];if(h)var _=ii(m),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(v,_);if(r&&(v=Er(v,r,i,h)),o&&(v=Or(v,o,a,h)),y-=w,h&&y<u){var x=U(v,_);return Vr(e,t,Rr,m.placeholder,n,v,x,s,l,u-y)}var k=f?n:this,E=p?k[e]:e;return y=v.length,s?v=function(e,t){for(var n=e.length,r=_a(t.length,n),i=Ar(e);r--;){var o=t[r];e[r]=pi(o,n)?i[o]:W}return e}(v,s):d&&y>1&&v.reverse(),c&&l<y&&(v.length=l),this&&this!==sn&&this instanceof m&&(E=g||Tr(E)),E.apply(k,v)}}function Ur(e,t){return function(n,r){return function(e,t,n,r){return pn(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function zr(e,t){return function(n,r){var i;if(n===W&&r===W)return t;if(n!==W&&(i=n),r!==W){if(i===W)return r;"string"==typeof n||"string"==typeof r?(n=ar(n),r=ar(r)):(n=or(n),r=or(r)),i=e(n,r)}return i}}function Mr(e){return ei(function(t){return t=p(t,N(oi())),Xn(function(n){var r=this;return e(t,function(e){return o(e,r,n)})})})}function qr(e,t){var n=(t=t===W?" ":ar(t)).length;if(n<2)return n?Kn(t,e):t;var r=Kn(t,pa(e/M(t)));return I(t)?yr(q(r),0,e).join(""):r.slice(0,e)}function Br(e,t,n,r){var i=t&ee,a=Tr(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=r.length,f=Fo(c+l),p=this&&this!==sn&&this instanceof t?a:e;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++s];return o(p,i?n:this,f)}}function Wr(e){return function(t,n,r){return r&&"number"!=typeof r&&hi(t,n,r)&&(n=r=W),t=ao(t),n===W?(n=t,t=0):n=ao(n),function(e,t,n,r){for(var i=-1,o=ba(pa((t-e)/(n||1)),0),a=Fo(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=r===W?t<n?1:-1:ao(r),e)}}function Hr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=uo(t),n=uo(n)),e(t,n)}}function Vr(e,t,n,r,i,o,a,s,l,u){var c=t&re;t|=c?oe:ae,(t&=~(c?ae:oe))&ne||(t&=~(ee|te));var f=[e,t,i,c?o:W,c?a:W,c?W:o,c?W:a,s,l,u],p=n.apply(W,f);return gi(e)&&ns(p,f),p.placeholder=r,wi(p,e,t)}function Jr(e){var t=To[e];return function(e,n){if(e=uo(e),n=null==n?0:_a(so(n),292)){var r=(fo(e)+"e").split("e");return+((r=(fo(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Gr(e){return function(t){var n=es(t);return n==Ne?$(t):n==Ie?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return p(t,function(t){return[t,e[t]]})}(t,e(t))}}function Yr(e,t,n,r,i,o,a,s){var l=t&te;if(!l&&"function"!=typeof e)throw new Ro(V);var u=r?r.length:0;if(u||(t&=~(oe|ae),r=i=W),a=a===W?a:ba(so(a),0),s=s===W?s:so(s),u-=i?i.length:0,t&ae){var c=r,f=i;r=i=W}var p=l?W:Ka(e),h=[e,t,n,r,i,c,f,o,a,s];if(p&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ee|te|se),a=r==se&&n==re||r==se&&n==le&&e[7].length<=t[8]||r==(se|le)&&t[7].length<=t[8]&&n==re;if(!o&&!a)return e;r&ee&&(e[2]=t[2],i|=n&ee?0:ne);var s=t[3];if(s){var l=e[3];e[3]=l?Er(l,s,t[4]):s,e[4]=l?U(e[3],G):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Or(l,s,t[6]):s,e[6]=l?U(e[5],G):t[6]),(s=t[7])&&(e[7]=s),r&se&&(e[8]=null==e[8]?t[8]:_a(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],!(s=h[9]=h[9]===W?l?0:e.length:ba(h[9]-u,0))&&t&(re|ie)&&(t&=~(re|ie)),t&&t!=ee)d=t==re||t==ie?Ir(e,t,s):t!=oe&&t!=(ee|oe)||i.length?Rr.apply(W,h):Br(e,t,n,r);else var d=function(e,t,n){var r=t&ee,i=Tr(e);return function t(){return(this&&this!==sn&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return wi((p?Va:ns)(d,h),e,t)}function Zr(e,t,n,r){return e===W||Vi(e,Mo[n])&&!Wo.call(r,n)?t:e}function Kr(e,t,n,r,i,o){return Qi(e)&&Qi(t)&&(o.set(t,e),Wn(e,t,W,Kr,o),o.delete(t)),e}function Xr(e){return no(e)?W:e}function Qr(e,t,n,r,i,o){var a=n&X,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,f=!0,p=n&Q?new It:W;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],d=t[c];if(r)var g=a?r(d,h,c,t,e,o):r(h,d,c,e,t,o);if(g!==W){if(g)continue;f=!1;break}if(p){if(!m(t,function(e,t){if(!j(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)})){f=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ei(e){return is(bi(e,W,Ni),e+"")}function ti(e){return An(e,go,Xa)}function ni(e){return An(e,mo,Qa)}function ri(e){for(var t=e.name+"",n=Da[t],r=Wo.call(Da,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function ii(e){return(Wo.call(n,"placeholder")?n:e).placeholder}function oi(){var e=n.iteratee||Eo;return e=e===Eo?$n:e,arguments.length?e(arguments[0],arguments[1]):e}function ai(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function si(e){for(var t=go(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,yi(i)]}return t}function li(e,t){var n=function(e,t){return null==e?W:e[t]}(e,t);return Ln(n)?n:W}function ui(e,t,n){for(var r=-1,i=(t=mr(t,e)).length,o=!1;++r<i;){var a=Ei(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Xi(i)&&pi(a,i)&&(Ws(e)||Bs(e))}function ci(e){return"function"!=typeof e.constructor||mi(e)?{}:Ma(ta(e))}function fi(e){return Ws(e)||Bs(e)||!!(oa&&e&&e[oa])}function pi(e,t){return!!(t=null==t?he:t)&&("number"==typeof e||St.test(e))&&e>-1&&e%1==0&&e<t}function hi(e,t,n){if(!Qi(n))return!1;var r=typeof t;return!!("number"==r?Ji(n)&&pi(t,n.length):"string"==r&&t in n)&&Vi(n[t],e)}function di(e,t){if(Ws(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!io(e))||lt.test(e)||!st.test(e)||null!=t&&e in Io(t)}function gi(e){var t=ri(e),r=n[t];if("function"!=typeof r||!(t in jt.prototype))return!1;if(e===r)return!0;var i=Ka(r);return!!i&&e===i[0]}function mi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Mo)}function yi(e){return e==e&&!Qi(e)}function vi(e,t){return function(n){return null!=n&&n[e]===t&&(t!==W||e in Io(n))}}function bi(e,t,n){return t=ba(t===W?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=ba(r.length-t,0),s=Fo(a);++i<a;)s[i]=r[t+i];i=-1;for(var l=Fo(t+1);++i<t;)l[i]=r[i];return l[t]=n(s),o(e,this,l)}}function _i(e,t){return t.length<2?e:On(e,er(t,0,-1))}function wi(e,t,n){var r=t+"";return is(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(mt,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return s(be,function(n){var r="_."+n[0];t&n[1]&&!c(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(yt);return t?t[1].split(vt):[]}(r),n)))}function xi(e){var t=0,n=0;return function(){var r=wa(),i=fe-(r-n);if(n=r,i>0){if(++t>=ce)return arguments[0]}else t=0;return e.apply(W,arguments)}}function ki(e,t){var n=-1,r=e.length,i=r-1;for(t=t===W?r:t;++n<t;){var o=Zn(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Ei(e){if("string"==typeof e||io(e))return e;var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function Oi(e){if(null!=e){try{return Bo.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ai(e){if(e instanceof jt)return e.clone();var t=new bt(e.__wrapped__,e.__chain__);return t.__actions__=Ar(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Si(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:so(n);return i<0&&(i=ba(r+i,0)),b(e,oi(t,3),i)}function Ci(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==W&&(i=so(n),i=n<0?ba(r+i,0):_a(i,r-1)),b(e,oi(t,3),i,!0)}function Ni(e){return null!=e&&e.length?fn(e,1):[]}function Fi(e){return e&&e.length?e[0]:W}function ji(e){var t=null==e?0:e.length;return t?e[t-1]:W}function Di(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}function Pi(e){return null==e?e:Ea.call(e)}function Ti(e){if(!e||!e.length)return[];var t=0;return e=u(e,function(e){if(Gi(e))return t=ba(e.length,t),!0}),C(t,function(t){return p(e,E(t))})}function Ii(e,t){if(!e||!e.length)return[];var n=Ti(e);return null==t?n:p(n,function(e){return o(t,W,e)})}function Li(e){var t=n(e);return t.__chain__=!0,t}function $i(e,t){return t(e)}function Ri(e,t){return(Ws(e)?s:qa)(e,oi(t,3))}function Ui(e,t){return(Ws(e)?function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:Ba)(e,oi(t,3))}function zi(e,t){return(Ws(e)?p:Mn)(e,oi(t,3))}function Mi(e,t,n){return t=n?W:t,t=e&&null==t?e.length:t,Yr(e,se,W,W,W,W,t)}function qi(e,t){var n;if("function"!=typeof t)throw new Ro(V);return e=so(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=W),n}}function Bi(e,t,n){function r(t){var n=l,r=u;return l=u=W,d=t,f=e.apply(r,n)}function i(e){var n=e-h;return h===W||n>=t||n<0||m&&e-d>=c}function o(){var e=Ds();if(i(e))return a(e);p=rs(o,function(e){var n=t-(e-h);return m?_a(n,c-(e-d)):n}(e))}function a(e){return p=W,y&&l?r(e):(l=u=W,f)}function s(){var e=Ds(),n=i(e);if(l=arguments,u=this,h=e,n){if(p===W)return function(e){return d=e,p=rs(o,t),g?r(e):f}(h);if(m)return p=rs(o,t),r(h)}return p===W&&(p=rs(o,t)),f}var l,u,c,f,p,h,d=0,g=!1,m=!1,y=!0;if("function"!=typeof e)throw new Ro(V);return t=uo(t)||0,Qi(n)&&(g=!!n.leading,c=(m="maxWait"in n)?ba(uo(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),s.cancel=function(){p!==W&&Ya(p),d=0,l=h=u=p=W},s.flush=function(){return p===W?f:a(Ds())},s}function Wi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ro(V);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wi.Cache||Tt),n}function Hi(e){if("function"!=typeof e)throw new Ro(V);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vi(e,t){return e===t||e!=e&&t!=t}function Ji(e){return null!=e&&Xi(e.length)&&!Zi(e)}function Gi(e){return eo(e)&&Ji(e)}function Yi(e){if(!eo(e))return!1;var t=Sn(e);return t==Ae||t==Oe||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Zi(e){if(!Qi(e))return!1;var t=Sn(e);return t==Se||t==Ce||t==xe||t==Pe}function Ki(e){return"number"==typeof e&&e==so(e)}function Xi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=he}function Qi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}function to(e){return"number"==typeof e||eo(e)&&Sn(e)==Fe}function no(e){if(!eo(e)||Sn(e)!=De)return!1;var t=ta(e);if(null===t)return!0;var n=Wo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Bo.call(n)==Go}function ro(e){return"string"==typeof e||!Ws(e)&&eo(e)&&Sn(e)==Le}function io(e){return"symbol"==typeof e||eo(e)&&Sn(e)==$e}function oo(e){if(!e)return[];if(Ji(e))return ro(e)?q(e):Ar(e);if(aa&&e[aa])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[aa]());var t=es(e);return(t==Ne?$:t==Ie?z:vo)(e)}function ao(e){return e?(e=uo(e))===pe||e===-pe?(e<0?-1:1)*de:e==e?e:0:0===e?e:0}function so(e){var t=ao(e),n=t%1;return t==t?n?t-n:t:0}function lo(e){return e?Gt(so(e),0,me):0}function uo(e){if("number"==typeof e)return e;if(io(e))return ge;if(Qi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ht,"");var n=Et.test(e);return n||At.test(e)?rn(e.slice(2),n?2:8):kt.test(e)?ge:+e}function co(e){return Sr(e,mo(e))}function fo(e){return null==e?"":ar(e)}function po(e,t,n){var r=null==e?W:On(e,t);return r===W?n:r}function ho(e,t){return null!=e&&ui(e,t,Fn)}function go(e){return Ji(e)?$t(e):Rn(e)}function mo(e){return Ji(e)?$t(e,!0):Un(e)}function yo(e,t){if(null==e)return{};var n=p(ni(e),function(e){return[e]});return t=oi(t),Jn(e,n,function(e,n){return t(e,n[0])})}function vo(e){return null==e?[]:F(e,go(e))}function bo(e){return kl(fo(e).toLowerCase())}function _o(e){return(e=fo(e))&&e.replace(Ct,_n).replace(Vt,"")}function wo(e,t,n){return e=fo(e),(t=n?W:t)===W?L(e)?B(e):y(e):e.match(t)||[]}function xo(e){return function(){return e}}function ko(e){return e}function Eo(e){return $n("function"==typeof e?e:Yt(e,Y))}function Oo(e,t,n){var r=go(t),i=En(t,r);null!=n||Qi(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=En(t,go(t)));var o=!(Qi(n)&&"chain"in n&&!n.chain),a=Zi(e);return s(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ar(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,h([this.value()],arguments))})}),e}function Ao(){}function So(e){return di(e)?E(Ei(e)):function(e){return function(t){return On(t,e)}}(e)}function Co(){return[]}function No(){return!1}var Fo=(t=null==t?sn:kn.defaults(sn.Object(),t,kn.pick(sn,Kt))).Array,jo=t.Date,Do=t.Error,Po=t.Function,To=t.Math,Io=t.Object,Lo=t.RegExp,$o=t.String,Ro=t.TypeError,Uo=Fo.prototype,zo=Po.prototype,Mo=Io.prototype,qo=t["__core-js_shared__"],Bo=zo.toString,Wo=Mo.hasOwnProperty,Ho=0,Vo=function(){var e=/[^.]+$/.exec(qo&&qo.keys&&qo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Jo=Mo.toString,Go=Bo.call(Io),Yo=sn._,Zo=Lo("^"+Bo.call(Wo).replace(ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ko=cn?t.Buffer:W,Xo=t.Symbol,Qo=t.Uint8Array,ea=Ko?Ko.allocUnsafe:W,ta=R(Io.getPrototypeOf,Io),na=Io.create,ra=Mo.propertyIsEnumerable,ia=Uo.splice,oa=Xo?Xo.isConcatSpreadable:W,aa=Xo?Xo.iterator:W,sa=Xo?Xo.toStringTag:W,la=function(){try{var e=li(Io,"defineProperty");return e({},"",{}),e}catch(e){}}(),ua=t.clearTimeout!==sn.clearTimeout&&t.clearTimeout,ca=jo&&jo.now!==sn.Date.now&&jo.now,fa=t.setTimeout!==sn.setTimeout&&t.setTimeout,pa=To.ceil,ha=To.floor,da=Io.getOwnPropertySymbols,ga=Ko?Ko.isBuffer:W,ma=t.isFinite,ya=Uo.join,va=R(Io.keys,Io),ba=To.max,_a=To.min,wa=jo.now,xa=t.parseInt,ka=To.random,Ea=Uo.reverse,Oa=li(t,"DataView"),Aa=li(t,"Map"),Sa=li(t,"Promise"),Ca=li(t,"Set"),Na=li(t,"WeakMap"),Fa=li(Io,"create"),ja=Na&&new Na,Da={},Pa=Oi(Oa),Ta=Oi(Aa),Ia=Oi(Sa),La=Oi(Ca),$a=Oi(Na),Ra=Xo?Xo.prototype:W,Ua=Ra?Ra.valueOf:W,za=Ra?Ra.toString:W,Ma=function(){function e(){}return function(t){if(!Qi(t))return{};if(na)return na(t);e.prototype=t;var n=new e;return e.prototype=W,n}}();n.templateSettings={escape:it,evaluate:ot,interpolate:at,variable:"",imports:{_:n}},n.prototype=O.prototype,n.prototype.constructor=n,bt.prototype=Ma(O.prototype),bt.prototype.constructor=bt,jt.prototype=Ma(O.prototype),jt.prototype.constructor=jt,Dt.prototype.clear=function(){this.__data__=Fa?Fa(null):{},this.size=0},Dt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Dt.prototype.get=function(e){var t=this.__data__;if(Fa){var n=t[e];return n===J?W:n}return Wo.call(t,e)?t[e]:W},Dt.prototype.has=function(e){var t=this.__data__;return Fa?t[e]!==W:Wo.call(t,e)},Dt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fa&&t===W?J:t,this},Pt.prototype.clear=function(){this.__data__=[],this.size=0},Pt.prototype.delete=function(e){var t=this.__data__,n=Mt(t,e);return!(n<0||(n==t.length-1?t.pop():ia.call(t,n,1),--this.size,0))},Pt.prototype.get=function(e){var t=this.__data__,n=Mt(t,e);return n<0?W:t[n][1]},Pt.prototype.has=function(e){return Mt(this.__data__,e)>-1},Pt.prototype.set=function(e,t){var n=this.__data__,r=Mt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new Dt,map:new(Aa||Pt),string:new Dt}},Tt.prototype.delete=function(e){var t=ai(this,e).delete(e);return this.size-=t?1:0,t},Tt.prototype.get=function(e){return ai(this,e).get(e)},Tt.prototype.has=function(e){return ai(this,e).has(e)},Tt.prototype.set=function(e,t){var n=ai(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},It.prototype.add=It.prototype.push=function(e){return this.__data__.set(e,J),this},It.prototype.has=function(e){return this.__data__.has(e)},Lt.prototype.clear=function(){this.__data__=new Pt,this.size=0},Lt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Lt.prototype.get=function(e){return this.__data__.get(e)},Lt.prototype.has=function(e){return this.__data__.has(e)},Lt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Pt){var r=n.__data__;if(!Aa||r.length<H-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Tt(r)}return n.set(e,t),this.size=n.size,this};var qa=Fr(pn),Ba=Fr(bn,!0),Wa=jr(),Ha=jr(!0),Va=ja?function(e,t){return ja.set(e,t),e}:ko,Ja=la?function(e,t){return la(e,"toString",{configurable:!0,enumerable:!1,value:xo(t),writable:!0})}:ko,Ga=Xn,Ya=ua||function(e){return sn.clearTimeout(e)},Za=Ca&&1/z(new Ca([,-0]))[1]==pe?function(e){return new Ca(e)}:Ao,Ka=ja?function(e){return ja.get(e)}:Ao,Xa=da?function(e){return null==e?[]:(e=Io(e),u(da(e),function(t){return ra.call(e,t)}))}:Co,Qa=da?function(e){for(var t=[];e;)h(t,Xa(e)),e=ta(e);return t}:Co,es=Sn;(Oa&&es(new Oa(new ArrayBuffer(1)))!=Me||Aa&&es(new Aa)!=Ne||Sa&&"[object Promise]"!=es(Sa.resolve())||Ca&&es(new Ca)!=Ie||Na&&es(new Na)!=Ue)&&(es=function(e){var t=Sn(e),n=t==De?e.constructor:W,r=n?Oi(n):"";if(r)switch(r){case Pa:return Me;case Ta:return Ne;case Ia:return"[object Promise]";case La:return Ie;case $a:return Ue}return t});var ts=qo?Zi:No,ns=xi(Va),rs=fa||function(e,t){return sn.setTimeout(e,t)},is=xi(Ja),os=function(e){var t=Wi(function(e){var t=[];return ut.test(e)&&t.push(""),e.replace(ct,function(e,n,r,i){t.push(r?i.replace(_t,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(),as=Xn(function(e,t){return Gi(e)?on(e,fn(t,1,Gi,!0)):[]}),ss=Xn(function(e,t){var n=ji(t);return Gi(n)&&(n=W),Gi(e)?on(e,fn(t,1,Gi,!0),oi(n,2)):[]}),ls=Xn(function(e,t){var n=ji(t);return Gi(n)&&(n=W),Gi(e)?on(e,fn(t,1,Gi,!0),W,n):[]}),us=Xn(function(e){var t=p(e,dr);return t.length&&t[0]===e[0]?jn(t):[]}),cs=Xn(function(e){var t=ji(e),n=p(e,dr);return t===ji(n)?t=W:n.pop(),n.length&&n[0]===e[0]?jn(n,oi(t,2)):[]}),fs=Xn(function(e){var t=ji(e),n=p(e,dr);return(t="function"==typeof t?t:W)&&n.pop(),n.length&&n[0]===e[0]?jn(n,W,t):[]}),ps=Xn(Di),hs=ei(function(e,t){var n=null==e?0:e.length,r=Jt(e,t);return Yn(e,p(t,function(e){return pi(e,n)?+e:e}).sort(kr)),r}),ds=Xn(function(e){return sr(fn(e,1,Gi,!0))}),gs=Xn(function(e){var t=ji(e);return Gi(t)&&(t=W),sr(fn(e,1,Gi,!0),oi(t,2))}),ms=Xn(function(e){var t=ji(e);return t="function"==typeof t?t:W,sr(fn(e,1,Gi,!0),W,t)}),ys=Xn(function(e,t){return Gi(e)?on(e,t):[]}),vs=Xn(function(e){return pr(u(e,Gi))}),bs=Xn(function(e){var t=ji(e);return Gi(t)&&(t=W),pr(u(e,Gi),oi(t,2))}),_s=Xn(function(e){var t=ji(e);return t="function"==typeof t?t:W,pr(u(e,Gi),W,t)}),ws=Xn(Ti),xs=Xn(function(e){var t=e.length,n=t>1?e[t-1]:W;return n="function"==typeof n?(e.pop(),n):W,Ii(e,n)}),ks=ei(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Jt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof jt&&pi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:$i,args:[i],thisArg:W}),new bt(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(W),e})):this.thru(i)}),Es=Cr(function(e,t,n){Wo.call(e,n)?++e[n]:Wt(e,n,1)}),Os=Lr(Si),As=Lr(Ci),Ss=Cr(function(e,t,n){Wo.call(e,n)?e[n].push(t):Wt(e,n,[t])}),Cs=Xn(function(e,t,n){var r=-1,i="function"==typeof t,a=Ji(e)?Fo(e.length):[];return qa(e,function(e){a[++r]=i?o(t,e,n):Dn(e,t,n)}),a}),Ns=Cr(function(e,t,n){Wt(e,n,t)}),Fs=Cr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),js=Xn(function(e,t){if(null==e)return[];var n=t.length;return n>1&&hi(e,t[0],t[1])?t=[]:n>2&&hi(t[0],t[1],t[2])&&(t=[t[0]]),Vn(e,fn(t,1),[])}),Ds=ca||function(){return sn.Date.now()},Ps=Xn(function(e,t,n){var r=ee;if(n.length){var i=U(n,ii(Ps));r|=oe}return Yr(e,r,t,n,i)}),Ts=Xn(function(e,t,n){var r=ee|te;if(n.length){var i=U(n,ii(Ts));r|=oe}return Yr(t,r,e,n,i)}),Is=Xn(function(e,t){return tn(e,1,t)}),Ls=Xn(function(e,t,n){return tn(e,uo(t)||0,n)});Wi.Cache=Tt;var $s=Ga(function(e,t){var n=(t=1==t.length&&Ws(t[0])?p(t[0],N(oi())):p(fn(t,1),N(oi()))).length;return Xn(function(r){for(var i=-1,a=_a(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return o(e,this,r)})}),Rs=Xn(function(e,t){var n=U(t,ii(Rs));return Yr(e,oe,W,t,n)}),Us=Xn(function(e,t){var n=U(t,ii(Us));return Yr(e,ae,W,t,n)}),zs=ei(function(e,t){return Yr(e,le,W,W,W,t)}),Ms=Hr(Cn),qs=Hr(function(e,t){return e>=t}),Bs=Pn(function(){return arguments}())?Pn:function(e){return eo(e)&&Wo.call(e,"callee")&&!ra.call(e,"callee")},Ws=Fo.isArray,Hs=hn?N(hn):function(e){return eo(e)&&Sn(e)==ze},Vs=ga||No,Js=dn?N(dn):function(e){return eo(e)&&Sn(e)==Ee},Gs=gn?N(gn):function(e){return eo(e)&&es(e)==Ne},Ys=mn?N(mn):function(e){return eo(e)&&Sn(e)==Te},Zs=yn?N(yn):function(e){return eo(e)&&es(e)==Ie},Ks=vn?N(vn):function(e){return eo(e)&&Xi(e.length)&&!!Qt[Sn(e)]},Xs=Hr(zn),Qs=Hr(function(e,t){return e<=t}),el=Nr(function(e,t){if(mi(t)||Ji(t))Sr(t,go(t),e);else for(var n in t)Wo.call(t,n)&&zt(e,n,t[n])}),tl=Nr(function(e,t){Sr(t,mo(t),e)}),nl=Nr(function(e,t,n,r){Sr(t,mo(t),e,r)}),rl=Nr(function(e,t,n,r){Sr(t,go(t),e,r)}),il=ei(Jt),ol=Xn(function(e){return e.push(W,Zr),o(nl,W,e)}),al=Xn(function(e){return e.push(W,Kr),o(fl,W,e)}),sl=Ur(function(e,t,n){e[t]=n},xo(ko)),ll=Ur(function(e,t,n){Wo.call(e,t)?e[t].push(n):e[t]=[n]},oi),ul=Xn(Dn),cl=Nr(function(e,t,n){Wn(e,t,n)}),fl=Nr(function(e,t,n,r){Wn(e,t,n,r)}),pl=ei(function(e,t){var n={};if(null==e)return n;var r=!1;t=p(t,function(t){return t=mr(t,e),r||(r=t.length>1),t}),Sr(e,ni(e),n),r&&(n=Yt(n,Y|Z|K,Xr));for(var i=t.length;i--;)lr(n,t[i]);return n}),hl=ei(function(e,t){return null==e?{}:function(e,t){return Jn(e,t,function(t,n){return ho(e,n)})}(e,t)}),dl=Gr(go),gl=Gr(mo),ml=Pr(function(e,t,n){return t=t.toLowerCase(),e+(n?bo(t):t)}),yl=Pr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),vl=Pr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),bl=Dr("toLowerCase"),_l=Pr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),wl=Pr(function(e,t,n){return e+(n?" ":"")+kl(t)}),xl=Pr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),kl=Dr("toUpperCase"),El=Xn(function(e,t){try{return o(e,W,t)}catch(e){return Yi(e)?e:new Do(e)}}),Ol=ei(function(e,t){return s(t,function(t){t=Ei(t),Wt(e,t,Ps(e[t],e))}),e}),Al=$r(),Sl=$r(!0),Cl=Xn(function(e,t){return function(n){return Dn(n,e,t)}}),Nl=Xn(function(e,t){return function(n){return Dn(e,n,t)}}),Fl=Mr(p),jl=Mr(l),Dl=Mr(m),Pl=Wr(),Tl=Wr(!0),Il=zr(function(e,t){return e+t},0),Ll=Jr("ceil"),$l=zr(function(e,t){return e/t},1),Rl=Jr("floor"),Ul=zr(function(e,t){return e*t},1),zl=Jr("round"),Ml=zr(function(e,t){return e-t},0);return n.after=function(e,t){if("function"!=typeof t)throw new Ro(V);return e=so(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=Mi,n.assign=el,n.assignIn=tl,n.assignInWith=nl,n.assignWith=rl,n.at=il,n.before=qi,n.bind=Ps,n.bindAll=Ol,n.bindKey=Ts,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ws(e)?e:[e]},n.chain=Li,n.chunk=function(e,t,n){t=(n?hi(e,t,n):t===W)?1:ba(so(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Fo(pa(r/t));i<r;)a[o++]=er(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Fo(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return h(Ws(n)?Ar(n):[n],fn(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=oi();return e=t?p(e,function(e){if("function"!=typeof e[1])throw new Ro(V);return[n(e[0]),e[1]]}):[],Xn(function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}})},n.conforms=function(e){return function(e){var t=go(e);return function(n){return Zt(n,e,t)}}(Yt(e,Y))},n.constant=xo,n.countBy=Es,n.create=function(e,t){var n=Ma(e);return null==t?n:Bt(n,t)},n.curry=function e(t,n,r){var i=Yr(t,re,W,W,W,W,W,n=r?W:n);return i.placeholder=e.placeholder,i},n.curryRight=function e(t,n,r){var i=Yr(t,ie,W,W,W,W,W,n=r?W:n);return i.placeholder=e.placeholder,i},n.debounce=Bi,n.defaults=ol,n.defaultsDeep=al,n.defer=Is,n.delay=Ls,n.difference=as,n.differenceBy=ss,n.differenceWith=ls,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?er(e,(t=n||t===W?1:so(t))<0?0:t,r):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?er(e,0,(t=r-(t=n||t===W?1:so(t)))<0?0:t):[]},n.dropRightWhile=function(e,t){return e&&e.length?cr(e,oi(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?cr(e,oi(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&hi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=so(n))<0&&(n=-n>i?0:i+n),(r=r===W||r>i?i:so(r))<0&&(r+=i),r=n>r?0:lo(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},n.filter=function(e,t){return(Ws(e)?u:un)(e,oi(t,3))},n.flatMap=function(e,t){return fn(zi(e,t),1)},n.flatMapDeep=function(e,t){return fn(zi(e,t),pe)},n.flatMapDepth=function(e,t,n){return n=n===W?1:so(n),fn(zi(e,t),n)},n.flatten=Ni,n.flattenDeep=function(e){return null!=e&&e.length?fn(e,pe):[]},n.flattenDepth=function(e,t){return null!=e&&e.length?fn(e,t=t===W?1:so(t)):[]},n.flip=function(e){return Yr(e,ue)},n.flow=Al,n.flowRight=Sl,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:En(e,go(e))},n.functionsIn=function(e){return null==e?[]:En(e,mo(e))},n.groupBy=Ss,n.initial=function(e){return null!=e&&e.length?er(e,0,-1):[]},n.intersection=us,n.intersectionBy=cs,n.intersectionWith=fs,n.invert=sl,n.invertBy=ll,n.invokeMap=Cs,n.iteratee=Eo,n.keyBy=Ns,n.keys=go,n.keysIn=mo,n.map=zi,n.mapKeys=function(e,t){var n={};return t=oi(t,3),pn(e,function(e,r,i){Wt(n,t(e,r,i),e)}),n},n.mapValues=function(e,t){var n={};return t=oi(t,3),pn(e,function(e,r,i){Wt(n,r,t(e,r,i))}),n},n.matches=function(e){return qn(Yt(e,Y))},n.matchesProperty=function(e,t){return Bn(e,Yt(t,Y))},n.memoize=Wi,n.merge=cl,n.mergeWith=fl,n.method=Cl,n.methodOf=Nl,n.mixin=Oo,n.negate=Hi,n.nthArg=function(e){return e=so(e),Xn(function(t){return Hn(t,e)})},n.omit=pl,n.omitBy=function(e,t){return yo(e,Hi(oi(t)))},n.once=function(e){return qi(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(Ws(t)||(t=null==t?[]:[t]),Ws(n=r?W:n)||(n=null==n?[]:[n]),Vn(e,t,n))},n.over=Fl,n.overArgs=$s,n.overEvery=jl,n.overSome=Dl,n.partial=Rs,n.partialRight=Us,n.partition=Fs,n.pick=hl,n.pickBy=yo,n.property=So,n.propertyOf=function(e){return function(t){return null==e?W:On(e,t)}},n.pull=ps,n.pullAll=Di,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gn(e,t,oi(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gn(e,t,W,n):e},n.pullAt=hs,n.range=Pl,n.rangeRight=Tl,n.rearg=zs,n.reject=function(e,t){return(Ws(e)?u:un)(e,Hi(oi(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=oi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Yn(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new Ro(V);return Xn(e,t=t===W?t:so(t))},n.reverse=Pi,n.sampleSize=function(e,t,n){return t=(n?hi(e,t,n):t===W)?1:so(t),(Ws(e)?function(e,t){return ki(Ar(e),Gt(t,0,e.length))}:function(e,t){var n=vo(e);return ki(n,Gt(t,0,n.length))})(e,t)},n.set=function(e,t,n){return null==e?e:Qn(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:W,null==e?e:Qn(e,t,n,r)},n.shuffle=function(e){return(Ws(e)?function(e){return ki(Ar(e))}:function(e){return ki(vo(e))})(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&hi(e,t,n)?(t=0,n=r):(t=null==t?0:so(t),n=n===W?r:so(n)),er(e,t,n)):[]},n.sortBy=js,n.sortedUniq=function(e){return e&&e.length?ir(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?ir(e,oi(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&hi(e,t,n)&&(t=n=W),(n=n===W?me:n>>>0)?(e=fo(e))&&("string"==typeof t||null!=t&&!Ys(t))&&!(t=ar(t))&&I(e)?yr(q(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new Ro(V);return t=null==t?0:ba(so(t),0),Xn(function(n){var r=n[t],i=yr(n,0,t);return r&&h(i,r),o(e,this,i)})},n.tail=function(e){var t=null==e?0:e.length;return t?er(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?er(e,0,(t=n||t===W?1:so(t))<0?0:t):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?er(e,(t=r-(t=n||t===W?1:so(t)))<0?0:t,r):[]},n.takeRightWhile=function(e,t){return e&&e.length?cr(e,oi(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?cr(e,oi(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ro(V);return Qi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Bi(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=$i,n.toArray=oo,n.toPairs=dl,n.toPairsIn=gl,n.toPath=function(e){return Ws(e)?p(e,Ei):io(e)?[e]:Ar(os(fo(e)))},n.toPlainObject=co,n.transform=function(e,t,n){var r=Ws(e),i=r||Vs(e)||Ks(e);if(t=oi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Qi(e)&&Zi(o)?Ma(ta(e)):{}}return(i?s:pn)(e,function(e,r,i){return t(n,e,r,i)}),n},n.unary=function(e){return Mi(e,1)},n.union=ds,n.unionBy=gs,n.unionWith=ms,n.uniq=function(e){return e&&e.length?sr(e):[]},n.uniqBy=function(e,t){return e&&e.length?sr(e,oi(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:W,e&&e.length?sr(e,W,t):[]},n.unset=function(e,t){return null==e||lr(e,t)},n.unzip=Ti,n.unzipWith=Ii,n.update=function(e,t,n){return null==e?e:ur(e,t,gr(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:W,null==e?e:ur(e,t,gr(n),r)},n.values=vo,n.valuesIn=function(e){return null==e?[]:F(e,mo(e))},n.without=ys,n.words=wo,n.wrap=function(e,t){return Rs(gr(t),e)},n.xor=vs,n.xorBy=bs,n.xorWith=_s,n.zip=ws,n.zipObject=function(e,t){return hr(e||[],t||[],zt)},n.zipObjectDeep=function(e,t){return hr(e||[],t||[],Qn)},n.zipWith=xs,n.entries=dl,n.entriesIn=gl,n.extend=tl,n.extendWith=nl,Oo(n,n),n.add=Il,n.attempt=El,n.camelCase=ml,n.capitalize=bo,n.ceil=Ll,n.clamp=function(e,t,n){return n===W&&(n=t,t=W),n!==W&&(n=(n=uo(n))===n?n:0),t!==W&&(t=(t=uo(t))===t?t:0),Gt(uo(e),t,n)},n.clone=function(e){return Yt(e,K)},n.cloneDeep=function(e){return Yt(e,Y|K)},n.cloneDeepWith=function(e,t){return Yt(e,Y|K,t="function"==typeof t?t:W)},n.cloneWith=function(e,t){return Yt(e,K,t="function"==typeof t?t:W)},n.conformsTo=function(e,t){return null==t||Zt(e,t,go(t))},n.deburr=_o,n.defaultTo=function(e,t){return null==e||e!=e?t:e},n.divide=$l,n.endsWith=function(e,t,n){e=fo(e),t=ar(t);var r=e.length,i=n=n===W?r:Gt(so(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=Vi,n.escape=function(e){return(e=fo(e))&&rt.test(e)?e.replace(tt,wn):e},n.escapeRegExp=function(e){return(e=fo(e))&&pt.test(e)?e.replace(ft,"\\$&"):e},n.every=function(e,t,n){var r=Ws(e)?l:an;return n&&hi(e,t,n)&&(t=W),r(e,oi(t,3))},n.find=Os,n.findIndex=Si,n.findKey=function(e,t){return v(e,oi(t,3),pn)},n.findLast=As,n.findLastIndex=Ci,n.findLastKey=function(e,t){return v(e,oi(t,3),bn)},n.floor=Rl,n.forEach=Ri,n.forEachRight=Ui,n.forIn=function(e,t){return null==e?e:Wa(e,oi(t,3),mo)},n.forInRight=function(e,t){return null==e?e:Ha(e,oi(t,3),mo)},n.forOwn=function(e,t){return e&&pn(e,oi(t,3))},n.forOwnRight=function(e,t){return e&&bn(e,oi(t,3))},n.get=po,n.gt=Ms,n.gte=qs,n.has=function(e,t){return null!=e&&ui(e,t,Nn)},n.hasIn=ho,n.head=Fi,n.identity=ko,n.includes=function(e,t,n,r){e=Ji(e)?e:vo(e),n=n&&!r?so(n):0;var i=e.length;return n<0&&(n=ba(i+n,0)),ro(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&_(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:so(n);return i<0&&(i=ba(r+i,0)),_(e,t,i)},n.inRange=function(e,t,n){return t=ao(t),n===W?(n=t,t=0):n=ao(n),function(e,t,n){return e>=_a(t,n)&&e<ba(t,n)}(e=uo(e),t,n)},n.invoke=ul,n.isArguments=Bs,n.isArray=Ws,n.isArrayBuffer=Hs,n.isArrayLike=Ji,n.isArrayLikeObject=Gi,n.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Sn(e)==ke},n.isBuffer=Vs,n.isDate=Js,n.isElement=function(e){return eo(e)&&1===e.nodeType&&!no(e)},n.isEmpty=function(e){if(null==e)return!0;if(Ji(e)&&(Ws(e)||"string"==typeof e||"function"==typeof e.splice||Vs(e)||Ks(e)||Bs(e)))return!e.length;var t=es(e);if(t==Ne||t==Ie)return!e.size;if(mi(e))return!Rn(e).length;for(var n in e)if(Wo.call(e,n))return!1;return!0},n.isEqual=function(e,t){return Tn(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:W)?n(e,t):W;return r===W?Tn(e,t,W,n):!!r},n.isError=Yi,n.isFinite=function(e){return"number"==typeof e&&ma(e)},n.isFunction=Zi,n.isInteger=Ki,n.isLength=Xi,n.isMap=Gs,n.isMatch=function(e,t){return e===t||In(e,t,si(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:W,In(e,t,si(t),n)},n.isNaN=function(e){return to(e)&&e!=+e},n.isNative=function(e){if(ts(e))throw new Do("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ln(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=to,n.isObject=Qi,n.isObjectLike=eo,n.isPlainObject=no,n.isRegExp=Ys,n.isSafeInteger=function(e){return Ki(e)&&e>=-he&&e<=he},n.isSet=Zs,n.isString=ro,n.isSymbol=io,n.isTypedArray=Ks,n.isUndefined=function(e){return e===W},n.isWeakMap=function(e){return eo(e)&&es(e)==Ue},n.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==Sn(e)},n.join=function(e,t){return null==e?"":ya.call(e,t)},n.kebabCase=yl,n.last=ji,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==W&&(i=(i=so(n))<0?ba(r+i,0):_a(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):b(e,x,i,!0)},n.lowerCase=vl,n.lowerFirst=bl,n.lt=Xs,n.lte=Qs,n.max=function(e){return e&&e.length?ln(e,ko,Cn):W},n.maxBy=function(e,t){return e&&e.length?ln(e,oi(t,2),Cn):W},n.mean=function(e){return k(e,ko)},n.meanBy=function(e,t){return k(e,oi(t,2))},n.min=function(e){return e&&e.length?ln(e,ko,zn):W},n.minBy=function(e,t){return e&&e.length?ln(e,oi(t,2),zn):W},n.stubArray=Co,n.stubFalse=No,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=Ul,n.nth=function(e,t){return e&&e.length?Hn(e,so(t)):W},n.noConflict=function(){return sn._===this&&(sn._=Yo),this},n.noop=Ao,n.now=Ds,n.pad=function(e,t,n){e=fo(e);var r=(t=so(t))?M(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return qr(ha(i),n)+e+qr(pa(i),n)},n.padEnd=function(e,t,n){e=fo(e);var r=(t=so(t))?M(e):0;return t&&r<t?e+qr(t-r,n):e},n.padStart=function(e,t,n){e=fo(e);var r=(t=so(t))?M(e):0;return t&&r<t?qr(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xa(fo(e).replace(dt,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&hi(e,t,n)&&(t=n=W),n===W&&("boolean"==typeof t?(n=t,t=W):"boolean"==typeof e&&(n=e,e=W)),e===W&&t===W?(e=0,t=1):(e=ao(e),t===W?(t=e,e=0):t=ao(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ka();return _a(e+i*(t-e+nn("1e-"+((i+"").length-1))),t)}return Zn(e,t)},n.reduce=function(e,t,n){var r=Ws(e)?d:A,i=arguments.length<3;return r(e,oi(t,4),n,i,qa)},n.reduceRight=function(e,t,n){var r=Ws(e)?g:A,i=arguments.length<3;return r(e,oi(t,4),n,i,Ba)},n.repeat=function(e,t,n){return t=(n?hi(e,t,n):t===W)?1:so(t),Kn(fo(e),t)},n.replace=function(){var e=arguments,t=fo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=mr(t,e)).length;for(i||(i=1,e=W);++r<i;){var o=null==e?W:e[Ei(t[r])];o===W&&(r=i,o=n),e=Zi(o)?o.call(e):o}return e},n.round=zl,n.runInContext=e,n.sample=function(e){return(Ws(e)?Rt:function(e){return Rt(vo(e))})(e)},n.size=function(e){if(null==e)return 0;if(Ji(e))return ro(e)?M(e):e.length;var t=es(e);return t==Ne||t==Ie?e.size:Rn(e).length},n.snakeCase=_l,n.some=function(e,t,n){var r=Ws(e)?m:tr;return n&&hi(e,t,n)&&(t=W),r(e,oi(t,3))},n.sortedIndex=function(e,t){return nr(e,t)},n.sortedIndexBy=function(e,t,n){return rr(e,t,oi(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=nr(e,t);if(r<n&&Vi(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return nr(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return rr(e,t,oi(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=nr(e,t,!0)-1;if(Vi(e[n],t))return n}return-1},n.startCase=wl,n.startsWith=function(e,t,n){return e=fo(e),n=null==n?0:Gt(so(n),0,e.length),t=ar(t),e.slice(n,n+t.length)==t},n.subtract=Ml,n.sum=function(e){return e&&e.length?S(e,ko):0},n.sumBy=function(e,t){return e&&e.length?S(e,oi(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&hi(e,t,r)&&(t=W),e=fo(e),t=nl({},t,i,Zr);var o,a,s=nl({},t.imports,i.imports,Zr),l=go(s),u=F(s,l),c=0,f=t.interpolate||Nt,p="__p += '",h=Lo((t.escape||Nt).source+"|"+f.source+"|"+(f===at?wt:Nt).source+"|"+(t.evaluate||Nt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Xt+"]")+"\n";e.replace(h,function(t,n,r,i,s,l){return r||(r=i),p+=e.slice(c,l).replace(Ft,T),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),p+="';\n";var g=t.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(Ke,""):p).replace(Xe,"$1").replace(Qe,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=El(function(){return Po(l,d+"return "+p).apply(W,u)});if(m.source=p,Yi(m))throw m;return m},n.times=function(e,t){if((e=so(e))<1||e>he)return[];var n=me,r=_a(e,me);t=oi(t),e-=me;for(var i=C(r,t);++n<e;)t(n);return i},n.toFinite=ao,n.toInteger=so,n.toLength=lo,n.toLower=function(e){return fo(e).toLowerCase()},n.toNumber=uo,n.toSafeInteger=function(e){return e?Gt(so(e),-he,he):0===e?e:0},n.toString=fo,n.toUpper=function(e){return fo(e).toUpperCase()},n.trim=function(e,t,n){if((e=fo(e))&&(n||t===W))return e.replace(ht,"");if(!e||!(t=ar(t)))return e;var r=q(e),i=q(t);return yr(r,D(r,i),P(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=fo(e))&&(n||t===W))return e.replace(gt,"");if(!e||!(t=ar(t)))return e;var r=q(e);return yr(r,0,P(r,q(t))+1).join("")},n.trimStart=function(e,t,n){if((e=fo(e))&&(n||t===W))return e.replace(dt,"");if(!e||!(t=ar(t)))return e;var r=q(e);return yr(r,D(r,q(t))).join("")},n.truncate=function(e,t){var n=30,r="...";if(Qi(t)){var i="separator"in t?t.separator:i;n="length"in t?so(t.length):n,r="omission"in t?ar(t.omission):r}var o=(e=fo(e)).length;if(I(e)){var a=q(e);o=a.length}if(n>=o)return e;var s=n-M(r);if(s<1)return r;var l=a?yr(a,0,s).join(""):e.slice(0,s);if(i===W)return l+r;if(a&&(s+=l.length-s),Ys(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=Lo(i.source,fo(xt.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var f=u.index;l=l.slice(0,f===W?s:f)}}else if(e.indexOf(ar(i),s)!=s){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},n.unescape=function(e){return(e=fo(e))&&nt.test(e)?e.replace(et,xn):e},n.uniqueId=function(e){var t=++Ho;return fo(e)+t},n.upperCase=xl,n.upperFirst=kl,n.each=Ri,n.eachRight=Ui,n.first=Fi,Oo(n,function(){var e={};return pn(n,function(t,r){Wo.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.4",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){jt.prototype[e]=function(n){n=n===W?1:ba(so(n),0);var r=this.__filtered__&&!t?new jt(this):this.clone();return r.__filtered__?r.__takeCount__=_a(n,r.__takeCount__):r.__views__.push({size:_a(n,me),type:e+(r.__dir__<0?"Right":"")}),r},jt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;jt.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");jt.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");jt.prototype[e]=function(){return this.__filtered__?new jt(this):this[n](1)}}),jt.prototype.compact=function(){return this.filter(ko)},jt.prototype.find=function(e){return this.filter(e).head()},jt.prototype.findLast=function(e){return this.reverse().find(e)},jt.prototype.invokeMap=Xn(function(e,t){return"function"==typeof e?new jt(this):this.map(function(n){return Dn(n,e,t)})}),jt.prototype.reject=function(e){return this.filter(Hi(oi(e)))},jt.prototype.slice=function(e,t){e=so(e);var n=this;return n.__filtered__&&(e>0||t<0)?new jt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==W&&(n=(t=so(t))<0?n.dropRight(-t):n.take(t-e)),n)},jt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},jt.prototype.toArray=function(){return this.take(me)},pn(jt.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=n[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,l=t instanceof jt,u=s[0],c=l||Ws(t),f=function(e){var t=o.apply(n,h([e],s));return i&&p?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var p=this.__chain__,d=!!this.__actions__.length,g=a&&!p,m=l&&!d;if(!a&&c){t=m?t:new jt(this);var y=e.apply(t,s);return y.__actions__.push({func:$i,args:[f],thisArg:W}),new bt(y,p)}return g&&m?e.apply(this,s):(y=this.thru(f),g?i?y.value()[0]:y.value():y)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=Uo[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Ws(n)?n:[],e)}return this[r](function(n){return t.apply(Ws(n)?n:[],e)})}}),pn(jt.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(Da[i]||(Da[i]=[])).push({name:t,func:r})}}),Da[Rr(W,te).name]=[{name:"wrapper",func:W}],jt.prototype.clone=function(){var e=new jt(this.__wrapped__);return e.__actions__=Ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ar(this.__views__),e},jt.prototype.reverse=function(){if(this.__filtered__){var e=new jt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},jt.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ws(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_a(t,e+a);break;case"takeRight":e=ba(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=_a(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return fr(e,this.__actions__);var d=[];e:for(;l--&&p<h;){for(var g=-1,m=e[u+=t];++g<f;){var y=c[g],v=y.iteratee,b=y.type,_=v(m);if(2==b)m=_;else if(!_){if(1==b)continue e;break e}}d[p++]=m}return d},n.prototype.at=ks,n.prototype.chain=function(){return Li(this)},n.prototype.commit=function(){return new bt(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===W&&(this.__values__=oo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?W:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof O;){var r=Ai(n);r.__index__=0,r.__values__=W,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof jt){var t=e;return this.__actions__.length&&(t=new jt(this)),(t=t.reverse()).__actions__.push({func:$i,args:[Pi],thisArg:W}),new bt(t,this.__chain__)}return this.thru(Pi)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,aa&&(n.prototype[aa]=function(){return this}),n}();un?((un.exports=kn)._=kn,ln._=kn):sn._=kn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){(function(e){!function(e,n,r){n[e]=n[e]||function(){function e(e,t){p.add(e,t),f||(f=d(p.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,n,r){var i,o;try{!1===n?r.reject(e.msg):(i=!0===n?e.msg:n.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=t(i))?o.call(i,r.resolve,r.reject):r.resolve(i)}catch(e){r.reject(e)}}function i(r){var a,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(a=t(r))?e(function(){var e=new s(l);try{a.call(r,function(){i.apply(e,arguments)},function(){o.apply(e,arguments)})}catch(t){o.call(e,t)}}):(l.msg=r,l.state=1,l.chain.length>0&&e(n,l))}catch(e){o.call(new s(l),e)}}}function o(t){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=t,r.state=2,r.chain.length>0&&e(n,r))}function a(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then(function(e){n(i,e)},r)}(i)}function s(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new l(this);this.then=function(t,i){var o={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),r.chain.push(o),0!==r.state&&e(n,r),o.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){i.call(r,e)},function(e){o.call(r,e)})}catch(e){o.call(r,e)}}var c,f,p,h=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){c=function(e,t,n){return e[t]=n,e}}p=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,r;return{add:function(i,o){r=new e(i,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var e=t;for(t=n=f=void 0;e;)e.fn.call(e.self),e=e.next}}}();var g=c({},"constructor",u,!1);return u.prototype=g,c(g,"__NPO__",0,!1),c(u,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),c(u,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),c(u,"all",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),s=0;a(t,e,function(e,t){o[e]=t,++s===i&&n(o)},r)})}),c(u,"race",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");a(t,e,function(e,t){n(t)},r)})}),u}(),void 0!==t&&t.exports&&(t.exports=n[e])}("Promise",void 0!==e?e:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return(i?"/":"")+(n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"))||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===a(e,-1);return(e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var u=[];for(l=s;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:29}],26:[function(e,t,n){var r={file:e("./lib/loaders/file"),http:e("./lib/loaders/http"),https:e("./lib/loaders/http")},i="object"==typeof window||"function"==typeof importScripts?r.http:r.file;"undefined"==typeof Promise&&e("native-promise-only"),t.exports.load=function(e,t){var n=Promise.resolve();return void 0===t&&(t={}),(n=n.then(function(){if(void 0===e)throw new TypeError("location is required");if("string"!=typeof e)throw new TypeError("location must be a string");if(void 0!==t){if("object"!=typeof t)throw new TypeError("options must be an object");if(void 0!==t.processContent&&"function"!=typeof t.processContent)throw new TypeError("options.processContent must be a function")}})).then(function(){return new Promise(function(n,o){(function(e){var t=function(e){return void 0!==e&&(e=-1===e.indexOf("://")?"":e.split("://")[0]),e}(e),n=r[t];if(void 0===n){if(""!==t)throw new Error("Unsupported scheme: "+t);n=i}return n})(e).load(e,t||{},function(e,t){e?o(e):n(t)})})}).then(function(e){return t.processContent?new Promise(function(n,r){t.processContent("object"==typeof e?e:{text:e},function(e,t){e?r(e):n(t)})}):"object"==typeof e?e.text:e})}},{"./lib/loaders/file":27,"./lib/loaders/http":28,"native-promise-only":24}],27:[function(e,t,n){var r=new TypeError("The 'file' scheme is not supported in the browser");t.exports.getBase=function(){throw r},t.exports.load=function(){var e=arguments[arguments.length-1];if("function"!=typeof e)throw r;e(r)}},{}],28:[function(e,t,n){(function(n){var r=e("superagent"),i=["delete","get","head","patch","post","put"];t.exports.load=function(e,t,o){function a(e,t){e?o(e):("[object process]"===Object.prototype.toString.call(void 0!==n?n:0)&&"function"==typeof t.buffer&&t.buffer(!0),t.end(function(e,t){e?o(e):o(void 0,t)}))}var s,l,u=t.method?t.method.toLowerCase():"get";if(void 0!==t.method?"string"!=typeof t.method?s=new TypeError("options.method must be a string"):-1===i.indexOf(t.method)&&(s=new TypeError("options.method must be one of the following: "+i.slice(0,i.length-1).join(", ")+" or "+i[i.length-1])):void 0!==t.prepareRequest&&"function"!=typeof t.prepareRequest&&(s=new TypeError("options.prepareRequest must be a function")),s)o(s);else if(l=r["delete"===u?"del":u](e),t.prepareRequest)try{t.prepareRequest(l,a)}catch(e){o(e)}else a(void 0,l)}}).call(this,e("_process"))},{_process:29,superagent:35}],29:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(){g&&h&&(g=!1,h.length?d=h.concat(d):m=-1,d.length&&s())}function s(){if(!g){var e=o(a);g=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,g=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var h,d=[],g=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new l(e,t)),1!==d.length||g||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],30:[function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var f,p,h,d,g=e[c].replace(s,"%20"),m=g.indexOf(n);m>=0?(f=g.substr(0,m),p=g.substr(m+1)):(f=g,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),r(a,h)?i(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],31:[function(e,t,n){function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],32:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":30,"./encode":31}],33:[function(e,t,n){t.exports=function(e){var t=/^\\\\\?\\/.test(e),n=/[^\x00-\x80]+/.test(e);return t||n?e:e.replace(/\\/g,"/")}},{}],34:[function(e,t,n){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),r.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},t.exports=r},{}],35:[function(e,t,n){function r(){}function i(e){if(!d(e))return e;var t=[];for(var n in e)o(t,n,e[n]);return t.join("&")}function o(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(e,t,n)});else if(d(n))for(var r in n)o(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function a(e){for(var t,n,r={},i=e.split("&"),o=0,a=i.length;o<a;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function s(e){return/[\/+]json($|[^-\w])/.test(e)}function l(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,o=e.split(/\r?\n/),a={},s=0,l=o.length;s<l;++s)-1!==(t=(n=o[s]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=v(n.slice(t+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function u(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new l(n)}catch(r){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=r,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function c(e,t,n){var r=y("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var p=e("component-emitter"),h=e("./request-base"),d=e("./is-object"),g=e("./response-base"),m=e("./agent-base"),y=n=t.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=u,y.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var v="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};y.serializeObject=i,y.parseString=a,y.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},y.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},y.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},g(l.prototype),l.prototype._parseBody=function(e){var t=y.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&s(this.type)&&(t=y.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},l.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},y.Response=l,p(u.prototype),h(u.prototype),u.prototype.type=function(e){return this.set("Content-Type",y.types[e]||e),this},u.prototype.accept=function(e){return this.set("Accept",y.types[e]||e),this},u.prototype.auth=function(e,t,n){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"}),this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},u.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},u.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},u.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},u.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},u.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},u.prototype.buffer=u.prototype.ca=u.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},u.prototype.pipe=u.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},u.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},u.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||r,this._finalizeQueryString(),this._end()},u.prototype._end=function(){var e=this,t=this.xhr=y.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||y.serialize[i?i.split(";")[0]:""];!o&&s(i)&&(o=y.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},y.agent=function(){return new m},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){m.prototype[e.toLowerCase()]=function(t,n){var r=new y.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),m.prototype.del=m.prototype.delete,y.get=function(e,t,n){var r=y("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},y.head=function(e,t,n){var r=y("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},y.options=function(e,t,n){var r=y("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.del=c,y.delete=c,y.patch=function(e,t,n){var r=y("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.post=function(e,t,n){var r=y("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.put=function(e,t,n){var r=y("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},{"./agent-base":34,"./is-object":36,"./request-base":37,"./response-base":38,"component-emitter":2}],36:[function(e,t,n){t.exports=function(e){return null!==e&&"object"==typeof e}},{}],37:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=e("./is-object");t.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},r.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},r.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=i(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":36}],38:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=e("./utils");t.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var n=i.params(t);for(var r in n)this[r]=n[r];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},{"./utils":39}],39:[function(e,t,n){n.type=function(e){return e.split(/ *; */).shift()},n.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},n.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},n.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},{}],40:[function(e,t,n){!function(e,r){!function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r=t("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",l=e?"[\\uE000-\\uF8FF]":"[]",u=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",s),c=(n("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),n(n(i+"|"+t(u,o,"[\\:]"))+"*"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]")),f=n(c+"\\."+c+"\\."+c+"\\."+c),p=n(r+"{1,4}"),h=n(n(p+"\\:"+p)+"|"+f),d=n([n(n(p+"\\:")+"{6}"+h),n("\\:\\:"+n(p+"\\:")+"{5}"+h),n(n(p)+"?\\:\\:"+n(p+"\\:")+"{4}"+h),n(n(n(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+n(p+"\\:")+"{3}"+h),n(n(n(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+n(p+"\\:")+"{2}"+h),n(n(n(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+h),n(n(n(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+h),n(n(n(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),n(n(n(p+"\\:")+"{0,6}"+p)+"?\\:\\:")].join("|")),g=(n("\\["+n(d+"|"+n("[vV]"+r+"+\\."+t(u,o,"[\\:]")+"+"))+"\\]"),n(n(i+"|"+t(u,o))+"*"),n(i+"|"+t(u,o,"[\\:\\@]")));n(n(i+"|"+t(u,o,"[\\@]"))+"+"),n(n(g+"|"+t("[\\/\\?]",l))+"*");return{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV6ADDRESS:new RegExp("\\[?("+d+")\\]?","g")}}function a(e){throw new RangeError(E[e])}function s(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(k,".")).split("."),t).join(".")}function l(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}function u(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function c(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function f(e,t){function n(e){var n=c(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,u).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,u).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,u).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,u).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,u).replace(t.PCT_ENCODED,i)),e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?b:v;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(T);if(i){I?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=n.host.replace(r.IPV6ADDRESS,"$1")),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=P[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)f(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=D.toASCII(n.host.replace(r.PCT_ENCODED,c).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}f(n,v)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function h(e){for(var t=[];e.length;)if(e.match(L))e=e.replace(L,"");else if(e.match($))e=e.replace($,"/");else if(e.match(R))e=e.replace(R,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(U);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?b:v,r=[],i=P[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?D.toUnicode(e.host):D.toASCII(e.host.replace(n.PCT_ENCODED,c).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}f(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=function(e,t){var n=!1!==t.iri?b:v,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(String(e.host).replace(n.IPV6ADDRESS,"[$1]")),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0}(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var a=e.path;t.absolutePath||i&&i.absolutePath||(a=h(a)),void 0===o&&(a=a.replace(/^\/\//,"/%2F")),r.push(a)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=p(d(e,n),n),t=p(d(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=h(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=h(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=h(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=h(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function m(e,t){return e&&e.toString().replace(t&&t.iri?b.PCT_ENCODED:v.PCT_ENCODED,c)}function y(e){var t=c(e);return t.match(J)?t:e}var v=o(!1),b=o(!0),_=2147483647,w=/^xn--/,x=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=Math.floor,A=String.fromCharCode,S=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},C=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},N=function(e,t,n){var r=0;for(e=n?O(e/700):e>>1,e+=O(e/t);e>455;r+=36)e=O(e/35);return O(r+36*e/(e+38))},F=function(e){var t=[],n=e.length,r=0,i=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&a("not-basic"),t.push(e.charCodeAt(l));for(var u=s>0?s+1:0;u<n;){for(var c=r,f=1,p=36;;p+=36){u>=n&&a("invalid-input");var h=S(e.charCodeAt(u++));(h>=36||h>O((_-r)/f))&&a("overflow"),r+=h*f;var d=p<=o?1:p>=o+26?26:p-o;if(h<d)break;var g=36-d;f>O(_/g)&&a("overflow"),f*=g}var m=t.length+1;o=N(r-c,m,0==c),O(r/m)>_-i&&a("overflow"),i+=O(r/m),r%=m,t.splice(r++,0,i)}return String.fromCodePoint.apply(String,t)},j=function(e){var t=[],n=(e=l(e)).length,r=128,i=0,o=72,s=!0,u=!1,c=void 0;try{for(var f,p=e[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;h<128&&t.push(A(h))}}catch(e){u=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw c}}var d=t.length,g=d;for(d&&t.push("-");g<n;){var m=_,y=!0,v=!1,b=void 0;try{for(var w,x=e[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;k>=r&&k<m&&(m=k)}}catch(e){v=!0,b=e}finally{try{!y&&x.return&&x.return()}finally{if(v)throw b}}var E=g+1;m-r>O((_-i)/E)&&a("overflow"),i+=(m-r)*E,r=m;var S=!0,F=!1,j=void 0;try{for(var D,P=e[Symbol.iterator]();!(S=(D=P.next()).done);S=!0){var T=D.value;if(T<r&&++i>_&&a("overflow"),T==r){for(var I=i,L=36;;L+=36){var $=L<=o?1:L>=o+26?26:L-o;if(I<$)break;var R=I-$,U=36-$;t.push(A(C($+R%U,0))),I=O(R/U)}t.push(A(C(I,0))),o=N(i,E,g==d),i=0,++g}}}catch(e){F=!0,j=e}finally{try{!S&&P.return&&P.return()}finally{if(F)throw j}}++i,++r}return t.join("")},D={version:"2.1.0",ucs2:{decode:l,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))}},decode:F,encode:j,toASCII:function(e){return s(e,function(e){return x.test(e)?"xn--"+j(e):e})},toUnicode:function(e){return s(e,function(e){return w.test(e)?F(e.slice(4).toLowerCase()):e})}},P={},T=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[\dA-F:.]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1],L=/^\.\.?\//,$=/^\/\.(\/|$)/,R=/^\/\.\.(\/|$)/,U=/^\/?(?:.|\n)*?(?=\/|$)/,z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},M={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize},q={},B="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",W="[0-9A-Fa-f]",H=n(n("%[EFef][0-9A-Fa-f]%"+W+W+"%"+W+W)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+W+W)+"|"+n("%"+W+W)),V=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(B,"g"),G=new RegExp(H,"g"),Y=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',V),"g"),Z=new RegExp(t("[^]",B,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),K=Z,X={scheme:"mailto",parse:function(e,t){var n=e.to=e.path?e.path.split(","):[];if(e.path=void 0,e.query){for(var r=!1,i={},o=e.query.split("&"),a=0,s=o.length;a<s;++a){var l=o[a].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),c=0,f=u.length;c<f;++c)n.push(u[c]);break;case"subject":e.subject=m(l[1],t);break;case"body":e.body=m(l[1],t);break;default:r=!0,i[m(l[0],t)]=m(l[1],t)}}r&&(e.headers=i)}e.query=void 0;for(var p=0,h=n.length;p<h;++p){var d=n[p].split("@");if(d[0]=m(d[0]),t.unicodeSupport)d[1]=m(d[1],t).toLowerCase();else try{d[1]=D.toASCII(m(d[1],t).toLowerCase())}catch(t){e.error=e.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}n[p]=d.join("@")}return e},serialize:function(e,t){var n=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var r=0,o=n.length;r<o;++r){var a=String(n[r]),s=a.lastIndexOf("@"),l=a.slice(0,s).replace(G,y).replace(G,i).replace(Y,u),c=a.slice(s+1);try{c=t.iri?D.toUnicode(c):D.toASCII(m(c,t).toLowerCase())}catch(n){e.error=e.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}n[r]=l+"@"+c}e.path=n.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var p=[];for(var h in f)f[h]!==q[h]&&p.push(h.replace(G,y).replace(G,i).replace(Z,u)+"="+f[h].replace(G,y).replace(G,i).replace(K,u));return p.length&&(e.query=p.join("&")),e}},Q=new RegExp("^urn\\:((?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31}))$"),ee=/^([^\:]+)\:(.*)/,te=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,ne={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ee);if(n){var r="urn:"+n[1].toLowerCase(),i=P[r];i||(i=P[r]={scheme:r,parse:function(e,t){return e},serialize:P.urn.serialize}),e.scheme=r,e.path=n[2],e=i.parse(e,t)}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){var n=e.scheme||t.scheme;if(n&&"urn"!==n){var r=n.match(Q)||["urn:"+n,n];e.scheme="urn",e.path=r[1]+":"+(e.path?e.path.replace(te,u):"")}return e}},re=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ie={scheme:"urn:uuid",parse:function(e,t){return t.tolerant||e.path&&e.path.match(re)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e,t){return t.tolerant||e.path&&e.path.match(re)?e.path=(e.path||"").toLowerCase():e.scheme=void 0,P.urn.serialize(e,t)}};P.http=z,P.https=M,P.mailto=X,P.urn=ne,P["urn:uuid"]=ie,e.SCHEMES=P,e.pctEncChar=u,e.pctDecChars=c,e.parse=p,e.removeDotSegments=h,e.serialize=d,e.resolveComponents=g,e.resolve=function(e,t,n){return d(g(p(e,n),p(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=d(p(e,t),t):"object"===r(e)&&(e=p(d(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=d(p(e,n),n):"object"===r(e)&&(e=d(e,n)),"string"==typeof t?t=d(p(t,n),n):"object"===r(t)&&(t=d(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?b.ESCAPE:v.ESCAPE,u)},e.unescapeComponent=m,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:e.URI=e.URI||{})}(this)},{}]},{},[1])(1)});const q=function(e,t,n,r){let i;return n="string"==typeof n?[n]:n,e.some(e=>{const o=n.slice(0);let a=t["localization-strings"][e];for(;a&&o.length;)a=a[o.shift()];return i=r||"string"==typeof a?a:void 0}),i},B=async(e,t,n)=>{try{return(await JsonRefs.resolveRefsAt((n||(()=>window.location.href.replace(/(index\.html)?#.*$/,""))())+e+(t?"#/"+t:""),{loaderOptions:{processContent(e,t){t(void 0,JSON.parse(e.text||e.body.toString()))}}})).resolved}catch(e){throw e}},W=function({field:e,schemaItems:t,metadataObj:n,getFieldAliasOrName:r,lang:i}){const o=t.findIndex(t=>t.title===e),a=t[o],s={fieldName:r(e)},l=n.fields[e];let u=l&&l["fieldvalue-aliases"];return u&&(u.localeKey&&(u=q(i,n,u.localeKey.split("/"),!0)),s.rawFieldValueAliasMap=JSON.parse(JSON.stringify(u)),s.aliases=[],a.enum&&a.enum.length?a.enum.forEach(t=>{s.aliases.push(q(i,n,["fieldvalue",e,t],!0)),t in u&&"string"==typeof u[t]&&s.aliases.push(...u[t])}):Object.entries(u).forEach(([e,t])=>{Array.isArray(t)||(t=Object.values(t)),s.aliases.push(...t.filter(e=>t.every(t=>t===e||!t.toLowerCase().startsWith(e.toLowerCase()))).map(t=>t+" ("+e+")"))}),s.fieldValueAliasMap=JSON.parse(JSON.stringify(u))),s.fieldSchema=a,s.fieldSchemaIndex=o,s.preferAlias=l.prefer_alias,s.lang=l.lang,s},H=function({metadataObj:e,schemaItems:t,getFieldAliasOrName:n,lang:r,callback:i}){e.table.browse_fields.forEach((o,a)=>{"string"==typeof o&&(o={set:[o]}),o.name||(o.name=o.set.join(","));const s=o.name,l=o.set,{presort:u}=o,c=l.map(i=>W({lang:r,field:i,schemaItems:t,metadataObj:e,getFieldAliasOrName:n}));i({setName:s,browseFields:c,i:a,presort:u})})};class V{constructor({metadataObj:e}){this.metadataObj=e}getFieldLang(e){const{metadataObj:t}=this,n=t&&t.fields;return n&&n[e]&&n[e].lang}getFieldMatchesLocale({namespace:e,preferredLocale:t,schemaItems:n,pluginsForWork:r}){const{metadataObj:i}=this;return o=>{const a=z({namespace:e,preferredLocale:t});if(r.isPluginField({namespace:e,field:o})){let[,,n]=r.getPluginFieldParts({namespace:e,field:o});return"{locale}"===n&&(n=t),!n||a.includes(n)}const s=this.getFieldLang(o),l=i&&i["localization-strings"];return l&&Object.keys(l).some(e=>{const t=l[e]&&l[e].fieldvalue;return t&&t[o]})||s&&a.includes(s)||n.some(e=>e.title===o&&"string"!==e.type)}}}const J=e=>e.replace(/\^/g,"^^").replace(/-/g,"^0"),G=e=>e?e.replace(/(\^+)0/g,(e,t)=>t.length%2?t.slice(1)+"-":e).replace(/\^\^/g,"^"):e;class Y{constructor({pluginsInWork:e,pluginFieldMappings:t,pluginObjects:n}){this.pluginsInWork=e,this.pluginFieldMappings=t,this.pluginObjects=n}getPluginObject(e){const t=this.pluginsInWork.findIndex(([t])=>t===e);return this.pluginObjects[t]}iterateMappings(e){this.pluginFieldMappings.forEach(({placement:t,"applicable-fields":n},r)=>{const[i,{onByDefault:o,lang:a,meta:s}]=this.pluginsInWork[r],l=this.getPluginObject(i);e({plugin:l,placement:t,applicableFields:n,pluginName:i,pluginLang:a,onByDefaultDefault:o,meta:s})})}processTargetLanguages(e,t){return!!e&&(Object.entries(e).forEach(([e,{targetLanguage:n,onByDefault:r,meta:i}])=>{Array.isArray(n)?n.forEach(n=>{t({applicableField:e,targetLanguage:n,onByDefault:r,metaApplicableField:i})}):t({applicableField:e,targetLanguage:n,onByDefault:r,metaApplicableField:i})}),!0)}isPluginField({namespace:e,field:t}){return t.startsWith(`${e}-plugin-`)}getPluginFieldParts({namespace:e,field:t}){let n,r,i;return(t=t.replace(`${e}-plugin-`,"")).includes("-")?[n,r,i]=t.split("-"):n=t,[n,r,i].map(G)}}const Z=function(e,t,n){const r=(e.baseDirectory||"")+(t.baseDirectory||"")+"/",i=(e.schemaBaseDirectory||"")+(t.schemaBaseDirectory||"")+"/",o=(e.metadataBaseDirectory||"")+(t.metadataBaseDirectory||"")+"/";return{file:r+n.file.$ref,schemaFile:n.schemaFile?i+n.schemaFile:"",metadataFile:n.metadataFile?o+n.metadataFile:""}},K=async function({lang:e,fallbackLanguages:r,work:i,files:o,allowPlugins:a,basePath:s,languages:l,preferredLocale:u}){const c=await t(o),f=e=>c["localization-strings"][e],p=n({locales:e.map(f),fallbackLocales:r.map(f)}).getFormatter();let h;const d=c.groups.find(e=>(h=e.files.find(t=>i===p(["workNames",e.id,t.name])),Boolean(h))),g=c.groups.map(e=>({name:p({key:e.name.localeKey,fallback:!0}),workNames:e.files.map(t=>p(["workNames",e.id,t.name])),shortcuts:e.files.map(e=>e.shortcut)})),m=Z(c,d,h),{file:y}=m;let{schemaFile:v,metadataFile:b}=m,_="",w="";v||(v=y,_="schema"),b||(b=y,w="metadata");let x,k,E,O,A=[];if(a){const e=c["plugin-field-mapping"][d.id][h.name];e&&(E=Object.keys(e),A=(k=Object.entries(c.plugins).filter(([e])=>E.includes(e))).map(([t])=>e[t]),O=k.map(([,e])=>e.path),x=k)}const S=await B(b,w,s),C=function(t){const n=S.fields&&S.fields[t];let r,i;return n&&(i=n.alias),i?"string"==typeof i?r=i:(i=i.localeKey,r=q(e,S,i.split("/"))):"object"==typeof(r=n.name)&&(r=r.localeKey,r=q(e,S,r.split("/"))),r},N=A;"undefined"!=typeof process&&require("babel-polyfill");const[F,j]=await Promise.all([B(v,_,s),x?Promise.all(O.map(e=>"undefined"!=typeof process?(e=require("path").resolve(require("path").join(process.cwd(),"node_modules/textbrowser/server",e)),require("babel-register")({presets:["env"]}),Promise.resolve().then(()=>require(e)).catch(e=>{console.log("err",e)})):window.importer(e))):null]),D=new Y({pluginsInWork:k,pluginFieldMappings:N,pluginObjects:j}),P=F.items.items,T=P.map(({title:e})=>({field:e,fieldAliasOrName:C(e)||e})),I=new V({metadataObj:S});if(l&&D){console.log("pluginsForWork",D);const{lang:e}=this;D.iterateMappings(({plugin:t,pluginName:n,pluginLang:r,onByDefaultDefault:i,placement:o,applicableFields:a,meta:s})=>{const c=({applicableField:t,targetLanguage:a,onByDefault:c,metaApplicableField:f}={})=>{const h=D.getPluginObject(n)||{},d=I.getFieldLang(t);h.getTargetLanguage&&(a=h.getTargetLanguage({applicableField:t,targetLanguage:a,pluginLang:r,applicableFieldLang:d}));const g=(({pluginName:e,applicableField:t,targetLanguage:n})=>J(e)+(t?"-"+J(t):"-")+(n?"-"+J(n):""))({pluginName:n,applicableField:t,targetLanguage:a||r||d});"{locale}"===a&&(a=u);const m=q(e,S,["fieldnames",t]),y=h.getFieldAliasOrName?h.getFieldAliasOrName({locales:e,lf:p,targetLanguage:a,applicableField:t,applicableFieldI18N:m,meta:s,metaApplicableField:f,targetLanguageI18N:l.getLanguageFromCode(a)}):l.getFieldNameFromPluginNameAndLocales({pluginName:n,locales:e,lf:p,targetLanguage:a,applicableFieldI18N:m,meta:s,metaApplicableField:f});T.splice("end"===o?1/0:o,0,{field:`${this.namespace}-plugin-${g}`,fieldAliasOrName:y,onByDefault:"boolean"==typeof c?c:i||!1,applicableField:t,metaApplicableField:f,fieldLang:a})};D.processTargetLanguages(a,c)||c()})}return{fileData:h,lf:p,getFieldAliasOrName:C,metadataObj:S,schemaObj:F,schemaItems:P,fieldInfo:T,pluginsForWork:D,groupsToWorks:g,metadata:I}},X=(e,t)=>(e.userJSON=t.userJSON||"resources/user.json",e.languages=t.languages||new URL("../appdata/languages.json",new URL("node_modules/textbrowser/resources/index.js",location)).href,e.serviceWorkerPath=t.serviceWorkerPath||`sw.js?pathToUserJSON=${encodeURIComponent(e.userJSON)}`,e.files=t.files||"files.json",e.namespace=t.namespace||"textbrowser",e),Q=({r:e,logger:t})=>{e.addEventListener("updatefound",t=>{console.log("update found",t);const n=e.installing;n.addEventListener("statechange",async()=>{const{state:e}=n;switch(e){case"installing":console.log("Installing new worker");break;case"installed":console.log("Installation status",e),await U.alert("\nA new version of this offlinable app has been downloaded.\n\nIf you have work to complete in this tab, you can dismiss\nthis dialog now and continue working with the old version.\n\nHowever, when you are finished, you should close this tab\nand any other old tabs for this site in order to be able to\nbegin using the new version.\n");break;case"redundant":console.log("Installation status",e),await U.alert("\nThere was an error during installation (to allow offline/speeded\ncache use).\n\nIf you have work to complete in this tab, you can dismiss\nthis dialog now and continue working with the old version.\n\nHowever, when you are finished, you may wish to close this tab\nand any other old tabs for this site in order to try again\nfor offline installation.\n");break;case"activating":console.log("Activating new worker");break;case"activated":console.log("Activated new worker");break;default:throw new Error(`Unknown worker update state: ${e}`)}})})},ee=async({r:e,logger:t})=>new Promise(async(n,r)=>{navigator.serviceWorker.onmessage=(({data:n})=>{const{message:r,type:i,name:o,errorType:a}=n;switch(console.log("msg1",r,e),i){case"log":return void t.addLogEntry({text:r});case"beginInstall":return void t.addLogEntry({text:"Install: Begun..."});case"finishedInstall":return void t.addLogEntry({text:"Install: Finished..."});case"beginActivate":return t.addLogEntry({text:"Activate: Caching finished"}),void t.addLogEntry({text:"Activate: Begin database resources storage..."});case"finishedActivate":return t.addLogEntry({text:"Activate: Finished..."}),void location.reload();case"error":t.addLogEntry({text:r+`${"dbError"===a?`Database error ${o}`:""}; trying again...`})}});const i=e.installing||e.waiting||e.active;i&&"redundant"===i.state?(await U.alert('\nThere was likely an error installing. Click "ok" to try again.\n(Error code: Service worker is redundant)\n'),location.reload()):e.installing?console.log("INSTALLING"):e.waiting&&await U.alert("\nAn update is in progress. After finishing any work\nyou have in them, please close this and any other existing tabs\nrunning this web application and then open the site again.\nPlease note it may take some time to install and may not show\nany indication it is installing.\n",{ok:!1})}),te=async({serviceWorkerPath:e,logger:t})=>{let n;console.log("--ready to register service worker",e);try{n=await navigator.serviceWorker.register(e)}catch(e){return void await U.alert("\nThere was an error during registration (for offline ability).\nPlease refresh the page if you wish to reattempt.\n")}return t.addLogEntry({text:"Worker registration: Complete"}),ee({r:n,logger:t})},ne=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/,"&gt;"):"",re=/^(?:submit|button|image|reset|file)$/i,ie=/^(?:input|select|textarea|keygen)/i,oe=/(\[[^[\]]*\])/g;function ae(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);let n=t.hash?{}:"";const r=t.serializer||(t.hash?se:le),i=e&&e.elements?[...e.elements]:[],o=Object.create(null);return i.forEach(e=>{if(!t.disabled&&e.disabled||!e.name)return;if(!ie.test(e.nodeName)||re.test(e.type))return;const{name:i,type:a,name:s,checked:l}=e;let{value:u}=e;if("checkbox"!==a&&"radio"!==a||l||(u=void 0),t.empty){if("checkbox"!==a||l||(u=""),"radio"===a&&(o[s]||l?l&&(o[s]=!0):o[s]=!1,void 0===u))return}else if(!u)return;if("select-multiple"===a){u=[];let o=!1;return[...e.options].forEach(e=>{const a=t.empty&&!e.value,s=e.value||a;e.selected&&s&&(o=!0,n=t.hash&&"[]"!==i.slice(i.length-2)?r(n,i+"[]",e.value):r(n,i,e.value))}),void(!o&&t.empty&&(n=r(n,i,"")))}n=r(n,i,u)}),t.empty&&Object.entries(o).forEach(([e,t])=>{t||(n=r(n,e,""))}),n}function se(e,t,n){if(t.match(oe)){!function e(t,n,r){if(0===n.length)return r;const i=n.shift(),o=i.match(/^\[(.+?)\]$/);if("[]"===i)return t=t||[],Array.isArray(t)?t.push(e(null,n,r)):(t._values=t._values||[],t._values.push(e(null,n,r))),t;if(o){const i=o[1],a=+i;isNaN(a)?(t=t||{})[i]=e(t[i],n,r):(t=t||[])[a]=e(t[a],n,r)}else t[i]=e(t[i],n,r);return t}(e,function(e){const t=[],n=new RegExp(oe);let r=/^([^[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}(t),n)}else{const r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function le(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}function ue(e,t){Object.entries(t).forEach(([t,n])=>{let r=e[t];e[t]||"length"in(r=e[t+"[]"])||(r=e.querySelectorAll(`[name="${t}[]"]`));const{type:i}=r;if("checkbox"===i&&(r.checked=""!==n),Array.isArray(n)){if("select-multiple"===i)return void[...r.options].forEach(e=>{n.includes(e.value)&&(e.selected=!0)});n.forEach((e,t)=>{const n=r[t];if("checkbox"!==n.type)n.value=e;else{const t=n.value===e||"on"===e;n.checked=t}})}else r.value=n})}var ce={main({langs:e,languages:t,followParams:n,$p:r}){N("form",{class:"focus",id:"languageSelectionContainer",$on:{submit(e){e.preventDefault()}}},[["select",{name:"lang",size:e.length,$on:{click({target:{parentNode:{selectedOptions:e}}}){n("#languageSelectionContainer",()=>{r.set("lang",e[0].value,!0)})}}},e.map(({code:e})=>["option",{value:e},[t.getLanguageFromCode(e)]])]],D),history.state&&"object"==typeof history.state&&ue(document.querySelector("#languageSelectionContainer"),history.state)}},fe=({groups:e,lf:t,getNextAlias:n,$p:r,followParams:i})=>{const o=N("form",{id:"workSelect",class:"focus",$on:{submit(e){e.preventDefault()}}},e.map((e,o)=>["div",[o>0?["br","br","br"]:"",["div",[t({key:e.directions.localeKey,fallback:!0})]],["br"],["select",{class:"file",name:"work"+o,dataset:{name:e.name.localeKey},$on:{change({target:{value:e}}){i("#workSelect",()=>{r.set("work",e)})}}},[["option",{value:""},["--"]],...e.files.map(({name:r})=>["option",{value:t(["workNames",e.id,r])},[n()]])]]]]),D);return history.state&&"object"==typeof history.state&&ue(document.querySelector("#workSelect"),history.state),o};const pe=["aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"],he=["Helvetica, sans-serif","Verdana, sans-serif","Gill Sans, sans-serif","Avantgarde, sans-serif","Helvetica Narrow, sans-serif","sans-serif","Times, serif","Times New Roman, serif","Palatino, serif","Bookman, serif","New Century Schoolbook, serif","serif","Andale Mono, monospace","Courier New, monospace","Courier, monospace","Lucidatypewriter, monospace","Fixed, monospace","monospace","Comic Sans, Comic Sans MS, cursive","Zapf Chancery, cursive","Coronetscript, cursive","Florence, cursive","Parkavenue, cursive","cursive","Impact, fantasy","Arnoldboecklin, fantasy","Oldtown, fantasy","Blippo, fantasy","Brushstroke, fantasy","fantasy"],de=P.repeat(2),ge=P.repeat(3),me=()=>({form:h("form#browse"),random:h("#rand")||{},checkboxes:d("input[type=checkbox]")});const ye={languageSelect:ce,workSelect:fe,workDisplay:Ee={bdo:({fallbackDirection:e,message:t})=>["div",{style:"display: inline; direction: "+e},[t]],columnsTable:({ld:e,fieldInfo:t,$p:n,le:r,iil:i,l:o,metadataObj:a,preferredLocale:s,schemaItems:l,fieldMatchesLocale:u})=>["table",{border:"1",cellpadding:"5",align:"center"},[["tr",[["th",[e("fieldno")]],["th",{align:"left",width:"20"},[e("field_enabled")]],["th",[e("field_title")]],["th",[e("fieldinterlin")]],["th",[e("fieldcss")]]]],...t.map((e,a)=>{const s=a+1,l="checked"+s,u="field"+s,c=n.get(u);return["tr",[["td",[String(s)]],r("check-columns-to-browse","td","title",{},[r("yes","input","value",{class:"fieldSelector",id:l,name:i("checked")+s,checked:n.get(l)!==o("no")&&(n.has(l)||!1!==e.onByDefault),type:"checkbox"})]),r("check-sequence","td","title",{},[["select",{name:i("field")+s,id:u,size:"1"},t.map(({field:e,fieldAliasOrName:t},r)=>{return["option",{dataset:{name:e},value:t,selected:c&&c===t||r===a&&!n.has(u)},[t]]})]]),["td",[r("interlinear-tips","input","title",{name:i("interlin")+s,value:n.get("interlin"+s)})]],["td",[["input",{name:i("css")+s,value:n.get("css"+s)}]]]]]}),["tr",[["td",{colspan:3},[r("check_all","input","value",{type:"button",$on:{click(){d(".fieldSelector").forEach(e=>{e.checked=!0})}}}),r("uncheck_all","input","value",{type:"button",$on:{click(){d(".fieldSelector").forEach(e=>{e.checked=!1})}}}),r("checkmark_locale_fields_only","input","value",{type:"button",$on:{click(){t.forEach(({field:e},t)=>{const n=t+1,r=h("#field"+n).selectedOptions[0].dataset.name;h("#checked"+n).checked=u(r)})}}})]]]]]],advancedFormatting:({ld:e,il:t,l:n,lo:r,le:i,$p:o,hideFormattingSection:a})=>["td",{id:"advancedformatting",style:{display:a?"none":"block"}},[["h3",[e("advancedformatting")]],["label",[e("textcolor"),de,["select",{name:t("colorName")},pe.map((e,t)=>{const i={value:n(["param_values","colors",e])};return(o.get("colorName")===n(["param_values","colors",e])||1===t&&!o.has("colorName"))&&(i.selected="selected"),r(["param_values","colors",e],i)})]]],["label",[P,e("or_entercolor"),de,["input",{name:t("color"),type:"text",value:o.get("color")||"#",size:"7",maxlength:"7"}]]],["br"],["br"],["label",[e("backgroundcolor"),de,["select",{name:t("bgcolorName")},pe.map((e,t)=>{const i={value:n(["param_values","colors",e])};return(o.get("bgcolorName")===n(["param_values","colors",e])||14===t&&!o.has("bgcolorName"))&&(i.selected="selected"),r(["param_values","colors",e],i)})]]],["label",[P,e("or_entercolor"),de,["input",{name:t("bgcolor"),type:"text",value:o.get("bgcolor")||"#",size:"7",maxlength:"7"}]]],["br"],["br"],["label",[e("text_font"),de,["select",{name:t("fontSeq"),dir:"ltr"},he.map((e,t)=>{const n={value:e};return(o.get("fontSeq")===e||7===t&&!o.has("fontSeq"))&&(n.selected="selected"),["option",n,[e]]})]]],["br"],["br"],["label",[e("font_style"),de,["select",{name:t("fontstyle")},["italic","normal","oblique"].map((e,t)=>{const i={value:n(["param_values","fontstyle",e])};return(o.get("fontstyle")===n(["param_values","fontstyle",e])||1===t&&!o.has("fontstyle"))&&(i.selected="selected"),r(["param_values","fontstyle",e],i)})]]],["br"],["div",[e("font_variant"),ge,["label",[["input",{name:t("fontvariant"),type:"radio",value:n(["param_values","fontvariant","normal"]),checked:o.get("fontvariant")!==e(["param_values","fontvariant","small-caps"])}],e(["param_values","fontvariant","normal"]),P]],["label",[["input",{name:t("fontvariant"),type:"radio",value:n(["param_values","fontvariant","small-caps"]),checked:o.get("fontvariant")===e(["param_values","fontvariant","small-caps"])}],e(["param_values","fontvariant","small-caps"]),P]]]],["br"],["label",[e("font_weight")," (normal, bold, 100-900, etc.):",de,["input",{name:t("fontweight"),type:"text",value:o.has("fontweight")?o.get("fontweight"):"normal",size:"7",maxlength:"12"}]]],["br"],["label",[e("font_size")," (14pt, 14px, small, 75%, etc.):",de,["input",{name:t("fontsize"),type:"text",value:o.get("fontsize"),size:"7",maxlength:"12"}]]],["br"],["label",{dir:"ltr"},[e("font_stretch"),P,["select",{name:t("fontstretch")},["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"].map(t=>{const n={value:e(["param_values","font-stretch",t])};return(o.get("fontstretch")===t||!o.has("fontstretch")&&"normal"===t)&&(n.selected="selected"),["option",n,[e(["param_values","font-stretch",t])]]})]]],["br"],["br"],["label",[e("letter_spacing")," (normal, .9em, -.05cm): ",["input",{name:t("letterspacing"),type:"text",value:o.has("letterspacing")?o.get("letterspacing"):"normal",size:"7",maxlength:"12"}]]],["br"],["label",[e("line_height")," (normal, 1.5, 22px, 150%): ",["input",{name:t("lineheight"),type:"text",value:o.has("lineheight")?o.get("lineheight"):"normal",size:"7",maxlength:"12"}]]],["br"],["br"],i("tableformatting_tips","h3","title",{},[e("tableformatting")]),["div",[e("header_wstyles"),de,...[["yes",e(["param_values","y"])],["no",e(["param_values","n"])],["none",e(["param_values","0"])]].map(([n,r],i,a)=>["label",[["input",{name:t("header"),type:"radio",value:r,checked:o.get("header")===r||!o.has("header")&&1===i}],e(n),i===a.length-1?"":ge]])]],["div",[e("footer_wstyles"),de,...[["yes",e(["param_values","y"])],["no",e(["param_values","n"])],["none",e(["param_values","0"])]].map(([n,r],i,a)=>["label",[["input",{name:t("footer"),type:"radio",value:r,checked:o.get("footer")===r||!o.has("footer")&&2===i}],e(n),i===a.length-1?"":ge]])]],["label",[["input",{name:t("headerfooterfixed"),type:"checkbox",value:n("yes"),checked:o.get("headerfooterfixed")===n("yes")}],de,e("headerfooterfixed-wishtoscroll")]],["br"],["div",[e("caption_wstyles"),de,...[["yes",e(["param_values","y"])],["no",e(["param_values","n"])],["none",e(["param_values","0"])]].map(([n,r],i,a)=>["label",[["input",{name:t("caption"),type:"radio",value:r,checked:o.get("caption")===r||!o.has("caption")&&2===i}],e(n),i===a.length-1?"":ge]])]],["br"],["div",[e("table_wborder"),de,["label",[["input",{name:t("border"),type:"radio",value:"1",checked:"0"!==o.get("border")}],e("yes"),ge]],["label",[["input",{name:t("border"),type:"radio",value:"0",checked:"0"===o.get("border")}],e("no")]]]],["div",[e("interlin_repeat_field_names"),de,["label",[["input",{name:t("interlintitle"),type:"radio",value:"1",checked:"0"!==o.get("interlintitle")}],e("yes"),ge]],["label",[["input",{name:t("interlintitle"),type:"radio",value:"0",checked:"0"===o.get("interlintitle")}],e("no")]]]],["label",[e("interlintitle_css"),de,["input",{name:t("interlintitle_css"),type:"text",value:o.get("interlintitle_css")||"",size:"12"}]]],["br"],["br"],i("pageformatting_tips","h3","title",{},[e("pageformatting")]),["label",[e("page_css"),de,["textarea",{name:t("pagecss"),title:n("page_css_tips"),value:o.get("pagecss")}]]],["br"],i("outputmode_tips","label","title",{},[e("outputmode"),de,["select",{name:t("outputmode")},["table","div"].map(e=>{const t={value:e};return o.get("outputmode")===e&&(t.selected="selected"),r(["param_values","outputmode",e],t)})]])]],addRandomFormFields:({il:e,ld:t,l:n,le:r,$p:i,serializeParamsAsURL:o,content:a})=>{[[["td",{colspan:12,align:"center"},[["br"],t("or"),["br"],["br"]]]],[["td",{colspan:12,align:"center"},[["label",[t("rnd"),ge,["input",{id:"rand",name:e("rand"),type:"checkbox",value:n("yes"),checked:i.get("rand")===n("yes")}]]],ge,["label",[t("verses-context"),P,["input",{name:e("context"),type:"number",min:1,size:4,value:i.get("context")}]]],ge,r("view-random-URL","input","value",{type:"button",$on:{click(){const e=o(I({},me(),{type:"randomResult"}));h("#randomURL").value=e}}}),["input",{id:"randomURL",type:"text"}]]]]].forEach(e=>{e&&e.length&&a.push(["tr",e])})},getPreferences:({languageParam:e,lf:t,paramsSetter:n,replaceHash:r,getFieldAliasOrNames:i,work:o,langs:a,imfl:s,l:l,localizeParamNames:u,namespace:c,hideFormattingSection:f,groups:p})=>["div",{style:{textAlign:"left"},id:"preferences",hidden:"true"},[["div",{style:"margin-top: 10px;"},[["label",[l("localizeParamNames"),["input",{id:"localizeParamNames",type:"checkbox",checked:u,$on:{change({target:{checked:e}}){localStorage.setItem(c+"-localizeParamNames",e)}}}]]]]],["div",[["label",[l("Hide formatting section"),["input",{id:"hideFormattingSection",type:"checkbox",checked:f,$on:{change({target:{checked:e}}){h("#advancedformatting").style.display=e?"none":"block",localStorage.setItem(c+"-hideFormattingSection",e)}}}]]]]],["div",[["label",{for:"prefLangs"},[l("Preferred language(s)")]],["br"],["select",{id:"prefLangs",multiple:"multiple",size:a.length,$on:{change({target:{selectedOptions:e}}){localStorage.setItem(c+"-langCodes",JSON.stringify(Array.from(e).map(e=>e.value)))}}},a.map(e=>{let t=localStorage.getItem(c+"-langCodes");t=t&&JSON.parse(t);const n={value:e.code};return t&&t.includes(e.code)&&(n.selected="selected"),["option",n,[s(["languages",e.code])]]})]]],["div",[["button",{title:l("bookmark_generation_tooltip"),$on:{async click(){const e=(new Date).getTime(),t=e,a=e,s=new Blob([(new XMLSerializer).serializeToString(N({$document:{$DOCTYPE:{name:"NETSCAPE-Bookmark-file-1"},title:l("Bookmarks"),body:[["h1",[l("Bookmarks_Menu")]],...(await i()).flatMap(({groupName:e,worksToFields:i})=>[["dt",[["h3",{ADD_DATE:t,LAST_MODIFIED:a},[e]]]],["dl",[["p"],...i.map(({fieldAliasOrNames:e,workName:i,shortcut:s})=>{const l=n(I({},me(),{fieldAliasOrNames:e,workName:o,type:"shortcutResult"}));return["dt",[["a",{href:r(l)+`&work=${i}&${i}-startEnd1=%s`,ADD_DATE:t,LAST_MODIFIED:a,SHORTCUTURL:s},[i]]]]})]]])]}})).replace(/<dt>/g,"\n<dt>")],{type:"text/html"}),u=window.URL.createObjectURL(s);N("a",{hidden:!0,download:"bookmarks.html",href:u},D).click(),URL.revokeObjectURL(u)}}},[l("Generate_bookmarks")]]]]]],addBrowseFields:({browseFields:e,fieldInfo:t,ld:n,i:r,iil:i,$p:o,content:a})=>{const s=o.get("work");[r>0?[["td",{colspan:12,align:"center"},[["br"],n("or"),["br"],["br"]]]]:"",[...(()=>{const t=t=>e.reduce((e,{fieldName:n,aliases:a,fieldSchema:{minimum:l,maximum:u}},c)=>{const f=s+"-"+i(t)+(r+1)+"-"+(c+1),p=f;return e["#"].push(["td",[["label",{for:f},[n]]]],["td",[a?["datalist",{id:"dl-"+p},a.map(e=>["option",[e]])]:"",a?["input",{name:f,id:p,class:"browseField",list:"dl-"+p,value:o.get(f,!0),$on:"start"===t?{change(e){d("input.browseField").forEach(t=>{t.id.includes(r+1+"-"+(c+1))&&(t.value=e.target.value)})}}:void 0}]:["input",{name:f,id:p,type:"number",min:l,max:u,value:o.get(f,!0)}],ge]]),e},{"#":[]});return[t("start"),["td",[["b",[n("to")]],ge]],t("end")]})(),["td",[e.length>1?n("versesendingdataoptional"):""]]],[["td",{colspan:4*e.length+2+1,align:"center"},[["table",[["tr",[e.reduce((e,{fieldName:t,aliases:n,fieldSchema:{minimum:a,maximum:l}},u)=>{const c=s+"-"+i("anchor")+(r+1)+"-"+(u+1),f=c;return e["#"].push(["td",[["label",{for:c},[t]]]],["td",[n?["datalist",{id:"dl-"+f},n.map(e=>["option",[e]])]:"",n?["input",{name:c,id:f,class:"browseField",list:"dl-"+f,value:o.get(c,!0)}]:["input",{name:c,id:f,type:"number",min:a,max:l,value:o.get(c,!0)}],de]]),e},{"#":[["td",{style:"font-weight: bold; vertical-align: bottom;"},[n("anchored-at")+ge]]]}),["td",[["label",[n("field")+de,["select",{name:i("anchorfield")+(r+1),size:"1"},t.map(({fieldAliasOrName:e})=>{return o.get(i("anchorfield")+(r+1),!0)===e?["option",{selected:!0},[e]]:["option",[e]]})]]]]]]]]]]]]].forEach(e=>{e&&e.length&&a.push(["tr",e])})},main:({lf:e,languageParam:t,l:n,namespace:r,heading:i,fallbackDirection:o,imfl:a,langs:s,fieldInfo:l,localizeParamNames:u,serializeParamsAsURL:c,paramsSetter:f,replaceHash:p,getFieldAliasOrNames:d,hideFormattingSection:g,$p:m,metadataObj:y,il:v,le:b,ld:_,iil:w,fieldMatchesLocale:x,preferredLocale:k,schemaItems:E,content:O,groups:A})=>{const S=m.get("work"),C=({type:e})=>c(I({},me(),{type:e}));N("div",{class:"focus"},[["div",{style:"float: left;"},[["button",{$on:{click(){const e=h("#preferences");e.hidden=!e.hidden}}},[n("Preferences")]],ye.workDisplay.getPreferences({languageParam:t,lf:e,paramsSetter:f,replaceHash:p,getFieldAliasOrNames:d,work:S,langs:s,imfl:a,l:n,localizeParamNames:u,namespace:r,groups:A,hideFormattingSection:g})]],["h2",[i]],["br"],["form",{id:"browse",$custom:{$submit(){const e=C({type:"saveSettings"}).replace(/^[^#]*#/,"");console.log("history thisParams",e),history.replaceState(e,document.title,location.href);const t=C({type:"result"});location.href=t}},$on:{keydown({key:e,target:t}){"Enter"===e&&"textarea"!==t.localName.toLowerCase()&&this.$submit()},submit(e){e.preventDefault(),this.$submit()}},name:v("browse")},[["table",{align:"center"},O],["br"],["div",{style:"margin-left: 20px"},[["br"],["br"],["table",{border:"1",align:"center",cellpadding:"5"},[["tr",{valign:"top"},[["td",[ye.workDisplay.columnsTable({ld:_,fieldInfo:l,$p:m,le:b,iil:w,l:n,metadataObj:y,preferredLocale:k,schemaItems:E,fieldMatchesLocale:x}),b("save-settings-URL","input","value",{type:"button",$on:{click(){const e=C({type:"saveSettings"});h("#settings-URL").value=e}}}),["input",{id:"settings-URL"}],["br"],["button",{$on:{async click(e){e.preventDefault();const t=f(I({},me(),{workName:S,type:"startEndResult"})),n=p(t)+`&work=${S}&${S}-startEnd1=%s`;try{await navigator.clipboard.writeText(n)}catch(e){}}}},[n("Copy_shortcut_URL")]]]],ye.workDisplay.advancedFormatting({ld:_,il:v,l:n,lo:(e,t)=>["option",t,[n({key:e,fallback:({message:e})=>(t.dir=o,e)})]],le:b,$p:m,hideFormattingSection:g})]]]]]],["p",{align:"center"},[b("submitgo","input","value",{type:"submit"})]]]]],D)}},resultsDisplayServerOrClient:{caption:({heading:e,ranges:t})=>e+" "+t,startSeparator:({l:e})=>e("colon"),innerBrowseFieldSeparator:({l:e})=>e("comma-space"),ranges:({l:e,startRange:t,endVals:n,rangeNames:r})=>t+"-"+n.join(ye.resultsDisplayServerOrClient.startSeparator({l:e}))+" ("+r+")",fieldValueAlias:({key:e,value:t})=>t+" ("+e+")",interlinearSegment:({lang:e,dir:t,html:n})=>`<span${e?` lang="${e}"`:""}${t?` dir="${t}"`:""}>${n}</span>`,interlinearTitle:({l:e,val:t})=>`<span class="interlintitle">${t}</span>${e("colon-space")}`,styles({$p:e,$pRaw:t,$pRawEsc:n,$pEscArbitrary:r,escapeQuotedCSS:i,escapeCSS:o,tableWithFixedHeaderAndFooter:a,checkedFieldIndexes:s,hasCaption:l}){const u=e.has("color",!0)&&"#"!==e.get("color",!0)?r("color"):r("colorName"),c=e.has("bgcolor",!0)&&"#"!==e.get("bgcolor",!0)?r("bgcolor"):r("bgcolorName"),f=1+(0+(l?2:0)),p=f+1+"em",h=`100% - ${p} - 2em - 0.5em`,d=`calc(${h})`,g=`calc(${h} + 0.5em)`;return["style",[("y"===t("caption")?a?".caption div.inner-caption, ":".caption, ":"")+("y"===t("header")?a?"":".thead .th, ":"")+("y"===t("footer")?a?"":".tfoot .th, ":"")+".tbody td"+` {\n    vertical-align: top;\n    font-style: ${n("fontstyle")};\n    font-variant: ${n("fontvariant")};\n    font-weight: ${r("fontweight")};\n    ${r("fontsize")?`font-size: ${r("fontsize")};`:""}\n    font-family: ${r("fontSeq")};\n\n    font-stretch: ${r("fontstretch")};\n    letter-spacing: ${r("letterspacing")};\n    line-height: ${r("lineheight")};\n    ${u?`color: ${o(u)} !important;`:""}\n    ${c?`background-color: ${o(c)} !important;`:""}\n}\n${o(r("pagecss")||"")}\n`+(a?`\nhtml, body, body > div {\n    height: 100%; /* Needed to ensure descendent heights retain 100%; could be avoided if didn't want percent on table height */\n    overflow-y: hidden; /* Not sure why we're getting extra here, but... */\n}\n.anchor-table-header {\n    background-color: ${c||"white"}; /* Header background (not just for div text inside header, but for whole header area) */\n    overflow-x: hidden; /* Not sure why we're getting extra here, but... */\n    position: relative; /* Ensures we are still flowing, but provides anchor for absolutely positioned thead below (absolute positioning positions relative to nearest non-static ancestor; clear demo at https://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=fixed ) */\n    padding-top: ${p}; /* Provides space for the header (and caption) (the one that is absolutely positioned below relative to here) */\n    height: 100%; /* Percent of the whole screen taken by the table */\n}\n.anchor-table-body {\n    overflow-y: auto; /* Provides scrollbars when text fills up beyond the height */\n    height: ${d}; /* If < 100%, the header anchor background color will seep below table */\n}\n\n.caption, .thead .th, .tfoot .th {\n    line-height: 0; /* th div will have own line-height; reducing here avoids fattening it by an inner div */\n    color: transparent; /* Hides the non-div duplicated header text */\n    white-space: nowrap; /* Ensures column header text uses up full width without overlap (esp. wrap no longer seems to work); this must be applied outside of the div */\n    border: none; /* We don't want a border for this invisible section */\n}\ndiv.inner-caption, .thead .th div.th-inner, .tfoot .th div.th-inner { /* divs are used as th is supposedly problematic */\n    position: absolute; /* Puts relative to nearest non-static ancestor (our relative header anchor) */\n    color: initial; /* Header must have an explicit color or it will get transparent container color */\n    line-height: normal; /* Revert ancestor line height of 0 */\n}\n.thead .th div.th-inner {\n    top: ${f}em; /* Ensures our header stays fixed at top outside of normal flow of table */\n}\ndiv.inner-caption {\n    top: 1em;\n}\n.tfoot .th div.th-inner { /* divs are used as th is supposedly problematic */\n    top: ${g}; /* Ensures our header stays fixed at top outside of normal flow of table */\n}\n.zupa div.zupa1 {\n    margin: 0 auto !important;\n    width: 0 !important;\n}\n.zupa div.th-inner, .zupa div.inner-caption {\n    width: 100%;\n    margin-left: -50%;\n    text-align: center;\n}\n`:"")+s.map((e,n)=>("y"===t("header")?a?`.thead .th:nth-child(${n+1}) div.th-inner, `:`.thead .th:nth-child(${n+1}), `:"")+("y"===t("footer")?a?`.tfoot .th:nth-child(${n+1}) div.th-inner, `:`.tfoot .th:nth-child(${n+1}), `:"")+`.tbody td:nth-child(${n+1}) `+`{\n    ${r("css"+(n+1))}\n}\n`).join("")+(r("interlintitle_css")?`\n/* http://salzerdesign.com/test/fixedTable.html */\n.interlintitle {\n    ${o(r("interlintitle_css"))}\n}\n`:"")+(c?`\nbody {\n    background-color: ${c};\n}\n`:"")]]},main({tableData:e,$p:t,$pRaw:n,$pRawEsc:r,$pEscArbitrary:i,escapeQuotedCSS:o,escapeCSS:a,escapeHTML:s,l:l,localizedFieldNames:u,fieldLangs:c,fieldDirs:f,caption:p,hasCaption:h,showInterlinTitles:d,determineEnd:g,getCanonicalID:m,canonicalBrowseFieldSetName:y,getCellValue:v,checkedAndInterlinearFieldInfo:b,interlinearSeparator:_="<br /><br />"}){const w={table:[["table",{class:"table",border:n("border")||"0"}],["tr",{class:"tr"}],["td"],["th",{class:"th"}],["caption",{class:"caption"}],["thead",{class:"thead"}],["tbody",{class:"tbody"}],["tfoot",{class:"tfoot"}]],div:[["div",{class:"table",style:"display: table;"}],["div",{class:"tr",style:"display: table-row;"}],["div",{class:"td",style:"display: table-cell;"}],["div",{class:"th",style:"display: table-cell;"}],["div",{class:"caption",style:"display: table-caption;"}],["div",{class:"thead",style:"display: table-header-group;"}],["div",{class:"tbody",style:"display: table-row-group;"}],["div",{class:"tfoot",style:"display: table-footer-group;"}]],"json-array":"json","json-object":"json"},x=t.get("outputmode",!0),k=w[Object.keys(w).includes(x)?x:"table"];if("json"===k)throw new Error("JSON support is currently not available");const[E,O,A,S,C,N,F,j]=k,[D,P,T]=b,I="yes"===n("headerfooterfixed"),L=(e,t)=>((e=JSON.parse(JSON.stringify(e))).push(t),e),$=([e,t],n)=>[e,Object.assign({},t,n)],R={start:!1,end:!1},U=[],z=this.showEmptyInterlinear,M=this.showTitleOnSingleInterlinear,q=(e,t)=>{if(!z&&(t||([...(e=(new DOMParser).parseFromString(e,"text/html").body).querySelectorAll("br")].forEach(e=>{e.remove()}),e=e.innerHTML),!e.trim()))return!0};return e.some((e,t)=>{const n=g({tr:e,foundState:R});if("boolean"==typeof n)return n;const r=m({tr:e});U.push(L($(O,{dataset:{row:n,"canonical-type":y,"canonical-id":r}}),P.map((n,r)=>{const i=T[r],o=i,{tdVal:a,htmlEscaped:s}=v({tr:e,idx:n}),p=o&&i.map(t=>{const{tdVal:n,htmlEscaped:r}=v({tr:e,idx:t});return console.log("showEmptyInterlinear",z,r),q(n,r)?"":o?ye.resultsDisplayServerOrClient.interlinearSegment({lang:c[t],dir:f[t],html:(d?ye.resultsDisplayServerOrClient.interlinearTitle({l:l,val:u[t]}):"")+n}):n}).filter(e=>""!==e);return $(A,{id:"row"+(t+1)+"col"+(r+1),lang:c[n],dir:f[n],dataset:{col:u[n]},innerHTML:(o&&!q(a,s)&&(M||p.length)?ye.resultsDisplayServerOrClient.interlinearSegment({lang:c[n],html:(d?ye.resultsDisplayServerOrClient.interlinearTitle({l:l,val:u[n]}):"")+a}):a)+(i&&p.length?_+p.join(_):"")})})))}),["div",[ye.resultsDisplayServerOrClient.styles({$p:t,$pRaw:n,$pRawEsc:r,$pEscArbitrary:i,escapeQuotedCSS:o,escapeCSS:a,tableWithFixedHeaderAndFooter:I,checkedFieldIndexes:P,hasCaption:h}),(e=>I?["div",{class:"table-responsive anchor-table-header zupa"},[["div",{class:"table-responsive anchor-table-body"},e]]]:["div",{class:"table-responsive"},e])([L(E,[p?L(C,[p,I?["div",{class:"zupa1"},[["div",{class:"inner-caption"},[["span",[p]]]]]]:""]):"","0"!==n("header")?L(N,[L(O,D.map((e,t)=>{const n=T[t];return e=s(e)+(n?l("comma-space")+n.map(e=>u[e]).join(l("comma-space")):""),L(S,[e,I?["div",{class:"zupa1"},[["div",{class:"th-inner"},[["span",[e]]]]]]:""])}))]):"",n("footer")&&"0"!==n("footer")?L(j,[L(O,D.map((e,t)=>{const n=T[t];return e=s(e)+(n?l("comma-space")+n.map(e=>u[e]).join(l("comma-space")):""),L(S,[e,I?["div",{class:"zupa1"},[["div",{class:"th-inner"},[["span",[e]]]]]]:""])}))]):"",L(F,U)])])]]}},resultsDisplayClient:{anchorRowCol:({anchorRowCol:e})=>h("#"+e),anchors:({escapedRow:e,escapedCol:t})=>h('tr[data-row="'+e+'"]'+(t?'> td[data-col="'+t+'"]':"")),main(...e){let t;try{t=ye.resultsDisplayServerOrClient.main(...e)}catch(e){"JSON support is currently not available"===e.message&&U.alert(e.message)}N(...t,D)}},defaultBody(){for(h("html").style.height="100%";D.hasChildNodes();)D.firstChild.remove();return N(D,{style:"height: 100%;"})}};function ve(e,t){if(t||!this.localizeParamNames)return e;const n=/\d+(-\d+)?$/,r=e.match(n);return r?this.l10n(["params","indexed",e.replace(n,"")])+r[0]:this.l10n(["params",e])}function be({l10n:e,params:t}={}){this.l10n=e,t||(t=location.hash.slice(1)),"string"==typeof t&&(t=new URLSearchParams(t)),this.params=t}ye.permissions={versionChange(){h("#versionChange").showModal()},addLogEntry({text:e}){const t=h("#installationLogContainer");try{t.showModal(),h("#dialogContainer").hidden=!1}catch(e){}h("#installationLog").append(e+"\n")},exitDialogs(){const e=h("#dialogContainer");e&&(e.hidden=!0)},dbError({type:e,escapedErrorMessage:t}){e&&N("span",[e," ",t],h("#dbError")),h("#dbError").showModal()},errorRegistering(e){e&&N("span",[e],h("#errorRegistering")),h("#errorRegistering").showModal()},browserNotGrantingPersistence(){h("#browserNotGrantingPersistence").showModal()},main({l:e,ok:t,refuse:n,close:r,closeBrowserNotGranting:i}){const o=N("dialog",{style:"text-align: center; height: 100%",id:"installationLogContainer",class:"focus"},[["p",[e("wait-installing")]],["div",{style:"height: 80%; overflow: auto;"},[["pre",{id:"installationLog"},[]]]]]);let a="";t&&(a=N("dialog",{id:"willRequestStoragePermissions",$on:{close:r}},[["section",[e("will-request-storage-permissions")]],["br"],["div",{class:"focus"},[["button",{$on:{click:t}},[e("OK")]],["br"],["br"],["button",{$on:{click:n}},[e("refuse-request-storage-permissions")]]]]]));const s=N("dialog",{id:"errorRegistering"},[["section",[e("errorRegistering")]]]);let l="";i&&(l=N("dialog",{id:"browserNotGrantingPersistence"},[["section",[e("browser-not-granting-persistence")]],["br"],["div",{class:"focus"},[["button",{$on:{click:i}},[e("OK")]]]]]));const u=N("dialog",{id:"versionChange"},[["section",[e("versionChange")]]]),c=N("dialog",{id:"dbError"},[["section",[e("dbError")]]]);return N("div",{id:"dialogContainer",style:"height: 100%"},[o,a,l,s,u,c],D),[o,a,l,s,u,c]}},be.prototype.get=function(e,t){return this.params.get(ve.call(this,e,t))},be.prototype.getAll=function(e,t){return this.params.getAll(ve.call(this,e,t))},be.prototype.has=function(e,t){return this.params.has(ve.call(this,e,t))},be.prototype.delete=function(e,t){return this.params.delete(ve.call(this,e,t))},be.prototype.set=function(e,t,n){return this.params.set(ve.call(this,e,n),t)},be.prototype.append=function(e,t,n){return this.params.append(ve.call(this,e,n),t)},be.prototype.toString=function(){return this.params.toString()};fe=async function({files:e,lang:r,fallbackLanguages:i,$p:o,followParams:a}){try{const s=await t(e),l=e=>s["localization-strings"][e],u=await t(s.groups.reduce((e,t)=>{const n=(s.metadataBaseDirectory||"")+(t.metadataBaseDirectory||"")+"/";return t.files.reduce((e,t)=>e.concat(n+t.metadataFile),e)},[])),c=n({locales:r.map(l),fallbackLocales:i.map(l)}).getFormatter();document.title=c({key:"browserfile-workselect",fallback:!0});const f=u[Symbol.iterator](),p=()=>{const e=f.next().value;return q(r,e,"alias")};ye.workSelect({groups:s.groups,lf:c,getNextAlias:p,$p:o,followParams:a})}catch(e){U.alert(e)}};const _e=e=>location.href.replace(/#.*$/,"")+"#"+e.toString(),we=function(...e){const t=xe(...e);return function(...e){const n=t(...e);return _e(n)}},xe=function({l:e,il:t,$p:n}){return function({form:r,random:i={},checkboxes:o,type:a,fieldAliasOrNames:s=[],workName:l}){const u=new URLSearchParams(n.params),c=ae(r,{hash:!0,empty:!0});function f(){let e=1,t=1;for(;u.has(`${l}-start${e}-${t}`,!0);){for(;u.has(`${l}-start${e}-${t}`,!0);)u.delete(`${l}-start${e}-${t}`,!0),u.delete(`${l}-end${e}-${t}`,!0),u.delete(`${l}-anchor${e}-${t}`,!0),t++;t=1,e++}}switch(Object.keys(c).forEach(e=>{u.set(e,c[e])}),u.delete(t("rand")),u.set(t("rand"),i.checked?e("yes"):e("no")),o.forEach(t=>{u.delete(t.name),t.name&&u.set(t.name,t.checked?e("yes"):e("no"))}),a){case"saveSettings":u.delete(t("rand"));break;case"shortcutResult":{u.delete(t("rand"));let n=1;for(;u.has(`anchorfield${n}`,!0);)u.delete(`anchorfield${n}`,!0),n++;for(f(),n=1;u.has(`field${n}`,!0);)u.delete(`field${n}`,!0),u.delete(`checked${n}`,!0),u.delete(`interlin${n}`,!0),u.delete(`css${n}`,!0),n++;s.forEach((t,n)=>{u.set(`field${n+1}`,t,!0),u.set(`checked${n+1}`,e("yes"),!0),u.set(`interlin${n+1}`,""),u.set(`css${n+1}`,"")}),u.delete("work",!0)}case"startEndResult":case"randomResult":case"result":"startEndResult"===a&&f(),("randomResult"===a||i.checked)&&(u.delete(t("rand")),u.set(t("rand"),e("yes"))),u.set(t("result"),e("yes"))}return u}};var ke,Ee=async function({l:e,languageParam:r,lang:i,preferredLocale:o,languages:a,fallbackLanguages:s,$p:l}){const u=this.langData.languages,c=this.getDirectionForLanguageCode(s[0]),f=localStorage.getItem(this.namespace+"-localizeParamNames"),p=l.localizeParamNames=l.has("i18n",!0)?"1"===l.get("i18n",!0):"true"===f||"false"!==f&&this.localizeParamNames,h=localStorage.getItem(this.namespace+"-hideFormattingSection"),d=l.has("formatting",!0)?"0"===l.get("formatting",!0):"true"===h||"false"!==h&&this.hideFormattingSection;try{const f=await this.getWorkData({lang:i,fallbackLanguages:s,preferredLocale:o,languages:a,work:l.get("work")}),{lf:h,fileData:g,metadataObj:m}=f,y=L(f,["lf","fileData","metadataObj"]);document.title=h({key:"browserfile-workdisplay",values:{work:g?q(i,m,"alias"):""},fallback:!0}),await async function({lf:f,metadataObj:h,getFieldAliasOrName:g,schemaObj:m,schemaItems:y,fieldInfo:v,metadata:b,pluginsForWork:_,groupsToWorks:w}){const x=p?t=>e(["params",t]):e=>e,k=p?t=>e(["params","indexed",t]):e=>e,E=a.localeFromLangData.bind(a),O=n({locales:i.map(E),fallbackLocales:s.map(E)}).getFormatter(),A=(t,n,r)=>e({key:t,values:n,formats:r,fallback:({message:e})=>ye.workDisplay.bdo({fallbackDirection:c,message:e})}),S=b.getFieldMatchesLocale({namespace:this.namespace,preferredLocale:o,schemaItems:y,pluginsForWork:_}),C=[];this.getBrowseFieldData({metadataObj:h,schemaItems:y,getFieldAliasOrName:g,callback({browseFields:e,i:t}){ye.workDisplay.addBrowseFields({browseFields:e,fieldInfo:v,ld:A,i:t,iil:k,$p:l,content:C})}});const N=we({l:e,il:x,$p:l}),F=xe({l:e,il:x,$p:l}),{groups:j}=await t(this.files),D=q(i,h,"heading"),P=(()=>{const e=Promise.all(w.map(async({name:e,workNames:t,shortcuts:n})=>({groupName:e,worksToFields:await Promise.all(t.map(async(e,t)=>({workName:e,shortcut:n[t],fieldAliasOrNames:(await this.getWorkData({lang:i,fallbackLanguages:s,preferredLocale:o,languages:a,work:e})).fieldInfo.map(({fieldAliasOrName:e})=>e)})))})));return async()=>e})();ye.workDisplay.main({languageParam:r,lang:i,lf:f,l:e,namespace:this.namespace,groups:j,heading:D,imfl:O,fallbackDirection:c,langs:u,fieldInfo:v,localizeParamNames:p,serializeParamsAsURL:N,paramsSetter:F,replaceHash:_e,getFieldAliasOrNames:P,hideFormattingSection:d,$p:l,metadataObj:h,il:x,le:(t,n,r,i,o)=>(i[r]=e({key:t,fallback:({message:e})=>(i.dir=c,e)}),[n,i,o]),ld:A,iil:k,fieldMatchesLocale:S,preferredLocale:o,schemaItems:y,content:C})}.call(this,I({lf:h,metadataObj:m},y))}catch(e){U.alert(e)}},Oe=ke={_escapeRegExpPattern:function(e){return"string"!=typeof e?e:e.replace(/([\.\*\+\^\$\[\]\\\(\)\|\{\}\,\-\:\?])/g,"\\$1")},_toLowerCase:function(e,t){return"string"!=typeof e?t&&e:e.toLowerCase()},_toUpperCase:function(e,t){return"string"!=typeof e?t&&e:e.toUpperCase()},_trim:function(e,t,n){var r,i=[],o=function(e){i.push("^"+e+"+|"+e+"+$")};if("boolean"==typeof t&&(n=t,t=null),"string"!=typeof e)return n&&e;if(Array.isArray(t)&&t.map(function(e){var t=ke._escapeRegExpPattern(e);o(t)}),"string"==typeof t){var a=ke._escapeRegExpPattern(t);o(a)}t||o("\\s");var s="("+i.join("|")+")";for(r=new RegExp(s,"g");e.match(r);)e=e.replace(r,"");return e},_parseLocale:function(e){var t,n=/^([a-zA-Z]*)([_\-a-zA-Z]*)$/.exec(e);if(e&&n)return n[2]=ke._trim(n[2],["-","_"]),{lang:ke._toLowerCase(n[1]),countryCode:t=ke._toUpperCase(n[2])||t}},isRtlLang:function(e){var t=ke._parseLocale(e);if(t)return ke._BIDI_RTL_LANGS.indexOf(t.lang)>=0},getLangDir:function(e){return ke.isRtlLang(e)?"rtl":"ltr"}};Object.defineProperty(ke,"_BIDI_RTL_LANGS",{value:["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],writable:!1,enumerable:!0,configurable:!1});var Ae={isRtlLang:Oe.isRtlLang,getLangDir:Oe.getLangDir}.getLangDir;const Se=/^.* \((.*?)\)$/,Ce=e=>"string"==typeof e?e.replace(Se,"$1"):e,Ne=async function({l:e,lang:t,fallbackLanguages:n,imfLocales:r,$p:i,skipIndexedDB:o,noIndexedDB:a,prefI18n:s,files:l,allowPlugins:u,langData:c,basePath:f="",dynamicBasePath:p=""}){const h=new M({langData:c}),d=({schemaItems:e,fieldInfo:n,metadataObj:r,getFieldAliasOrName:i,usePreferAlias:o})=>n.map(({field:n,plugin:a})=>{if(a)return;const{preferAlias:s,fieldValueAliasMap:l}=W({field:n,schemaItems:e,metadataObj:r,getFieldAliasOrName:i,lang:t});return o?l?(Object.entries(l).forEach(([e,t])=>{Array.isArray(t)?l[e]=t.map(t=>ye.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:t})):t&&"object"==typeof t?"string"==typeof s?l[e]=ye.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:t[s]}):Object.entries(t).forEach(([t,n])=>{l[e][t]=ye.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:n})}):l[e]=ye.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:t})}),!1!==s?l:void 0):void 0:!1!==s?l:void 0}),g=(e,t)=>{let n;const o=i.get(e,!0);return function e(t){if(Array.isArray(t))return t.some(e);return Object.values(t).some((r,i)=>"string"!=typeof r?e(r):r===o?(n=Object.keys(t)[i],!0):void 0)}(r),n||t||console.log("Bad param/value",e,"::",o),n},m=ne,{fileData:y,lf:v,getFieldAliasOrName:b,schemaObj:_,metadataObj:w,pluginsForWork:x}=await K({files:l||this.files,allowPlugins:u||this.allowPlugins,lang:t,fallbackLanguages:n,work:i.get("work"),basePath:f});console.log("pluginsForWork",x);const k=q(t,w,"heading"),E=_.items.items,O=[],A=[],S=[];H({metadataObj:w,schemaItems:E,getFieldAliasOrName:b,lang:t,callback({setName:e,browseFields:t,presort:n}){O.push(e),A.push(n),S.push(t)}});const C=E.map(({title:e,format:t})=>({field:e,fieldAliasOrName:b(e)||e,escapeColumn:"html"!==t,fieldLang:w.fields[e].lang})),[N]=t,F=new V({metadataObj:w});if(x){console.log("pluginsForWork",x);const{lang:e}=this;x.iterateMappings(({plugin:t,pluginName:n,pluginLang:r,onByDefaultDefault:i,placement:o,applicableFields:a,meta:s})=>{o="end"===o?1/0:o;const l=({applicableField:t,targetLanguage:a,onByDefault:l,metaApplicableField:u}={})=>{const c=x.getPluginObject(n)||{},f=F.getFieldLang(t);c.getTargetLanguage&&(a=c.getTargetLanguage({applicableField:t,targetLanguage:a,pluginLang:r,applicableFieldLang:f})),"{locale}"===a&&(a=N);const p=q(e,w,["fieldnames",t]),d=c.getFieldAliasOrName?c.getFieldAliasOrName({locales:e,lf:v,targetLanguage:a,applicableField:t,applicableFieldI18N:p,meta:s,metaApplicableField:u,targetLanguageI18N:h.getLanguageFromCode(a)}):h.getFieldNameFromPluginNameAndLocales({pluginName:n,locales:e,lf:v,targetLanguage:a,applicableFieldI18N:p,meta:s,metaApplicableField:u});C.splice(o,0,{plugin:c,meta:s,placement:o,fieldAliasOrName:d,escapeColumn:!1!==c.escapeColumn,onByDefault:"boolean"==typeof l?l:i||!1,applicableField:t,metaApplicableField:u,fieldLang:a})};x.processTargetLanguages(a,l)||l()})}const j=C.map(e=>e.fieldAliasOrName),D=C.map(e=>e.escapeColumn),P=C.map(({fieldLang:e})=>e!==N?e:null),T=d({schemaItems:E,fieldInfo:C,metadataObj:w,getFieldAliasOrName:b,usePreferAlias:!1}),I=d({schemaItems:E,fieldInfo:C,metadataObj:w,getFieldAliasOrName:b,usePreferAlias:!0}),L=i.localizeParamNames=i.has("i18n",!0)?"1"===i.get("i18n",!0):"true"===s||"false"!==s&&this.localizeParamNames,$=L?t=>e(["params",t]):e=>e,R=L?t=>e(["params","indexed",t]):e=>e,U=L?(e,t="")=>i.get($(e)+t,!0):(e,t="")=>i.get(e+t,!0),z=L?(e,t="")=>i.get(i.get("work")+"-"+R(e)+t,!0):(e,t="")=>i.get(i.get("work")+"-"+e+t,!0),B=S.findIndex((e,t)=>"string"==typeof z("startEnd",t+1));if(-1!==B){const e="-",t=":",n=(z("startEnd",B+1)||"").trim(),[r,o]=n.split(e);if(void 0!==o){const e=r.split(t),n=o.split(t),a=e.length-n.length;a>0?n.unshift(...e.slice(0,a)):a<0&&e.push(...Array(-a).fill("1")),console.log("startPartVals",e),console.log("endPartVals",n),e.forEach((e,t)=>{const r=n[t];i.set(`${i.get("work")}-start${B+1}-${t+1}`,e,!0),i.set(`${i.get("work")}-end${B+1}-${t+1}`,r,!0)})}}const J=S.findIndex((e,t)=>"string"==typeof z("start",t+1+"-1")),G=S[J],Y=O[J],Z=G.map(e=>e.fieldName),X=S[0],Q=O[0],ee=X.map(e=>e.fieldName),te=G.map(e=>e.fieldSchema.type),re=e=>Z.map((t,n)=>i.get(i.get("work")+"-"+e+(J+1)+"-"+(n+1),!0)),ie=re("start"),oe=re("end"),[ae,se]=(({starts:t,ends:n,applicableBrowseFieldNames:r,heading:i})=>{let o;const a="0"!==g("caption");if(a){const a=ye.resultsDisplayServerOrClient.startSeparator({l:e}),s=ye.resultsDisplayServerOrClient.innerBrowseFieldSeparator({l:e}),l=(()=>{const i=[],o=t.reduce((e,t,r)=>{const o=e+t;return t===n[r]?o+(r>0?s:" "):(i.push(n[r]),o+a)},"").slice(0,-a.length),l=r.join(s);return ne(ye.resultsDisplayServerOrClient.ranges({l:e,startRange:o,endVals:i,rangeNames:l}))})();o=ye.resultsDisplayServerOrClient.caption({heading:i,ranges:l})}return[a,o]})({starts:ie,ends:oe,applicableBrowseFieldNames:Z,heading:k}),le="1"===g("interlintitle");console.log("rand","yes"===U("rand"));const ue=(e,t)=>{let n;if(e.match(/^\d+$/)||e.match(Se))n=Ce(e);else{const r=G[t].rawFieldValueAliasMap;let i;if(r){const t=Object.entries(r);Array.isArray(t[0][1])?t.some(([t,n])=>{if(n.includes(e))return i=t,!0}):t.some(([t,n])=>{if(Object.values(n).includes(e))return i=t,!0})}n=void 0===i?e:i}return"integer"===te[t]?parseInt(n,10):n},ce=y.name,fe=ie.map(ue),pe=oe.map(ue);let he,de=!1;if(o||a){const e=A[J];if(this.noDynamic)({resolved:{data:he}}=await JsonRefs.resolveRefs(y.file)),(({presort:e,tableData:t,applicableBrowseFieldNames:n,localizedFieldNames:r})=>{e&&t.sort((e,t)=>{let i;return n.some(n=>{const o=r.indexOf(n),a=e[o]<t[o],s=e[o]>t[o];return i=s?1:-1,a||s}),i})})({presort:e,tableData:he,applicableBrowseFieldNames:Z,localizedFieldNames:j});else{const e=`${p}textbrowser?${i.toString()}`;he=await(await fetch(e)).json(),de=!0}}else he=await new Promise((e,t)=>{const n=this.namespace+"-textbrowser-cache-data";indexedDB.open(n).onsuccess=(({target:{result:t}})=>{const n="files-to-cache-"+ce;t.transaction(n).objectStore(n).index("browseFields-"+Y).getAll(IDBKeyRange.bound(fe,pe)).onsuccess=(({target:{result:t}})=>{const n=t.map(e=>e.value);e(n)})})});!de&&x&&(C.forEach(({plugin:e,placement:t},n)=>{e&&he.forEach((e,n)=>{e.splice(t,0,null)})}),C.forEach(({plugin:e,applicableField:t,fieldLang:n,meta:r,metaApplicableField:o},a)=>{if(!e)return;const s=C.findIndex(({field:e})=>e===t);he.forEach((l,u)=>{const c=l[s];l[a]=e.getCellData&&e.getCellData({tr:l,tableData:he,i:u,j:a,applicableField:t,fieldInfo:C,applicableFieldIdx:s,applicableFieldText:c,fieldLang:n,meta:r,metaApplicableField:o,$p:i,thisObj:this})||c}),console.log("applicableFieldIdx",s)}));const ge=Ae(N),me=P.map(e=>{if(!e)return null;const t=Ae(e);return t!==ge?t:null}),ve={tableData:he,$p:i,$pRaw:g,$pRawEsc:e=>ne(g(e)),$pEscArbitrary:e=>ne(i.get(e,!0)),escapeQuotedCSS:e=>e.replace(/"/g,'\\"'),escapeCSS:m,escapeHTML:ne,l:e,localizedFieldNames:j,fieldLangs:P,fieldDirs:me,caption:se,hasCaption:ae,showInterlinTitles:le,determineEnd:(({fieldValueAliasMap:e,fieldValueAliasMapPreferred:t,localizedFieldNames:n,applicableBrowseFieldNames:r,startsRaw:i,endsRaw:o})=>({tr:a,foundState:s})=>{const l=[],u=r.map(r=>{const i=n.indexOf(r);return void 0!==e[i]&&l.push(t[i][a[i]]),l.push(a[i]),a[i]});if(!s.start){if(i.some((e,t)=>e!==u[t]))return!1;s.start=!0}if(o.every((e,t)=>e===u[t]))s.end=!0;else if(s.end)return!0;return l.join("-")})({applicableBrowseFieldNames:Z,fieldValueAliasMap:T,fieldValueAliasMapPreferred:I,localizedFieldNames:j,startsRaw:fe,endsRaw:pe}),canonicalBrowseFieldSetName:Q,getCanonicalID:(({fieldValueAliasMap:e,fieldValueAliasMapPreferred:t,localizedFieldNames:n,canonicalBrowseFieldNames:r})=>({tr:i,foundState:o})=>r.map(r=>{const o=n.indexOf(r);return void 0!==e[o]?t[o][i[o]]:i[o]}).join("-"))({canonicalBrowseFieldNames:ee,fieldValueAliasMap:T,fieldValueAliasMapPreferred:I,localizedFieldNames:j}),getCellValue:(({fieldValueAliasMapPreferred:t,escapeColumnIndexes:n})=>({tr:r,idx:i})=>{let o=void 0!==t[i]?t[i][r[i]]:r[i];return o&&"object"==typeof o&&(o=Object.values(o)),Array.isArray(o)&&(o=o.join(e("comma-space"))),!n[i]&&this.trustFormatHTML||"string"!=typeof o?{tdVal:o}:{tdVal:ne(o),htmlEscaped:!0}})({fieldValueAliasMapPreferred:I,escapeColumnIndexes:D,escapeHTML:ne}),checkedAndInterlinearFieldInfo:(({localizedFieldNames:t})=>{let n,r,o=1,a=[];do{n=i.get("field"+o,!0),r=i.get("checked"+o,!0),o++,!n||r!==e("yes")&&null!==r||a.push(n)}while(n);const s=(a=a.filter(e=>t.includes(e))).map(e=>t.indexOf(e)),l=s.map((e,t)=>{const n=i.get("interlin"+(e+1),!0);return n&&n.split(/\s*,\s*/).map(e=>parseInt(e,10)-1).filter(e=>!Number.isNaN(e))});return[a,s,l]})({localizedFieldNames:j}),interlinearSeparator:this.interlinearSeparator};return{fieldInfo:C,$p:i,applicableBrowseFieldSet:G,fieldValueAliasMapPreferred:I,lf:v,iil:R,ilRaw:U,browseFieldSets:S,lang:t,metadataObj:w,fileData:y,templateArgs:ve}};function Fe(e){if(!(this instanceof Fe))return new Fe(e);const t=new URL("node_modules/textbrowser/resources/index.js",location);this.site=e.site||"site.json",X(this,e),this.allowPlugins=e.allowPlugins,this.dynamicBasePath=e.dynamicBasePath,this.trustFormatHTML=e.trustFormatHTML,this.requestPersistentStorage=e.requestPersistentStorage,this.localizeParamNames=void 0===e.localizeParamNames||e.localizeParamNames,this.hideFormattingSection=Boolean(e.hideFormattingSection),this.interlinearSeparator=e.interlinearSeparator,this.showEmptyInterlinear=e.showEmptyInterlinear,this.showTitleOnSingleInterlinear=e.showTitleOnSingleInterlinear,this.noDynamic=e.noDynamic,this.skipIndexedDB=e.skipIndexedDB,this.stylesheets=(e.stylesheets||["@builtin"]).map(e=>"@builtin"===e?new URL("index.css",t).href:e)}async function je(e){try{if(ye.permissions.addLogEntry({text:"Worker registration: Beginning..."}),!await navigator.storage.persist())return void ye.permissions.browserNotGrantingPersistence();await te({serviceWorkerPath:this.serviceWorkerPath,logger:ye.permissions})}catch(e){if(console.log("err",e),e&&"object"==typeof e){const{errorType:t}=e;if("versionChange"===t)return void ye.permissions.versionChange()}ye.permissions.errorRegistering(ne(e&&e.message))}}return Fe.prototype.workDisplay=Ee,Fe.prototype.resultsDisplayClient=async function(e){const t=await navigator.storage.persisted(),n=this.skipIndexedDB||!t||!navigator.serviceWorker.controller,r=localStorage.getItem(this.namespace+"-localizeParamNames"),{fieldInfo:i,$p:o,browseFieldSets:a,applicableBrowseFieldSet:s,lang:l,metadataObj:u,fileData:c,fieldValueAliasMapPreferred:f,lf:p,iil:h,ilRaw:d,templateArgs:g}=await Ne.call(this,I({},e,{skipIndexedDB:n,prefI18n:r}));document.title=p({key:"browserfile-resultsdisplay",values:{work:c?q(l,u,"alias"):""},fallback:!0}),ye.resultsDisplayClient.main(g),(({applicableBrowseFieldSet:e,fieldValueAliasMapPreferred:t,ilRaw:n,iil:r,max:i,$p:o})=>{const a=e.map(e=>e.fieldSchemaIndex),s=o.get("work");let l;const u=n("anchorrowcol");if(u&&(l=ye.resultsDisplayClient.anchorRowCol({anchorRowCol:u})),!l){const e=[];let n="";for(let l,u=1;!l&&!e.length;u++)for(let c=1;;c++){const f=s+"-anchor"+u+"-"+c,p=o.get(f,!0);if(!p){(u===i||e.length)&&(l=!0);break}n=o.get(r("anchorfield")+u,!0);const h=a[c-1],d=Ce(p),g=t[h]&&t[h][d];e.push(g||p)}if(e.length){const t=e=>(e||"").replace(/["\\]/g,"\\$&"),r=t(e.join("-")),i=n?t(n):void 0;l=ye.resultsDisplayClient.anchors({escapedRow:r,escapedCol:i})}}l&&l.scrollIntoView()})({applicableBrowseFieldSet:s,fieldValueAliasMapPreferred:f,iil:h,ilRaw:d,$p:e.$p,max:a.length}),i.forEach(({plugin:e,applicableField:t,meta:n,j:r})=>{e&&e.done&&e.done({$p:o,applicableField:t,meta:n,j:r,thisObj:this})})},Fe.prototype.init=async function(){return this._stylesheetElements=await function(e,{before:t,after:n,favicon:r,canvas:i,image:o=!0,acceptErrors:a}={}){return e=Array.isArray(e)?e:[e],Promise.all(e.map(function(e){let s={};Array.isArray(e)&&([e,s={}]=e);let{favicon:l=r}=s;const{before:u=t,after:c=n,canvas:f=i,image:p=o}=s;function h(){u?u.before(d):c?c.after(d):document.head.appendChild(d)}const d=document.createElement("link");return new Promise((t,n)=>{let r=n;if(a&&(r="function"==typeof a?r=>{a({error:r,stylesheetURL:e,options:s,resolve:t,reject:n})}:t),e.endsWith(".css")?l=!1:e.endsWith(".ico")&&(l=!0),l){if(d.rel="shortcut icon",d.type="image/x-icon",!1===p)return d.href=e,h(),void t(d);const r=document.createElement("canvas");r.width=16,r.height=16;const i=r.getContext("2d"),o=document.createElement("img");return o.addEventListener("error",e=>{n(e)}),o.addEventListener("load",()=>{i.drawImage(o,0,0),d.href=f?r.toDataURL("image/x-icon"):e,h(),t(d)}),void(o.src=e)}d.rel="stylesheet",d.type="text/css",d.href=e,h(),d.addEventListener("error",e=>{r(e)}),d.addEventListener("load",()=>{t(d)})})}))}(this.stylesheets),this.displayLanguages()},Fe.prototype.displayLanguages=async function(){try{const[e,n]=await t([this.languages,this.site]);this.langData=e,this.siteData=n;const r=this.paramChange();return window.addEventListener("hashchange",()=>this.paramChange()),r}catch(e){U.alert(e)}},Fe.prototype.getWorkFiles=async function(e=this.files){const n=await t(e),r=[];return n.groups.forEach(e=>{e.files.forEach(t=>{const{file:i,schemaFile:o,metadataFile:a}=Z(n,e,t);r.push(i,o,a)})}),r.push(...Object.values(n.plugins).map(e=>e.path)),r},Fe.prototype.getWorkData=function(e){try{return K.call(this,I({},e,{files:this.files,allowPlugins:this.allowPlugins}))}catch(e){U.alert("catch:"+e)}},Fe.prototype.getDirectionForLanguageCode=function(e){const t=this.langData.languages,n=t.find(t=>t.code===e);return n&&n.direction||t.find(t=>t.code.startsWith(e+"-"))},Fe.prototype.getFieldNameAndValueAliases=function(e){return W(I({},e,{lang:this.lang}))},Fe.prototype.getBrowseFieldData=function(e){return H(I({},e,{lang:this.lang}))},Fe.prototype.paramChange=async function(){ye.defaultBody();const e=this.$p="string"==typeof history.state?new be({params:history.state}):new be,t=(t,n)=>{const r=document.querySelector(t),i=location.href.replace(/#.*$/,"")+"#"+e.toString();history.replaceState(ae(r,{hash:!0,empty:!0}),document.title,i),n(),location.hash="#"+e.toString()},i=new M({langData:this.langData}),{lang:o,langs:a,languageParam:s,fallbackLanguages:l}=i.getLanguageInfo({$p:e});this.lang=o;const[u]=o,c=this.getDirectionForLanguageCode(u);document.dir=c;const f=localStorage.getItem(this.namespace+"-refused"),p=()=>{const e=e=>this.siteData["localization-strings"][e];return n({locales:o.map(e),fallbackLocales:l.map(e)}).getFormatter()};let h;const d=e.get("result"),g=await navigator.storage.persisted(),m=await navigator.serviceWorker.getRegistration(this.serviceWorkerPath),y=async()=>{if(d)return;!(f||navigator.serviceWorker.controller&&g)&&(h=p(),g?(ye.permissions.main({l:h}),await je.call(this,a)):await async function(e,t){await new Promise((n,r)=>{const[,i,o]=ye.permissions.main({l:t,ok:async()=>{const e=await Notification.requestPermission();i.close(e)},refuse:()=>{i.close()},close:async()=>{try{if(!i.returnValue)return void function(){localStorage.setItem(this.namespace+"-refused","true")}()}catch(e){ye.permissions.errorRegistering(ne(e&&e.message))}switch(i.returnValue){case"denied":case"default":return void n();case"granted":if(navigator.serviceWorker.controller)return void n();await je.call(this,e)}},closeBrowserNotGranting:e=>{o.close()}});i.showModal()})}.call(this,a,h),ye.permissions.exitDialogs())};if(m){h=p();const e=m.installing||m.waiting||m.active;if(!e)return console.error("Unexpected error: worker registration received without a worker."),void await y();ye.permissions.main({l:h}),setInterval(()=>{m.update()},36e5),console.log("worker.state",e.state);const t=async()=>{try{return ee({r:m,langs:a,languages:this.languages,logger:ye.permissions})}catch(e){return U.alert("\n    There was an unexpected error activating the new version;\n    please save any unfinished work, close this tab, and try\n    opening this site again.\n\n    Please contact a service administrator if the problem\n    persists (Error type: worker activation).\n    ")}};switch(e.state){case"installing":t(),Q({r:m,logger:{addLogEntry(e){console.log(e)}}});break;case"installed":await t();break;case"activating":return await U.alert("\nPlease wait for a short while as we work to update to a new version.\n"),t(),void navigator.serviceWorker.onmessage({data:"finishActivate"});case"activated":Q({r:m,logger:{addLogEntry(e){console.log(e)}}});break;case"redundant":return void await t()}}else await y();if(ye.permissions.exitDialogs(),!s){return void(n=>{e.l10n=n,document.title=n("browser-title"),ye.languageSelect.main({langs:a,languages:i,followParams:t,$p:e})})(h||p())}document.documentElement.lang=u;return r({$p:e,lang:o,langs:a,langData:this.langData,fallbackLanguages:l,resultsDisplay:e=>{const t=f||!navigator.serviceWorker.controller;return this.resultsDisplayClient(I({langData:this.langData},e,{noIndexedDB:t,dynamicBasePath:this.dynamicBasePath,files:this.files,allowPlugins:this.allowPlugins}))},localeCallback:n=>{return this.l10n=n,e.l10n=n,e.get("work")?!d&&(this.workDisplay({l:n,lang:o,preferredLocale:u,fallbackLanguages:l,languageParam:s,$p:e,languages:i}),!0):(fe({files:this.files,lang:o,fallbackLanguages:l,$p:e,followParams:t}),!0)}})},Fe});
