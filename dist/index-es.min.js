var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var simpleGetJson=createCommonjsModule(function(e,t){e.exports=function e(t,n,r){return i=regeneratorRuntime.mark(function i(){var o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!Array.isArray(t)){i.next=7;break}return i.next=4,Promise.all(t.map(function(t){return e(t)}));case 4:return o=i.sent,n&&n.apply(null,o),i.abrupt("return",o);case 7:return i.next=9,fetch(t).then(function(e){return e.json()});case 9:return a=i.sent,i.abrupt("return","function"==typeof n?n(a):a);case 13:if(i.prev=13,i.t0=i.catch(0),i.t0.message+=" (File: "+t+")",!r){i.next=18;break}return i.abrupt("return",r(i.t0,t));case 18:throw i.t0;case 19:case"end":return i.stop()}},i,this,[[0,13]])})(),new Promise(function(e,t){function n(o,a){try{var s=i[a?"throw":"next"](o)}catch(e){return void t(e)}s.done?e(s.value):Promise.resolve(s.value).then(n,r)}function r(e){n(e,1)}n()});var i}}),dist=createCommonjsModule(function(e,t){e.exports=function(e){e=e&&e.hasOwnProperty("default")?e.default:e;var t=Object.prototype.hasOwnProperty;function n(e){var n,r,i,o,a=Array.prototype.slice.call(arguments,1);for(n=0,r=a.length;n<r;n+=1)if(i=a[n])for(o in i)t.call(i,o)&&(e[o]=i[o]);return e}var r=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}()?Object.defineProperty:function(e,n,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(n,r.get):(!t.call(e,n)||"value"in r)&&(e[n]=r.value)},i=Object.create||function(e,n){var i,o;function a(){}for(o in a.prototype=e,i=new a,n)t.call(n,o)&&r(i,o,n[o]);return i};function o(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function a(e){this.id=e}function s(e,t,n,r,i){this.id=e,this.useOrdinal=t,this.offset=n,this.options=r,this.pluralFn=i}function l(e,t,n,r){this.id=e,this.offset=t,this.numberFormat=n,this.string=r}function u(e,t){this.id=e,this.options=t}o.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},o.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,r,i=e.elements,o=[];for(t=0,n=i.length;t<n;t+=1)switch((r=i[t]).type){case"messageTextElement":o.push(this.compileMessageText(r));break;case"argumentElement":o.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return o},o.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new l(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},o.prototype.compileArgument=function(e){var t=e.format;if(!t)return new a(e.id);var n,r=this.formats,i=this.locales,o=this.pluralFn;switch(t.type){case"numberFormat":return n=r.number[t.style],{id:e.id,format:new Intl.NumberFormat(i,n).format};case"dateFormat":return n=r.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(i,n).format};case"timeFormat":return n=r.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(i,n).format};case"pluralFormat":return n=this.compileOptions(e),new s(e.id,t.ordinal,t.offset,n,o);case"selectFormat":return n=this.compileOptions(e),new u(e.id,n);default:throw new Error("Message element does not have a valid format type")}},o.prototype.compileOptions=function(e){var t,n,r,i=e.format,o=i.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===i.type?e:null,t=0,n=o.length;t<n;t+=1)r=o[t],a[r.selector]=this.compileMessage(r.value);return this.currentPlural=this.pluralStack.pop(),a},a.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},s.prototype.getOption=function(e){var t=this.options,n=t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)];return n||t.other},l.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},u.prototype.getOption=function(e){var t=this.options;return t[e]||t.other};var c=function(){function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},o={start:je},a=je,s=function(e){return{type:"messageFormatPattern",elements:e,location:Ae()}},l=function(e){var t,n,r,i,o,a="";for(t=0,r=e.length;t<r;t+=1)for(i=e[t],n=0,o=i.length;n<o;n+=1)a+=i[n];return a},u=function(e){return{type:"messageTextElement",value:e,location:Ae()}},c=/^[^ \t\n\r,.+={}#]/,f={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},p="{",h={type:"literal",value:"{",description:'"{"'},d=",",g={type:"literal",value:",",description:'","'},m="}",y={type:"literal",value:"}",description:'"}"'},v=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:Ae()}},b="number",_={type:"literal",value:"number",description:'"number"'},w="date",x={type:"literal",value:"date",description:'"date"'},k="time",E={type:"literal",value:"time",description:'"time"'},A=function(e,t){return{type:e+"Format",style:t&&t[2],location:Ae()}},S="plural",O={type:"literal",value:"plural",description:'"plural"'},T=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:Ae()}},j="selectordinal",C={type:"literal",value:"selectordinal",description:'"selectordinal"'},P=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:Ae()}},F="select",D={type:"literal",value:"select",description:'"select"'},L=function(e){return{type:"selectFormat",options:e,location:Ae()}},N="=",$={type:"literal",value:"=",description:'"="'},I=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:Ae()}},R="offset:",U={type:"literal",value:"offset:",description:'"offset:"'},M=function(e){return e},z=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:Ae()}},B={type:"other",description:"whitespace"},q=/^[ \t\n\r]/,W={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},H={type:"other",description:"optionalWhitespace"},V=/^[0-9]/,J={type:"class",value:"[0-9]",description:"[0-9]"},G=/^[0-9a-f]/i,X={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Y="0",Z={type:"literal",value:"0",description:'"0"'},K=/^[1-9]/,Q={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},re="\\\\",ie={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},oe=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},le=function(){return"\\#"},ue="\\{",ce={type:"literal",value:"\\{",description:'"\\\\{"'},fe=function(){return"{"},pe="\\}",he={type:"literal",value:"\\}",description:'"\\\\}"'},de=function(){return"}"},ge="\\u",me={type:"literal",value:"\\u",description:'"\\\\u"'},ye=function(e){return String.fromCharCode(parseInt(e,16))},ve=function(e){return e.join("")},be=0,_e=0,we=[{line:1,column:1,seenCR:!1}],xe=0,ke=[],Ee=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function Ae(){return Oe(_e,be)}function Se(e){var n,r,i=we[e];if(i)return i;for(n=e-1;!we[n];)n--;for(i={line:(i=we[n]).line,column:i.column,seenCR:i.seenCR};n<e;)"\n"===(r=t.charAt(n))?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return we[e]=i,i}function Oe(e,t){var n=Se(e),r=Se(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Te(e){be<xe||(be>xe&&(xe=be,ke=[]),ke.push(e))}function je(){return Ce()}function Ce(){var e,t,n;for(e=be,t=[],n=Pe();n!==i;)t.push(n),n=Pe();return t!==i&&(_e=e,t=s(t)),e=t}function Pe(){var e;return(e=Fe())===i&&(e=De()),e}function Fe(){var e,n;return e=be,(n=function(){var e,n,r,o,a,s;if(e=be,n=[],r=be,(o=Re())!==i&&(a=qe())!==i&&(s=Re())!==i?r=o=[o,a,s]:(be=r,r=i),r!==i)for(;r!==i;)n.push(r),r=be,(o=Re())!==i&&(a=qe())!==i&&(s=Re())!==i?r=o=[o,a,s]:(be=r,r=i);else n=i;return n!==i&&(_e=e,n=l(n)),(e=n)===i&&(e=be,n=Ie(),e=n!==i?t.substring(e,be):n),e}())!==i&&(_e=e,n=u(n)),e=n}function De(){var e,n,r,o,a,s,l;return e=be,123===t.charCodeAt(be)?(n=p,be++):(n=i,0===Ee&&Te(h)),n!==i&&Re()!==i&&(r=function(){var e,n,r;if((e=ze())===i){if(e=be,n=[],c.test(t.charAt(be))?(r=t.charAt(be),be++):(r=i,0===Ee&&Te(f)),r!==i)for(;r!==i;)n.push(r),c.test(t.charAt(be))?(r=t.charAt(be),be++):(r=i,0===Ee&&Te(f));else n=i;e=n!==i?t.substring(e,be):n}return e}())!==i&&Re()!==i?(o=be,44===t.charCodeAt(be)?(a=d,be++):(a=i,0===Ee&&Te(g)),a!==i&&(s=Re())!==i&&(l=Le())!==i?o=a=[a,s,l]:(be=o,o=i),o===i&&(o=null),o!==i&&(a=Re())!==i?(125===t.charCodeAt(be)?(s=m,be++):(s=i,0===Ee&&Te(y)),s!==i?(_e=e,n=v(r,o),e=n):(be=e,e=i)):(be=e,e=i)):(be=e,e=i),e}function Le(){var e;return(e=function(){var e,n,r,o,a,s;return e=be,t.substr(be,6)===b?(n=b,be+=6):(n=i,0===Ee&&Te(_)),n===i&&(t.substr(be,4)===w?(n=w,be+=4):(n=i,0===Ee&&Te(x)),n===i&&(t.substr(be,4)===k?(n=k,be+=4):(n=i,0===Ee&&Te(E)))),n!==i&&Re()!==i?(r=be,44===t.charCodeAt(be)?(o=d,be++):(o=i,0===Ee&&Te(g)),o!==i&&(a=Re())!==i&&(s=qe())!==i?r=o=[o,a,s]:(be=r,r=i),r===i&&(r=null),r!==i?(_e=e,n=A(n,r),e=n):(be=e,e=i)):(be=e,e=i),e}())===i&&(e=function(){var e,n,r,o;return e=be,t.substr(be,6)===S?(n=S,be+=6):(n=i,0===Ee&&Te(O)),n!==i&&Re()!==i?(44===t.charCodeAt(be)?(r=d,be++):(r=i,0===Ee&&Te(g)),r!==i&&Re()!==i&&(o=$e())!==i?(_e=e,n=T(o),e=n):(be=e,e=i)):(be=e,e=i),e}())===i&&(e=function(){var e,n,r,o;return e=be,t.substr(be,13)===j?(n=j,be+=13):(n=i,0===Ee&&Te(C)),n!==i&&Re()!==i?(44===t.charCodeAt(be)?(r=d,be++):(r=i,0===Ee&&Te(g)),r!==i&&Re()!==i&&(o=$e())!==i?(_e=e,n=P(o),e=n):(be=e,e=i)):(be=e,e=i),e}())===i&&(e=function(){var e,n,r,o,a;if(e=be,t.substr(be,6)===F?(n=F,be+=6):(n=i,0===Ee&&Te(D)),n!==i)if(Re()!==i)if(44===t.charCodeAt(be)?(r=d,be++):(r=i,0===Ee&&Te(g)),r!==i)if(Re()!==i){if(o=[],(a=Ne())!==i)for(;a!==i;)o.push(a),a=Ne();else o=i;o!==i?(_e=e,n=L(o),e=n):(be=e,e=i)}else be=e,e=i;else be=e,e=i;else be=e,e=i;else be=e,e=i;return e}()),e}function Ne(){var e,n,r,o,a,s;return e=be,(n=Re())!==i&&(r=function(){var e,n,r,o;return e=be,n=be,61===t.charCodeAt(be)?(r=N,be++):(r=i,0===Ee&&Te($)),r!==i&&(o=ze())!==i?n=r=[r,o]:(be=n,n=i),(e=n!==i?t.substring(e,be):n)===i&&(e=qe()),e}())!==i&&Re()!==i?(123===t.charCodeAt(be)?(o=p,be++):(o=i,0===Ee&&Te(h)),o!==i&&Re()!==i&&(a=Ce())!==i&&Re()!==i?(125===t.charCodeAt(be)?(s=m,be++):(s=i,0===Ee&&Te(y)),s!==i?(_e=e,n=I(r,a),e=n):(be=e,e=i)):(be=e,e=i)):(be=e,e=i),e}function $e(){var e,n,r,o;if(e=be,(n=function(){var e,n,r;return e=be,t.substr(be,7)===R?(n=R,be+=7):(n=i,0===Ee&&Te(U)),n!==i&&Re()!==i&&(r=ze())!==i?(_e=e,n=M(r),e=n):(be=e,e=i),e}())===i&&(n=null),n!==i)if(Re()!==i){if(r=[],(o=Ne())!==i)for(;o!==i;)r.push(o),o=Ne();else r=i;r!==i?(_e=e,n=z(n,r),e=n):(be=e,e=i)}else be=e,e=i;else be=e,e=i;return e}function Ie(){var e,n;if(Ee++,e=[],q.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ee&&Te(W)),n!==i)for(;n!==i;)e.push(n),q.test(t.charAt(be))?(n=t.charAt(be),be++):(n=i,0===Ee&&Te(W));else e=i;return Ee--,e===i&&(n=i,0===Ee&&Te(B)),e}function Re(){var e,n,r;for(Ee++,e=be,n=[],r=Ie();r!==i;)n.push(r),r=Ie();return e=n!==i?t.substring(e,be):n,Ee--,e===i&&(n=i,0===Ee&&Te(H)),e}function Ue(){var e;return V.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ee&&Te(J)),e}function Me(){var e;return G.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ee&&Te(X)),e}function ze(){var e,n,r,o,a,s;if(e=be,48===t.charCodeAt(be)?(n=Y,be++):(n=i,0===Ee&&Te(Z)),n===i){if(n=be,r=be,K.test(t.charAt(be))?(o=t.charAt(be),be++):(o=i,0===Ee&&Te(Q)),o!==i){for(a=[],s=Ue();s!==i;)a.push(s),s=Ue();a!==i?r=o=[o,a]:(be=r,r=i)}else be=r,r=i;n=r!==i?t.substring(n,be):r}return n!==i&&(_e=e,n=ee(n)),e=n}function Be(){var e,n,r,o,a,s,l,u;return te.test(t.charAt(be))?(e=t.charAt(be),be++):(e=i,0===Ee&&Te(ne)),e===i&&(e=be,t.substr(be,2)===re?(n=re,be+=2):(n=i,0===Ee&&Te(ie)),n!==i&&(_e=e,n=oe()),(e=n)===i&&(e=be,t.substr(be,2)===ae?(n=ae,be+=2):(n=i,0===Ee&&Te(se)),n!==i&&(_e=e,n=le()),(e=n)===i&&(e=be,t.substr(be,2)===ue?(n=ue,be+=2):(n=i,0===Ee&&Te(ce)),n!==i&&(_e=e,n=fe()),(e=n)===i&&(e=be,t.substr(be,2)===pe?(n=pe,be+=2):(n=i,0===Ee&&Te(he)),n!==i&&(_e=e,n=de()),(e=n)===i&&(e=be,t.substr(be,2)===ge?(n=ge,be+=2):(n=i,0===Ee&&Te(me)),n!==i?(r=be,o=be,(a=Me())!==i&&(s=Me())!==i&&(l=Me())!==i&&(u=Me())!==i?o=a=[a,s,l,u]:(be=o,o=i),(r=o!==i?t.substring(r,be):o)!==i?(_e=e,n=ye(r),e=n):(be=e,e=i)):(be=e,e=i)))))),e}function qe(){var e,t,n;if(e=be,t=[],(n=Be())!==i)for(;n!==i;)t.push(n),n=Be();else t=i;return t!==i&&(_e=e,t=ve(t)),e=t}if((n=a())!==i&&be===t.length)return n;throw n!==i&&be<t.length&&Te({type:"end",description:"end of input"}),function(t,n,r,i){return null!==n&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r,i,o=new Array(e.length);for(i=0;i<e.length;i++)o[i]=e[i].description;return n=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],r=t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}(t)+'"':"end of input","Expected "+n+" but "+r+" found."}(n,r),n,r,i)}(null,ke,xe<t.length?t.charAt(xe):null,xe<t.length?Oe(xe,xe+1):Oe(xe,xe))}}}();function f(e,t,n){var i="string"==typeof e?f.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(f.formats,n),r(this,"_locale",{value:this._resolveLocale(t)});var o=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,t,n,o),s=this;this.format=function(t){try{return s._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}r(f,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),r(f,"__localeData__",{value:i(null)}),r(f,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");f.__localeData__[e.locale.toLowerCase()]=e}}),r(f,"__parse",{value:c.parse}),r(f,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),f.prototype.resolvedOptions=function(){return{locale:this._locale}},f.prototype._compilePattern=function(e,t,n,r){var i=new o(t,n,r);return i.compile(e)},f.prototype._findPluralRuleFunction=function(e){for(var t=f.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},f.prototype._format=function(e,n){var r,i,o,a,s,l,u="";for(r=0,i=e.length;r<i;r+=1)if("string"!=typeof(o=e[r])){if(a=o.id,!n||!t.call(n,a))throw(l=new Error("A value must be provided for: "+a)).variableId=a,l;s=n[a],o.options?u+=this._format(o.getOption(s),n):u+=o.format(s)}else u+=o;return u},f.prototype._mergeFormats=function(e,r){var o,a,s={};for(o in e)t.call(e,o)&&(s[o]=a=i(e[o]),r&&t.call(r,o)&&n(a,r[o]));return s},f.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(f.defaultLocale);var t,n,r,i,o=f.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(i=o[r.join("-")])return i.locale;r.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)};var p={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&r?"one":"other"}};f.__addLocaleData(p),f.defaultLocale="en";var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e){var t=this,n=arguments;if(!(this instanceof d))return new d(e);e=e||{},this.defaultNamespace=e.defaultNamespace||"",this.defaultSeparator=void 0===e.defaultSeparator?".":e.defaultSeparator,this.basePath=e.basePath||"locales/",this.fallbackLanguages=e.fallbackLanguages,this.localeFileResolver=e.localeFileResolver||function(e){return this.basePath+e+".json"},this.locales=e.locales||[],this.langs=e.langs,this.fallbackLocales=e.fallbackLocales||[];var r=function(e){t.loadLocales(t.fallbackLanguages,function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if((t=this.fallbackLocales).push.apply(t,r),e)return e(r)},!0)};e.languages||e.callback?this.loadLocales(e.languages,function(){var i=Array.from(n),o=function(n){e.callback&&e.callback.apply(t,[t.getFormatter(e.namespace),t.getFormatter.bind(t),i,n])};e.hasOwnProperty("fallbackLanguages")?r(o):o()}):e.hasOwnProperty("fallbackLanguages")&&r()}return d.prototype.getFormatter=function(e,t){var n=this,r=Array.isArray;return e=void 0===e?this.defaultNamespace:e,t=void 0===t?this.defaultSeparator:t,e=r(e)?e.join(t):e,function(i,o,a,s){var l=void 0,u=e;if(i&&!r(i)&&"object"===(void 0===i?"undefined":h(i))&&(o=i.values,a=i.formats,s=i.fallback,i=i.key),r(i)){var c=i.pop();u=i.join(t),i=c}else{var p=i.indexOf(t);!u&&p>-1&&(u=i.slice(0,p),i=i.slice(p+1))}function d(e){return e.some(function(e){return l=e[(u?u+t:"")+i]||function(e,t,n,r){var i=e;return t.split(n).every(function(e){return(i=i[e])&&"object"===(void 0===i?"undefined":h(i))})&&i[r]?i[r]:""}(e,u,t,i)}),l}if(d(n.locales),!l){if("function"==typeof s)return s({message:n.fallbackLocales.length&&d(n.fallbackLocales),langs:n.langs,namespace:u,separator:t,key:i,values:o,formats:a});if(!1!==s)return n.fallbackLocales.length&&d(n.fallbackLocales);throw new Error("Message not found for locales "+n.langs+(n.fallbackLanguages?" (with fallback languages "+n.fallbackLanguages+")":"")+" with key "+i+", namespace "+u+", and namespace separator "+t)}return o||a?new f(l,n.langs,a).format(o):l}},d.prototype.loadLocales=function(t,n,r){var i=this;return t=t||navigator.language||"en-US",t=Array.isArray(t)?t:[t],r||(this.langs=t),e(t.map(this.localeFileResolver,this),function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var a;r||(a=i.locales).push.apply(a,t),n&&n.apply(i,t)})},d}(simpleGetJson)});function getIMFFallbackResults({$p:e,lang:t,langs:n,langData:r,fallbackLanguages:i,resultsDisplay:o,basePath:a="",localeCallback:s=!1}){return new Promise((l,u)=>{const c=dist({languages:t,fallbackLanguages:i,localeFileResolver:e=>a+r.localeFileBasePath+n.find(t=>t.code===e).locale.$ref,async callback(...n){s&&s(...n)?l():(await((...n)=>{const[r]=n;return e.l10n||(e.l10n=r),o({l:r,lang:t,fallbackLanguages:i,imfLocales:c.locales,$p:e,basePath:a},...n)})(...n),l())}})})}function loadStylesheets(e,{before:t,after:n,favicon:r,canvas:i,image:o=!0,acceptErrors:a}={}){return e=Array.isArray(e)?e:[e],Promise.all(e.map(function(e){let s={};Array.isArray(e)&&([e,s={}]=e);let{favicon:l=r}=s;const{before:u=t,after:c=n,canvas:f=i,image:p=o}=s;function h(){u?u.before(d):c?c.after(d):document.head.appendChild(d)}const d=document.createElement("link");return new Promise((t,n)=>{let r=n;if(a&&(r="function"==typeof a?r=>{a({error:r,stylesheetURL:e,options:s,resolve:t,reject:n})}:t),e.endsWith(".css")?l=!1:e.endsWith(".ico")&&(l=!0),l){if(d.rel="shortcut icon",d.type="image/x-icon",!1===p)return d.href=e,h(),void t(d);const r=document.createElement("canvas");r.width=16,r.height=16;const i=r.getContext("2d"),o=document.createElement("img");return o.addEventListener("error",e=>{n(e)}),o.addEventListener("load",()=>{i.drawImage(o,0,0),d.href=f?r.toDataURL("image/x-icon"):e,h(),t(d)}),void(o.src=e)}d.rel="stylesheet",d.type="text/css",d.href=e,h(),d.addEventListener("error",e=>{r(e)}),d.addEventListener("load",()=>{t(d)})})}))}let win="undefined"!=typeof window&&window,doc="undefined"!=typeof document&&document,XmlSerializer="undefined"!=typeof XMLSerializer&&XMLSerializer;const possibleOptions=["$plugins","$map"],NS_HTML="http://www.w3.org/1999/xhtml",hyphenForCamelCase=/-([a-z])/g,ATTR_MAP={readonly:"readOnly"},BOOL_ATTS=["checked","defaultChecked","defaultSelected","disabled","indeterminate","open","readOnly","selected"],ATTR_DOM=BOOL_ATTS.concat(["accessKey","async","autocapitalize","autofocus","contentEditable","defaultValue","defer","draggable","formnovalidate","hidden","innerText","inputMode","ismap","multiple","novalidate","pattern","required","spellcheck","translate","value","willvalidate"]),NULLABLES=["dir","lang","max","min","title"],$=e=>doc.querySelector(e),$$=e=>[...doc.querySelectorAll(e)];function _getHTMLNodeName(e){return e.nodeName&&e.nodeName.toLowerCase()}function _applyAnyStylesheet(e){if(doc.createStyleSheet&&"style"===_getHTMLNodeName(e)){doc.createStyleSheet().cssText=e.cssText}}function _appendNode(e,t){const n=_getHTMLNodeName(e),r=_getHTMLNodeName(t);if(doc.createStyleSheet){if("script"===n)return void(e.text=t.nodeValue);if("style"===n)return void(e.cssText=t.nodeValue)}if("template"!==n)try{e.appendChild(t)}catch(i){if("select"===n&&"option"===r){try{e.add(t)}catch(n){e.add(t,null)}return}throw i}else e.content.appendChild(t)}function _addEvent(e,t,n,r){e.addEventListener(t,n,!!r)}function _createSafeReference(e,t,n){if(!n.match(/^\w+$/))throw new TypeError("Bad "+e);const r=doc.createElement("div");return r.innerHTML="&"+t+n+";",doc.createTextNode(r.innerHTML)}function _upperCase(e,t){return t.toUpperCase()}function _getType(e){if("string"==typeof e)return"string";if("object"==typeof e){if(null===e)return"null";if(Array.isArray(e))return"array";if("nodeType"in e){if(1===e.nodeType)return"element";if(11===e.nodeType)return"fragment"}return"object"}}function _fragReducer(e,t){return e.appendChild(t),e}function _replaceDefiner(e){return function(t){let n=e[""]?' xmlns="'+e[""]+'"':t||"";for(const t in e)e.hasOwnProperty(t)&&""!==t&&(n+=" xmlns:"+t+'="'+e[t]+'"');return n}}function _optsOrUndefinedJML(...e){return jml(...void 0===e[0]?e.slice(1):e)}function _jmlSingleArg(e){return jml(e)}function _copyOrderedAtts(e){const t={};return t[e[0]]=e[1],t}function _childrenToJML(e){return function(t,n){const r=e.childNodes[n],i=Array.isArray(t)?jml(...t):jml(t);r.parentNode.replaceChild(i,r)}}function _appendJML(e){return function(t){e.appendChild(jml(...t))}}function _appendJMLOrText(e){return function(t){"string"==typeof t?e.appendChild(doc.createTextNode(t)):e.appendChild(jml(...t))}}const jml=function e(...t){let n=doc.createDocumentFragment();function r(t){let r;for(r in t){if(!t.hasOwnProperty(r))continue;const s=t[r];if(r=r in ATTR_MAP?ATTR_MAP[r]:r,NULLABLES.includes(r))null!=s&&(n[r]=s);else if(ATTR_DOM.includes(r))n[r]=s;else switch(r){case"#":i[i.length]=_optsOrUndefinedJML(a,s);break;case"$shadow":{const{open:t,closed:r}=s;let{content:i,template:o}=s;const a=n.attachShadow({mode:r||!1===t?"closed":"open"});o?(Array.isArray(o)?o="object"===_getType(o[0])?e("template",...o,doc.body):e("template",o,doc.body):"string"==typeof o&&(o=$(o)),e(o.content.cloneNode(!0),a)):(i||(i=t||r),i&&"boolean"!=typeof i&&(Array.isArray(i)?e({"#":i},a):e(i,a)));break}case"is":break;case"$custom":Object.assign(n,s);break;case"$define":{const e=n.localName.toLowerCase(),t=!e.includes("-"),r=t?n.getAttribute("is"):e;if(customElements.get(r))break;const i=n=>{const r=a&&a.extends?doc.createElement(a.extends).constructor:t?doc.createElement(e).constructor:HTMLElement;return n?class extends r{constructor(){super(),n.call(this)}}:class extends r{}};let o,a,l;Array.isArray(s)?s.length<=2?([o,a]=s,"string"==typeof a?a={extends:a}:a.hasOwnProperty("extends")||(l=a),"object"==typeof o&&(l=o,o=i())):([o,l,a]=s,"string"==typeof a&&(a={extends:a})):"function"==typeof s?o=s:(l=s,o=i()),o.toString().startsWith("class")||(o=i(o)),!a&&t&&(a={extends:e}),l&&Object.assign(o.prototype,l),customElements.define(r,o,t?a:void 0);break}case"$symbol":{const[e,t]=s;if("function"==typeof t){const r=t.bind(n);"string"==typeof e?n[Symbol.for(e)]=r:n[e]=r}else{const r=t;r.elem=n,"string"==typeof e?n[Symbol.for(e)]=r:n[e]=r}break}case"$data":c(s);break;case"$attribute":{const e=3===s.length?doc.createAttributeNS(s[0],s[1]):doc.createAttribute(s[0]);e.value=s[s.length-1],i[i.length]=e;break}case"$text":{const e=doc.createTextNode(s);i[i.length]=e;break}case"$document":{const t=doc.implementation.createHTMLDocument();if(s.childNodes){s.childNodes.forEach(_childrenToJML(t));let e=s.childNodes.length;for(;t.childNodes[e];){const n=t.childNodes[e];n.parentNode.removeChild(n),e++}}else{if(s.$DOCTYPE){const n={$DOCTYPE:s.$DOCTYPE},r=e(n);t.firstChild.replaceWith(r)}const n=t.childNodes[1],r=n.childNodes[0],i=n.childNodes[1];if(s.title||s.head){const e=doc.createElement("meta");e.setAttribute("charset","utf-8"),r.appendChild(e)}s.title&&(t.title=s.title),s.head&&s.head.forEach(_appendJML(r)),s.body&&s.body.forEach(_appendJMLOrText(i))}i[i.length]=t;break}case"$DOCTYPE":{let e;e=s.entities||s.notations?{name:s.name,nodeName:s.name,nodeValue:null,nodeType:10,entities:s.entities.map(_jmlSingleArg),notations:s.notations.map(_jmlSingleArg),publicId:s.publicId,systemId:s.systemId}:doc.implementation.createDocumentType(s.name,s.publicId||"",s.systemId||""),i[i.length]=e;break}case"$ENTITY":break;case"$NOTATION":{const e={nodeName:s[0],publicID:s[1],systemID:s[2],nodeValue:null,nodeType:12};i[i.length]=e;break}case"$on":for(const e in s)if(s.hasOwnProperty(e)){let t=s[e];"function"==typeof t&&(t=[t,!1]),"function"==typeof t[0]&&_addEvent(n,e,t[0],t[1])}break;case"className":case"class":null!=s&&(n.className=s);break;case"dataset":{const e=(t,r)=>{let i="";const o=""!==r;Object.keys(t).forEach(a=>{const s=t[a];if(i=o?r+a.replace(hyphenForCamelCase,_upperCase).replace(/^([a-z])/,_upperCase):r+a.replace(hyphenForCamelCase,_upperCase),null===s||"object"!=typeof s)return null!=s&&(n.dataset[i]=s),void(i=r);e(s,i)})};e(s,"");break}case"innerHTML":null!=s&&(n.innerHTML=s);break;case"htmlFor":case"for":if("label"===o){null!=s&&(n.htmlFor=s);break}n.setAttribute(r,s);break;case"xmlns":break;default:if(r.match(/^on/)){n[r]=s;break}if("style"===r){if(null==s)break;if("object"==typeof s){for(const e in s)s.hasOwnProperty(e)&&null!=s[e]&&("float"===e?(n.style.cssFloat=s[e],n.style.styleFloat=s[e]):n.style[e.replace(hyphenForCamelCase,_upperCase)]=s[e]);break}n.setAttribute(r,s);break}const t=a&&a.$plugins&&a.$plugins.find(e=>e.name===r);if(t){t.set({element:n,attribute:{name:r,value:s}});break}n.setAttribute(r,s)}}}const i=[];let o,a,s=!1;if("object"===_getType(t[0])&&Object.keys(t[0]).some(e=>possibleOptions.includes(e))){if("child"!==(a=t[0]).state&&(s=!0,a.state="child"),a.$map&&!a.$map.root&&!1!==a.$map.root&&(a.$map={root:a.$map}),"$plugins"in a){if(!Array.isArray(a.$plugins))throw new Error("$plugins must be an array");a.$plugins.forEach(e=>{if(!e)throw new TypeError("Plugin must be an object");if(!e.name||!e.name.startsWith("$_"))throw new TypeError("Plugin object name must be present and begin with `$_`");if("function"!=typeof e.set)throw new TypeError("Plugin object must have a `set` method")})}t=t.slice(1)}const l=t.length,u=a&&a.$map&&a.$map.root,c=e=>{let t,r;!0===e?[t,r]=u:Array.isArray(e)?"string"==typeof e[0]?e.forEach(e=>{c(a.$map[e])}):(t=e[0]||u[0],r=e[1]||u[1]):/^\[object (?:Weak)?Map\]$/.test([].toString.call(e))?(t=e,r=u[1]):(t=u[0],r=e),t.set(n,r)};for(let e=0;e<l;e++){let s=t[e];switch(_getType(s)){case"null":if(e===l-1)return _applyAnyStylesheet(i[0]),i.length<=1?i[0]:i.reduce(_fragReducer,doc.createDocumentFragment());break;case"string":switch(s){case"!":i[i.length]=doc.createComment(t[++e]);break;case"?":s=t[++e];let r=t[++e];const a=r;if("object"==typeof a){r=[];for(const e in a)a.hasOwnProperty(e)&&r.push(e+'="'+a[e].replace(/"/g,'\\"')+'"');r=r.join(" ")}try{i[i.length]=doc.createProcessingInstruction(s,r)}catch(e){i[i.length]=doc.createComment("?"+s+" "+r+"?")}break;case"&":i[i.length]=_createSafeReference("entity","",t[++e]);break;case"#":i[i.length]=_createSafeReference("decimal",s,String(t[++e]));break;case"#x":i[i.length]=_createSafeReference("hexadecimal",s,t[++e]);break;case"![":try{i[i.length]=doc.createCDATASection(t[++e])}catch(n){i[i.length]=doc.createTextNode(t[e])}break;case"":i[i.length]=doc.createDocumentFragment();break;default:{o=s;const r=t[e+1];if("object"===_getType(r)&&r.is){const{is:e}=r;n=doc.createElementNS?doc.createElementNS(NS_HTML,o,{is:e}):doc.createElement(o,{is:e})}else n=doc.createElementNS?doc.createElementNS(NS_HTML,o):doc.createElement(o);i[i.length]=n;break}}break;case"object":const u=s;if(void 0!==u.xmlns){let e;e="object"==typeof u.xmlns?_replaceDefiner(u.xmlns):' xmlns="'+u.xmlns+'"',n=i[i.length-1]=(new DOMParser).parseFromString((new XmlSerializer).serializeToString(n).replace(' xmlns="'+NS_HTML+'"',e),"application/xml").documentElement}(u.$a?u.$a.map(_copyOrderedAtts):[u]).forEach(r);break;case"fragment":case"element":if(0===e&&(n=s),e===l-1||e===l-2&&null===t[e+1]){const e=i.length;for(let t=0;t<e;t++)_appendNode(s,i[t]);_applyAnyStylesheet(i[0])}else i[i.length]=s;break;case"array":const c=s,f=c.length;for(let e=0;e<f;e++){const r=c[e],i=typeof r;if(void 0===r)throw String("Parent array:"+JSON.stringify(t)+"; child: "+c+"; index:"+e);switch(i){case"string":case"number":case"boolean":_appendNode(n,doc.createTextNode(r));break;default:Array.isArray(r)?_appendNode(n,_optsOrUndefinedJML(a,...r)):r["#"]?_appendNode(n,_optsOrUndefinedJML(a,r["#"])):_appendNode(n,r)}}}}const f=i[0]||n;return a&&s&&a.$map&&a.$map.root&&c(!0),f};jml.toJML=function(e,t){t=t||{stringOutput:!1},"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/html"));const n=[];let r=n,i=0;function o(){{const e=new function(){return this};throw e.code=11,e}}function a(e,t){t.systemId.includes('"')&&t.systemId.includes("'")&&o();const n=t.publicId,r=t.systemId;r&&(e.systemId=r),n&&(e.publicId=n)}function s(e){r[i]=e,i++}function l(){s([]),r=r[i-1],i=0}function u(e,t){r=r[i-1][e],i=0,t&&(r=r[t])}return function e(n,c){const f="nodeType"in n?n.nodeType:null;c=Object.assign({},c);let p,h,d,g;function m(){d=r,g=i}function y(){r=d,i=g,i++}switch([2,3,4,7,8].includes(f)&&!/([\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD]|[\uD800-\uDBFF][\uDC00-\uDFFF])*$/.test(n.nodeValue)&&o(),f){case 1:m();const v=n.nodeName.toLowerCase();l(),s(v),h={};let b=!1;c[n.prefix||""]!==n.namespaceURI&&(c[n.prefix||""]=n.namespaceURI,n.prefix?h["xmlns:"+n.prefix]=n.namespaceURI:n.namespaceURI&&(h.xmlns=n.namespaceURI),b=!0),n.attributes.length?s(Array.from(n.attributes).reduce(function(e,t){return e[t.name]=t.value,e},h)):b&&s(h),(p=n.childNodes).length&&(l(),Array.from(p).forEach(function(t){e(t,c)})),y();break;case void 0:case 2:s({$attribute:[n.namespaceURI,n.name,n.value]});break;case 3:if(t.stripWhitespace&&/^\s+$/.test(n.nodeValue))return;s(n.nodeValue);break;case 4:n.nodeValue.includes("]]>")&&o(),s(["![",n.nodeValue]);break;case 5:s(["&",n.nodeName]);break;case 6:m(),h={},n.xmlEncoding||n.xmlVersion?h.$ENTITY={name:n.nodeName,version:n.xmlVersion,encoding:n.xmlEncoding}:(h.$ENTITY={name:n.nodeName},(n.publicId||n.systemId)&&(a(h.$ENTITY,n),n.notationName&&(h.$ENTITY.NDATA=n.notationName))),s(h),(p=n.childNodes).length&&(h.$ENTITY.childNodes=[],u("$ENTITY","childNodes"),Array.from(p).forEach(function(t){e(t,c)})),y();break;case 7:/^xml$/i.test(n.target)&&o(),n.target.includes("?>")&&o(),n.target.includes(":")&&o(),n.data.includes("?>")&&o(),s(["?",n.target,n.data]);break;case 8:(n.nodeValue.includes("--")||n.nodeValue.length&&n.nodeValue.lastIndexOf("-")===n.nodeValue.length-1)&&o(),s(["!",n.nodeValue]);break;case 9:m();const _={$document:{childNodes:[]}};t.xmlDeclaration&&(_.$document.xmlDeclaration={version:doc.xmlVersion,encoding:doc.xmlEncoding,standAlone:doc.xmlStandalone}),s(_),u("$document","childNodes"),(p=n.childNodes).length||o(),Array.from(p).forEach(function(t){e(t,c)}),y();break;case 10:m(),h={$DOCTYPE:{name:n.name}},n.internalSubset&&(h.internalSubset=n.internalSubset),/^(\u0020|\u000D|\u000A|[a-zA-Z0-9]|[-'()+,.\/:=?;!*#@$_%])*$/.test(n.publicId)||o(),a(h.$DOCTYPE,n),s(h);const w=n.entities;w&&w.length&&(h.$DOCTYPE.entities=[],u("$DOCTYPE","entities"),Array.from(w).forEach(function(t){e(t,c)}),r=d,i=g+1);const x=n.notations;x&&x.length&&(h.$DOCTYPE.notations=[],u("$DOCTYPE","notations"),Array.from(x).forEach(function(t){e(t,c)})),y();break;case 11:m(),s({"#":[]}),u("#"),p=n.childNodes,Array.from(p).forEach(function(t){e(t,c)}),y();break;case 12:a((h={$NOTATION:{name:n.nodeName}}).$NOTATION,n),s(h);break;default:throw new TypeError("Not an XML type")}}(e,{}),t.stringOutput?JSON.stringify(n[0]):n[0]},jml.toJMLString=function(e,t){return jml.toJML(e,Object.assign(t||{},{stringOutput:!0}))},jml.toDOM=function(...e){return jml(...e)},jml.toHTML=function(...e){return jml(...e).outerHTML},jml.toDOMString=function(...e){return jml.toHTML(...e)},jml.toXML=function(...e){const t=jml(...e);return(new XmlSerializer).serializeToString(t)},jml.toXMLDOMString=function(...e){return jml.toXML(...e)};class JamilihMap extends Map{get(e){return e="string"==typeof e?$(e):e,super.get.call(this,e)}set(e,t){return e="string"==typeof e?$(e):e,super.set.call(this,e,t)}invoke(e,t,...n){return e="string"==typeof e?$(e):e,this.get(e)[t](e,...n)}}class JamilihWeakMap extends WeakMap{get(e){return e="string"==typeof e?$(e):e,super.get(e)}set(e,t){return e="string"==typeof e?$(e):e,super.set(e,t)}invoke(e,t,...n){return e="string"==typeof e?$(e):e,this.get(e)[t](e,...n)}}jml.Map=JamilihMap,jml.WeakMap=JamilihWeakMap,jml.weak=function(e,...t){const n=new JamilihWeakMap;return[n,jml({$map:[n,e]},...t)]},jml.strong=function(e,...t){const n=new JamilihMap;return[n,jml({$map:[n,e]},...t)]},jml.symbol=jml.sym=jml.for=function(e,t){return(e="string"==typeof e?$(e):e)["symbol"==typeof t?t:Symbol.for(t)]},jml.command=function(e,t,n,...r){let i;return e="string"==typeof e?$(e):e,["symbol","string"].includes(typeof t)?"function"==typeof(i=jml.sym(e,t))?i(n,...r):i[n](...r):"function"==typeof(i=t.get(e))?i.call(e,n,...r):i[n](e,...r)},jml.setWindow=(e=>{win=e}),jml.setDocument=(e=>{doc=e,e&&e.body&&(body=e.body)}),jml.setXMLSerializer=(e=>{XmlSerializer=e}),jml.getWindow=(()=>win),jml.getDocument=(()=>doc),jml.getXMLSerializer=(()=>XmlSerializer);let body=doc&&doc.body;const nbsp="Â ",$$1=e=>document.querySelector(e),$e=(e,t)=>(e="string"==typeof e?$$1(e):e).querySelector(t);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},objectWithoutProperties=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n};const defaultLocale="en",localeStrings={en:{submit:"Submit",cancel:"Cancel",ok:"Ok"}};class Dialog{constructor({locale:e,localeObject:t}={}){this.setLocale({locale:e,localeObject:t})}setLocale({locale:e={},localeObject:t={}}){this.localeStrings=Object.assign({},localeStrings[defaultLocale],localeStrings[e],t)}makeDialog({atts:e={},children:t=[],close:n,remove:r=!0}){n&&(e.$on||(e.$on={}),e.$on.close||(e.$on.close=n));const i=jml("dialog",e,t,body);return dialogPolyfill.registerDialog(i),i.showModal(),r&&i.addEventListener("close",()=>{i.remove()}),i}makeSubmitDialog(e){let{submit:t,submitClass:n="submit"}=e,r=objectWithoutProperties(e,["submit","submitClass"]);const i=this.makeCancelDialog(r);return $e(i,`button.${r.cancelClass||"cancel"}`).before(jml("button",{class:n,$on:{click(e){t&&t.call(this,{e:e,dialog:i})}}},[this.localeStrings.submit]),nbsp.repeat(2)),i}makeCancelDialog(e){let{submit:t,cancel:n,cancelClass:r="cancel",submitClass:i="submit"}=e,o=objectWithoutProperties(e,["submit","cancel","cancelClass","submitClass"]);const a=this.makeDialog(o);return jml("div",{class:i},[["br"],["br"],["button",{class:r,$on:{click(e){e.preventDefault(),n&&!1===n.call(this,{e:e,dialog:a})||a.close()}}},[this.localeStrings.cancel]]],a),a}alert(e,t){e="string"==typeof e?{message:e}:e;const{ok:n=("object"==typeof t?!1!==t.ok:!1!==t),message:r,submitClass:i="submit"}=e;return new Promise((e,t)=>{const o=jml("dialog",[r,...n?[["br"],["br"],["div",{class:i},[["button",{$on:{click(){o.close(),e()}}},[this.localeStrings.ok]]]]]:[]],body);dialogPolyfill.registerDialog(o),o.showModal()})}prompt(e){e="string"==typeof e?{message:e}:e;const{message:t,submit:n}=e,r=objectWithoutProperties(e,["message","submit"]);return new Promise((e,i)=>{this.makeSubmitDialog(_extends({},r,{submit:function({e:t,dialog:r}){n&&n.call(this,{e:t,dialog:r}),r.close(),e($e(r,"input").value)},cancel(){i(new Error("cancelled"))},children:[["label",[t,nbsp.repeat(3),["input"]]]]}))})}confirm(e){e="string"==typeof e?{message:e}:e;const{message:t,submitClass:n="submit"}=e;return new Promise((e,r)=>{const i=jml("dialog",[t,["br"],["br"],["div",{class:n},[["button",{$on:{click(){i.close(),e()}}},[this.localeStrings.ok]],nbsp.repeat(2),["button",{$on:{click(){i.close(),r(new Error("cancelled"))}}},[this.localeStrings.cancel]]]]],body);dialogPolyfill.registerDialog(i),i.showModal()})}}const dialogs=new Dialog,getPreferredLanguages=({namespace:e,preferredLocale:t})=>{const n=localStorage.getItem(e+"-langCodes"),r=n&&JSON.parse(n)||[t],i=[];return r.forEach(e=>{const t=e.replace(/-.*$/,"");t===e?i.push(e):i.push(e,t)}),i};class Languages{constructor({langData:e}){this.langData=e}localeFromLangData(e){return this.langData["localization-strings"][e]}getLanguageFromCode(e){return this.localeFromLangData(e).languages[e]}getFieldNameFromPluginNameAndLocales({pluginName:e,locales:t,lf:n,targetLanguage:r,applicableFieldI18N:i,meta:o,metaApplicableField:a}){return n(["plugins",e,"fieldname"],_extends({},o,a,{applicableField:i,targetLanguage:r?this.getLanguageFromCode(r):""}))}getLanguageInfo({$p:e}){const t=this.langData.languages,n=e=>!!t.some(({code:t})=>t===e)&&e,r=e.get("lang",!0),i=navigator.languages.filter(n),o=i.length?i:[n(navigator.language)||"en-US"];return{lang:(r||o[0]).split(".").concat(o),langs:t,languageParam:r,fallbackLanguages:o}}}!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JsonRefs=e()}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(n){function r(e,t){k.isString(e)&&(e=T(e)),k.isString(t)&&(t=T(t));var n,r,i=h(k.isUndefined(t)?"":t);return D.indexOf(i.reference)>-1?r=i:(n=k.isUndefined(e)?void 0:h(e),k.isUndefined(n)?r=i:((r=n).path=T(A.join(n.path,i.path)),r.query=function(e,t){function n(e){k.forOwn(e,function(e,t){r[t]=e})}var r={};return n(O.parse(e||"")),n(O.parse(t||"")),0===Object.keys(r).length?void 0:O.stringify(r)}(n.query,i.query))),r.fragment=void 0,(-1===D.indexOf(r.reference)&&0===r.path.indexOf("../")?"../":"")+j.serialize(r)}function i(e){return F.indexOf(l(e))>-1}function o(e){return k.isUndefined(e.error)&&"invalid"!==e.type}function a(e,t){var n=e;return t.forEach(function(e){if(!(e in n))throw Error("JSON Pointer points to missing location: "+w(t));n=n[e]}),n}function s(e){return Object.keys(e).filter(function(e){return"$ref"!==e})}function l(e){var t;switch(e.uriDetails.reference){case"absolute":case"uri":t="remote";break;case"same-document":t="local";break;default:t=e.uriDetails.reference}return t}function u(e,t){var n=P[e],r=Promise.resolve(),i=k.cloneDeep(t.loaderOptions||{});return k.isUndefined(n)?(k.isUndefined(i.processContent)&&(i.processContent=function(e,t){t(void 0,JSON.parse(e.text))}),r=(r=S.load(decodeURI(e),i)).then(function(t){return P[e]={value:t},t}).catch(function(t){throw P[e]={error:t},t})):r=r.then(function(){if(k.isError(n.error))throw n.error;return n.value}),r.then(function(e){return k.cloneDeep(e)})}function c(e,t){var n=!0;try{if(!k.isPlainObject(e))throw new Error("obj is not an Object");if(!k.isString(e.$ref))throw new Error("obj.$ref is not a String")}catch(e){if(t)throw e;n=!1}return n}function f(e){return-1!==e.indexOf("://")||A.isAbsolute(e)?e:A.resolve(n.cwd(),e)}function p(e,t){e.error=t.message,e.missing=!0}function h(e){return j.parse(e)}function d(e,t){var n,i;if(e=k.isUndefined(e)?{}:k.cloneDeep(e),!k.isObject(e))throw new TypeError("options must be an Object");if(!k.isUndefined(e.resolveCirculars)&&!k.isBoolean(e.resolveCirculars))throw new TypeError("options.resolveCirculars must be a Boolean");if(!(k.isUndefined(e.filter)||k.isArray(e.filter)||k.isFunction(e.filter)||k.isString(e.filter)))throw new TypeError("options.filter must be an Array, a Function of a String");if(!k.isUndefined(e.includeInvalid)&&!k.isBoolean(e.includeInvalid))throw new TypeError("options.includeInvalid must be a Boolean");if(!k.isUndefined(e.location)&&!k.isString(e.location))throw new TypeError("options.location must be a String");if(!k.isUndefined(e.refPreProcessor)&&!k.isFunction(e.refPreProcessor))throw new TypeError("options.refPreProcessor must be a Function");if(!k.isUndefined(e.refPostProcessor)&&!k.isFunction(e.refPostProcessor))throw new TypeError("options.refPostProcessor must be a Function");if(!k.isUndefined(e.subDocPath)&&!k.isArray(e.subDocPath)&&!b(e.subDocPath))throw new TypeError("options.subDocPath must be an Array of path segments or a valid JSON Pointer");if(k.isUndefined(e.resolveCirculars)&&(e.resolveCirculars=!1),e.filter=function(e){var t,n;return k.isArray(e.filter)||k.isString(e.filter)?(n=k.isString(e.filter)?[e.filter]:e.filter,t=function(e){return n.indexOf(e.type)>-1||n.indexOf(l(e))>-1}):k.isFunction(e.filter)?t=e.filter:k.isUndefined(e.filter)&&(t=function(){return!0}),function(n,r){return("invalid"!==n.type||!0===e.includeInvalid)&&t(n,r)}}(e),k.isUndefined(e.location)&&(e.location=f("./root.json")),(n=e.location.split("#")).length>1&&(e.subDocPath="#"+n[1]),i=decodeURI(e.location)===e.location,e.location=r(e.location,void 0),i&&(e.location=decodeURI(e.location)),e.subDocPath=function(e){var t;return k.isArray(e.subDocPath)?t=e.subDocPath:k.isString(e.subDocPath)?t=_(e.subDocPath):k.isUndefined(e.subDocPath)&&(t=[]),t}(e),!k.isUndefined(t))try{a(t,e.subDocPath)}catch(e){throw e.message=e.message.replace("JSON Pointer","options.subDocPath"),e}return e}function g(e){if(!k.isArray(e))throw new TypeError("path must be an array");return e.map(function(e){return k.isString(e)||(e=JSON.stringify(e)),e.replace(/~1/g,"/").replace(/~0/g,"~")})}function m(e){if(!k.isArray(e))throw new TypeError("path must be an array");return e.map(function(e){return k.isString(e)||(e=JSON.stringify(e)),e.replace(/~/g,"~0").replace(/\//g,"~1")})}function y(e,t){var n={};if(!k.isArray(e)&&!k.isObject(e))throw new TypeError("obj must be an Array or an Object");return function e(t,n,r,i){function o(n,o){r.push(o),e(t,n,r,i),r.pop()}var a=!0;k.isFunction(i)&&(a=i(t,n,r)),-1===t.indexOf(n)&&(t.push(n),!1!==a&&(k.isArray(n)?n.forEach(function(e,t){o(e,t.toString())}):k.isObject(n)&&k.forOwn(n,function(e,t){o(e,t)})),t.pop())}(function(e,t){var n,r=[];return t.length>0&&(n=e,t.slice(0,t.length-1).forEach(function(e){e in n&&(n=n[e],r.push(n))})),r}(e,(t=d(t,e)).subDocPath),a(e,t.subDocPath),k.cloneDeep(t.subDocPath),function(e,r,i){var o,a,l=!0;return c(r)&&(k.isUndefined(t.refPreProcessor)||(r=t.refPreProcessor(k.cloneDeep(r),i)),o=v(r),k.isUndefined(t.refPostProcessor)||(o=t.refPostProcessor(o,i)),t.filter(o,i)&&(a=w(i),n[a]=o),s(r).length>0&&(l=!1)),l}),n}function v(e){var t,n,r,i={def:e};try{if(c(e,!0)){if(t=e.$ref,r=L[t],k.isUndefined(r)&&(r=L[t]=h(t)),i.uri=t,i.uriDetails=r,k.isUndefined(r.error)){i.type=l(i);try{["#","/"].indexOf(t[0])>-1?b(t,!0):t.indexOf("#")>-1&&b(r.fragment,!0)}catch(e){i.error=e.message,i.type="invalid"}}else i.error=i.uriDetails.error,i.type="invalid";(n=s(e)).length>0&&(i.warning="Extra JSON Reference properties will be ignored: "+n.join(", "))}else i.type="invalid"}catch(e){i.error=e.message,i.type="invalid"}return i}function b(e,t){var n,r=!0;try{if(!k.isString(e))throw new Error("ptr is not a String");if(""!==e){if(n=e.charAt(0),-1===["#","/"].indexOf(n))throw new Error("ptr must start with a / or #/");if("#"===n&&"#"!==e&&"/"!==e.charAt(1))throw new Error("ptr must start with a / or #/");if(e.match(C))throw new Error("ptr has invalid token(s)")}}catch(e){if(!0===t)throw e;r=!1}return r}function _(e){try{b(e,!0)}catch(e){throw new Error("ptr must be a JSON Pointer: "+e.message)}var t=e.split("/");return t.shift(),g(t)}function w(e,t){if(!k.isArray(e))throw new Error("path must be an Array");return(!1!==t?"#":"")+(e.length>0?"/":"")+m(e).join("/")}function x(e,t){var n=Promise.resolve();return n.then(function(){if(!k.isArray(e)&&!k.isObject(e))throw new TypeError("obj must be an Array or an Object");t=d(t,e),e=k.cloneDeep(e)}).then(function(){var n={deps:{},docs:{},refs:{}};return function e(t,n,a){var s,l,c=Promise.resolve(),h=w(n.subDocPath),d=f(n.location),g=A.dirname(n.location),m=d+h;return k.isUndefined(a.docs[d])&&(a.docs[d]=t),k.isUndefined(a.deps[m])&&(a.deps[m]={},s=y(t,n),k.forOwn(s,function(s,d){var y=f(n.location)+d,v=s.refdId=decodeURI(f(i(s)?r(g,s.uri):n.location)+"#"+(s.uri.indexOf("#")>-1?s.uri.split("#")[1]:""));a.refs[y]=s,o(s)&&(s.fqURI=v,a.deps[m][d===h?"#":d.replace(h+"/","#/")]=v,0!==y.indexOf(v+"/")?((l=k.cloneDeep(n)).subDocPath=k.isUndefined(s.uriDetails.fragment)?[]:_(decodeURI(s.uriDetails.fragment)),i(s)?(delete l.filter,l.location=v.split("#")[0],c=c.then(function(e,t){return function(){var n=f(t.location),r=e.docs[n];return k.isUndefined(r)?u(n,t).catch(function(t){return e.docs[n]=t,t}):Promise.resolve().then(function(){return r})}}(a,l))):c=c.then(function(){return t}),c=c.then(function(t,n,r){return function(i){if(k.isError(i))p(r,i);else try{return e(i,n,t).catch(function(e){p(r,e)})}catch(e){p(r,e)}}}(a,l,s))):s.circular=!0)})),c}(e,t,n).then(function(){return n})}).then(function(e){function n(i,a,s){var l,u=a.split("#"),c=e.refs[a];r[u[0]===t.location?"#"+u[1]:w(t.subDocPath.concat(s))]=c,!c.circular&&o(c)?(l=e.deps[c.refdId],0!==c.refdId.indexOf(i)&&Object.keys(l).forEach(function(e){n(c.refdId,c.refdId+e.substr(1),s.concat(_(e)))})):!c.circular&&c.error&&(c.error=c.error.replace("options.subDocPath","JSON Pointer"),c.error.indexOf("#")>-1&&(c.error=c.error.replace(c.uri.substr(c.uri.indexOf("#")),c.uri)),0!==c.error.indexOf("ENOENT:")&&0!==c.error.indexOf("Not Found")||(c.error="JSON Pointer points to missing location: "+c.uri))}var r={},s=[],l=[],u=new E.Graph,c=f(t.location),h=c+w(t.subDocPath),d=A.dirname(c);return Object.keys(e.deps).forEach(function(e){u.setNode(e)}),k.forOwn(e.deps,function(e,t){k.forOwn(e,function(e){u.setEdge(t,e)})}),(s=E.alg.findCycles(u)).forEach(function(e){e.forEach(function(e){-1===l.indexOf(e)&&l.push(e)})}),k.forOwn(e.deps,function(t,n){k.forOwn(t,function(t,r){var o,a=!1,u=n+r.slice(1),c=e.refs[n+r.slice(1)],f=i(c);l.indexOf(t)>-1&&s.forEach(function(e){a||(o=e.indexOf(t))>-1&&e.forEach(function(n){a||0===u.indexOf(n+"/")&&(f&&o!==e.length-1&&"#"===t[t.length-1]||(a=!0))})}),a&&(c.circular=!0)})}),k.forOwn(Object.keys(e.deps).reverse(),function(n){var r=e.deps[n],i=n.split("#"),o=e.docs[i[0]],s=_(i[1]);k.forOwn(r,function(n,r){var l=n.split("#"),u=e.docs[l[0]],c=s.concat(_(r)),f=e.refs[i[0]+w(c)];if(k.isUndefined(f.error)&&k.isUndefined(f.missing))if(!t.resolveCirculars&&f.circular)f.value=f.def;else{try{f.value=a(u,_(l[1]))}catch(e){return void p(f,e)}""===i[1]&&"#"===r?e.docs[i[0]]=f.value:function(e,t,n){a(e,t.slice(0,t.length-1))[t[t.length-1]]=n}(o,c,f.value)}})}),Object.keys(e.refs).forEach(function(t){var r,i,o=e.refs[t];"invalid"!==o.type&&("#"===o.fqURI[o.fqURI.length-1]&&"#"!==o.uri[o.uri.length-1]&&(o.fqURI=o.fqURI.substr(0,o.fqURI.length-1)),r=o.fqURI.split("/"),i=o.uri.split("/"),k.times(i.length-1,function(e){var t=i[i.length-e-1],n=r.length-e-1,o=r[n];"."!==t&&".."!==t||(t=o),r[n]=t}),o.fqURI=r.join("/"),0===o.fqURI.indexOf(c)?o.fqURI=o.fqURI.replace(c,""):0===o.fqURI.indexOf(d)&&(o.fqURI=o.fqURI.replace(d,"")),"/"===o.fqURI[0]&&(o.fqURI="."+o.fqURI)),0===t.indexOf(h)&&n(h,t,_(t.substr(h.length)))}),k.forOwn(e.refs,function(e){delete e.refdId,e.missing&&(e.error=e.error.split(": ")[0]+": "+e.def.$ref)}),{refs:r,resolved:e.docs[c]}})}var k=e("lodash"),E=e("graphlib"),A=e("path"),S=e("path-loader"),O=e("querystring"),T=e("slash"),j=e("uri-js"),C=/~(?:[^01]|$)/g,P={},F=["relative","remote"],D=["absolute","uri"],L={};"undefined"==typeof Promise&&e("native-promise-only"),t.exports.clearCache=function(){P={}},t.exports.decodePath=function(e){return g(e)},t.exports.encodePath=function(e){return m(e)},t.exports.findRefs=function(e,t){return y(e,t)},t.exports.findRefsAt=function(e,t){return function(e,t){var n=Promise.resolve();return n.then(function(){if(!k.isString(e))throw new TypeError("location must be a string");return k.isUndefined(t)&&(t={}),k.isObject(t)&&(t.location=e),u((t=d(t)).location,t)}).then(function(e){var n=k.cloneDeep(P[t.location]),r=k.cloneDeep(t),i=h(t.location);return k.isUndefined(n.refs)&&(delete r.filter,delete r.subDocPath,r.includeInvalid=!0,P[t.location].refs=y(e,r)),k.isUndefined(t.filter)||(r.filter=t.filter),k.isUndefined(i.fragment)?k.isUndefined(i.subDocPath)||(r.subDocPath=t.subDocPath):r.subDocPath=_(decodeURI(i.fragment)),{refs:y(e,r),value:e}})}(e,t)},t.exports.getRefDetails=function(e){return v(e)},t.exports.isPtr=function(e,t){return b(e,t)},t.exports.isRef=function(e,t){return function(e,t){return c(e,t)&&"invalid"!==v(e).type}(e,t)},t.exports.pathFromPtr=function(e){return _(e)},t.exports.pathToPtr=function(e,t){return w(e,t)},t.exports.resolveRefs=function(e,t){return x(e,t)},t.exports.resolveRefsAt=function(e,t){return function(e,t){var n=Promise.resolve();return n.then(function(){if(!k.isString(e))throw new TypeError("location must be a string");return k.isUndefined(t)&&(t={}),k.isObject(t)&&(t.location=e),u((t=d(t)).location,t)}).then(function(e){var n=k.cloneDeep(t),r=h(t.location);return k.isUndefined(r.fragment)||(n.subDocPath=_(decodeURI(r.fragment))),x(e,n).then(function(t){return{refs:t.refs,resolved:t.resolved,value:e}})})}(e,t)}}).call(this,e("_process"))},{_process:29,graphlib:3,lodash:23,"native-promise-only":24,path:25,"path-loader":26,querystring:32,slash:33,"uri-js":40}],2:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}void 0!==t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],3:[function(e,t,n){var r=e("./lib");t.exports={Graph:r.Graph,json:e("./lib/json"),alg:e("./lib/alg"),version:r.version}},{"./lib":19,"./lib/alg":10,"./lib/json":20}],4:[function(e,t,n){var r=e("../lodash");t.exports=function(e){function t(o){r.has(i,o)||(i[o]=!0,n.push(o),r.each(e.successors(o),t),r.each(e.predecessors(o),t))}var n,i={},o=[];return r.each(e.nodes(),function(e){n=[],t(e),n.length&&o.push(n)}),o}},{"../lodash":21}],5:[function(e,t,n){var r=e("../lodash");t.exports=function(e,t,n){r.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],a={};return r.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,i,o,a,s){r.has(o,n)||(o[n]=!0,i||s.push(n),r.each(a(n),function(n){e(t,n,i,o,a,s)}),i&&s.push(n))}(e,t,"post"===n,a,i,o)}),o}},{"../lodash":21}],6:[function(e,t,n){var r=e("./dijkstra"),i=e("../lodash");t.exports=function(e,t,n){return i.transform(e.nodes(),function(i,o){i[o]=r(e,o,t,n)},{})}},{"../lodash":21,"./dijkstra":7}],7:[function(e,t,n){var r=e("../lodash"),i=e("../data/priority-queue");t.exports=function(e,t,n,r){return function(e,t,n,r){var o,a,s={},l=new i;for(e.nodes().forEach(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},l.add(e,n)});l.size()>0&&(o=l.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(function(e){var t=e.v!==o?e.v:e.w,r=s[t],i=n(e),u=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);u<r.distance&&(r.distance=u,r.predecessor=o,l.decrease(t,u))});return s}(e,String(t),n||o,r||function(t){return e.outEdges(t)})};var o=r.constant(1)},{"../data/priority-queue":17,"../lodash":21}],8:[function(e,t,n){var r=e("../lodash"),i=e("./tarjan");t.exports=function(e){return r.filter(i(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},{"../lodash":21,"./tarjan":15}],9:[function(e,t,n){var r=e("../lodash");t.exports=function(e,t,n){return function(e,t,n){var r={},i=e.nodes();return i.forEach(function(e){r[e]={},r[e][e]={distance:0},i.forEach(function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})}),n(e).forEach(function(n){var i=n.v===e?n.w:n.v,o=t(n);r[e][i]={distance:o,predecessor:e}})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[e],i=t[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(e,t||i,n||function(t){return e.outEdges(t)})};var i=r.constant(1)},{"../lodash":21}],10:[function(e,t,n){t.exports={components:e("./components"),dijkstra:e("./dijkstra"),dijkstraAll:e("./dijkstra-all"),findCycles:e("./find-cycles"),floydWarshall:e("./floyd-warshall"),isAcyclic:e("./is-acyclic"),postorder:e("./postorder"),preorder:e("./preorder"),prim:e("./prim"),tarjan:e("./tarjan"),topsort:e("./topsort")}},{"./components":4,"./dijkstra":7,"./dijkstra-all":6,"./find-cycles":8,"./floyd-warshall":9,"./is-acyclic":11,"./postorder":12,"./preorder":13,"./prim":14,"./tarjan":15,"./topsort":16}],11:[function(e,t,n){var r=e("./topsort");t.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},{"./topsort":16}],12:[function(e,t,n){var r=e("./dfs");t.exports=function(e,t){return r(e,t,"post")}},{"./dfs":5}],13:[function(e,t,n){var r=e("./dfs");t.exports=function(e,t){return r(e,t,"pre")}},{"./dfs":5}],14:[function(e,t,n){var r=e("../lodash"),i=e("../graph"),o=e("../data/priority-queue");t.exports=function(e,t){var n,a=new i,s={},l=new o;if(0===e.nodeCount())return a;r.each(e.nodes(),function(e){l.add(e,Number.POSITIVE_INFINITY),a.setNode(e)}),l.decrease(e.nodes()[0],0);for(var u=!1;l.size()>0;){if(n=l.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(u)throw new Error("Input graph is not connected: "+e);u=!0}e.nodeEdges(n).forEach(function(e){var r=e.v===n?e.w:e.v,i=l.priority(r);if(void 0!==i){var o=t(e);o<i&&(s[r]=n,l.decrease(r,o))}})}return a}},{"../data/priority-queue":17,"../graph":18,"../lodash":21}],15:[function(e,t,n){var r=e("../lodash");t.exports=function(e){function t(s){var l=o[s]={onStack:!0,lowlink:n,index:n++};if(i.push(s),e.successors(s).forEach(function(e){r.has(o,e)?o[e].onStack&&(l.lowlink=Math.min(l.lowlink,o[e].index)):(t(e),l.lowlink=Math.min(l.lowlink,o[e].lowlink))}),l.lowlink===l.index){var u,c=[];do{u=i.pop(),o[u].onStack=!1,c.push(u)}while(s!==u);a.push(c)}}var n=0,i=[],o={},a=[];return e.nodes().forEach(function(e){r.has(o,e)||t(e)}),a}},{"../lodash":21}],16:[function(e,t,n){function r(e){var t={},n={},r=[];if(o.each(e.sinks(),function a(s){if(o.has(n,s))throw new i;o.has(t,s)||(n[s]=!0,t[s]=!0,o.each(e.predecessors(s),a),delete n[s],r.push(s))}),o.size(t)!==e.nodeCount())throw new i;return r}function i(){}var o=e("../lodash");t.exports=r,r.CycleException=i},{"../lodash":21}],17:[function(e,t,n){function r(){this._arr=[],this._keyIndices={}}var i=e("../lodash");t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(e){return e.key})},r.prototype.has=function(e){return i.has(this._keyIndices,e)},r.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!i.has(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},r.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},r.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},r.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},r.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},{"../lodash":21}],18:[function(e,t,n){function r(e){this._isDirected=!l.has(e,"directed")||e.directed,this._isMultigraph=!!l.has(e,"multigraph")&&e.multigraph,this._isCompound=!!l.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=l.constant(void 0),this._defaultEdgeLabelFn=l.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[c]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(e,t){e[t]?e[t]++:e[t]=1}function o(e,t){--e[t]||delete e[t]}function a(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}return i+f+o+f+(l.isUndefined(r)?u:r)}function s(e,t){return a(e,t.v,t.w,t.name)}var l=e("./lodash");t.exports=r;var u="\0",c="\0",f="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(e){return this._label=e,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(e){return l.isFunction(e)||(e=l.constant(e)),this._defaultNodeLabelFn=e,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return l.keys(this._nodes)},r.prototype.sources=function(){return l.filter(this.nodes(),l.bind(function(e){return l.isEmpty(this._in[e])},this))},r.prototype.sinks=function(){return l.filter(this.nodes(),l.bind(function(e){return l.isEmpty(this._out[e])},this))},r.prototype.setNodes=function(e,t){var n=arguments;return l.each(e,l.bind(function(e){n.length>1?this.setNode(e,t):this.setNode(e)},this)),this},r.prototype.setNode=function(e,t){return l.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=c,this._children[e]={},this._children[c][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},r.prototype.node=function(e){return this._nodes[e]},r.prototype.hasNode=function(e){return l.has(this._nodes,e)},r.prototype.removeNode=function(e){var t=this;if(l.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],l.each(this.children(e),l.bind(function(e){this.setParent(e)},this)),delete this._children[e]),l.each(l.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],l.each(l.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},r.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l.isUndefined(t))t=c;else{for(var n=t+="";!l.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},r.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},r.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==c)return t}},r.prototype.children=function(e){if(l.isUndefined(e)&&(e=c),this._isCompound){var t=this._children[e];if(t)return l.keys(t)}else{if(e===c)return this.nodes();if(this.hasNode(e))return[]}},r.prototype.predecessors=function(e){var t=this._preds[e];if(t)return l.keys(t)},r.prototype.successors=function(e){var t=this._sucs[e];if(t)return l.keys(t)},r.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return l.union(t,this.successors(e))},r.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph()),l.each(this._nodes,l.bind(function(n,r){e(r)&&t.setNode(r,n)},this)),l.each(this._edgeObjs,l.bind(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,this.edge(e))},this));var n=this,r={};return this._isCompound&&l.each(t.nodes(),function(e){t.setParent(e,function e(i){var o=n.parent(i);return void 0===o||t.hasNode(o)?(r[i]=o,o):o in r?r[o]:e(o)}(e))}),t},r.prototype.setDefaultEdgeLabel=function(e){return l.isFunction(e)||(e=l.constant(e)),this._defaultEdgeLabelFn=e,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return l.values(this._edgeObjs)},r.prototype.setPath=function(e,t){var n=this,r=arguments;return l.reduce(e,function(e,i){return r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i}),this},r.prototype.setEdge=function(){var e,t,n,r,o=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(e=s.v,t=s.w,n=s.name,2===arguments.length&&(r=arguments[1],o=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,l.isUndefined(n)||(n=""+n);var u=a(this._isDirected,e,t,n);if(l.has(this._edgeLabels,u))return o&&(this._edgeLabels[u]=r),this;if(!l.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[u]=o?r:this._defaultEdgeLabelFn(e,t,n);var c=function(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}(this._isDirected,e,t,n);return e=c.v,t=c.w,Object.freeze(c),this._edgeObjs[u]=c,i(this._preds[t],e),i(this._sucs[e],t),this._in[t][u]=c,this._out[e][u]=c,this._edgeCount++,this},r.prototype.edge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):a(this._isDirected,e,t,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):a(this._isDirected,e,t,n);return l.has(this._edgeLabels,r)},r.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):a(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[t],e),o(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},r.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=l.values(n);return t?l.filter(r,function(e){return e.v===t}):r}},r.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=l.values(n);return t?l.filter(r,function(e){return e.w===t}):r}},r.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},{"./lodash":21}],19:[function(e,t,n){t.exports={Graph:e("./graph"),version:e("./version")}},{"./graph":18,"./version":22}],20:[function(e,t,n){var r=e("./lodash"),i=e("./graph");t.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:function(e){return r.map(e.nodes(),function(t){var n=e.node(t),i=e.parent(t),o={v:t};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}(e),edges:function(e){return r.map(e.edges(),function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.isUndefined(t.name)||(i.name=t.name),r.isUndefined(n)||(i.value=n),i})}(e)};return r.isUndefined(e.graph())||(t.value=r.clone(e.graph())),t},read:function(e){var t=new i(e.options).setGraph(e.value);return r.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),r.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},{"./graph":18,"./lodash":21}],21:[function(e,t,n){var r;if("function"==typeof e)try{r=e("lodash")}catch(e){}r||(r=window._),t.exports=r},{lodash:23}],22:[function(e,t,n){t.exports="2.1.1"},{}],23:[function(e,t,n){(function(e){(function(){function r(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function u(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function c(e,t){return!(null==e||!e.length)&&_(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function p(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function h(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function d(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function g(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function m(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){return e.match(bt)||[]}function v(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function b(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function _(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):b(e,x,n)}function w(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function x(e){return e!=e}function k(e,t){var n=null==e?0:e.length;return n?O(e,t)/n:ge}function E(e){return function(t){return null==t?W:t[e]}}function A(e){return function(t){return null==e?W:e[t]}}function S(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function O(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==W&&(n=n===W?o:n+o)}return n}function T(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function j(e){return function(t){return e(t)}}function C(e,t){return p(t,function(t){return e[t]})}function P(e,t){return e.has(t)}function F(e,t){for(var n=-1,r=e.length;++n<r&&_(t,e[n],0)>-1;);return n}function D(e,t){for(var n=e.length;n--&&_(t,e[n],0)>-1;);return n}function L(e){return"\\"+tn[e]}function N(e){return Xt.test(e)}function $(e){return Yt.test(e)}function I(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function R(e,t){return function(n){return e(t(n))}}function U(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==G||(e[n]=G,o[i++]=n)}return o}function M(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function z(e){return N(e)?function(e){for(var t=Jt.lastIndex=0;Jt.test(e);)++t;return t}(e):bn(e)}function B(e){return N(e)?function(e){return e.match(Jt)||[]}(e):function(e){return e.split("")}(e)}function q(e){return e.match(Gt)||[]}var W,H=200,V="Expected a function",J="__lodash_hash_undefined__",G="__lodash_placeholder__",X=1,Y=2,Z=4,K=1,Q=2,ee=1,te=2,ne=4,re=8,ie=16,oe=32,ae=64,se=128,le=256,ue=512,ce=800,fe=16,pe=1/0,he=9007199254740991,de=1.7976931348623157e308,ge=NaN,me=4294967295,ye=me-1,ve=me>>>1,be=[["ary",se],["bind",ee],["bindKey",te],["curry",re],["curryRight",ie],["flip",ue],["partial",oe],["partialRight",ae],["rearg",le]],_e="[object Arguments]",we="[object Array]",xe="[object AsyncFunction]",ke="[object Boolean]",Ee="[object Date]",Ae="[object DOMException]",Se="[object Error]",Oe="[object Function]",Te="[object GeneratorFunction]",je="[object Map]",Ce="[object Number]",Pe="[object Null]",Fe="[object Object]",De="[object Proxy]",Le="[object RegExp]",Ne="[object Set]",$e="[object String]",Ie="[object Symbol]",Re="[object Undefined]",Ue="[object WeakMap]",Me="[object ArrayBuffer]",ze="[object DataView]",Be="[object Float32Array]",qe="[object Float64Array]",We="[object Int8Array]",He="[object Int16Array]",Ve="[object Int32Array]",Je="[object Uint8Array]",Ge="[object Uint8ClampedArray]",Xe="[object Uint16Array]",Ye="[object Uint32Array]",Ze=/\b__p \+= '';/g,Ke=/\b(__p \+=) '' \+/g,Qe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,et=/&(?:amp|lt|gt|quot|#39);/g,tt=/[&<>"']/g,nt=RegExp(et.source),rt=RegExp(tt.source),it=/<%-([\s\S]+?)%>/g,ot=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,st=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/,ut=/^\./,ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ft=/[\\^$.*+?()[\]{}|]/g,pt=RegExp(ft.source),ht=/^\s+|\s+$/g,dt=/^\s+/,gt=/\s+$/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yt=/\{\n\/\* \[wrapped with (.+)\] \*/,vt=/,? & /,bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/\\(\\)?/g,wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xt=/\w*$/,kt=/^[-+]0x[0-9a-f]+$/i,Et=/^0b[01]+$/i,At=/^\[object .+?Constructor\]$/,St=/^0o[0-7]+$/i,Ot=/^(?:0|[1-9]\d*)$/,Tt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jt=/($^)/,Ct=/['\n\r\u2028\u2029\\]/g,Pt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ft="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dt="["+Ft+"]",Lt="["+Pt+"]",Nt="[a-z\\xdf-\\xf6\\xf8-\\xff]",$t="\\ud83c[\\udffb-\\udfff]",It="(?:\\ud83c[\\udde6-\\uddff]){2}",Rt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ut="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Mt="(?:"+Nt+"|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])",zt="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Bt="[\\ufe0e\\ufe0f]?"+zt+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",It,Rt].join("|")+")[\\ufe0e\\ufe0f]?"+zt+")*",qt="(?:"+["[\\u2700-\\u27bf]",It,Rt].join("|")+")"+Bt,Wt="(?:"+["[^\\ud800-\\udfff]"+Lt+"?",Lt,It,Rt,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("['â]","g"),Vt=RegExp(Lt,"g"),Jt=RegExp($t+"(?="+$t+")|"+Wt+Bt,"g"),Gt=RegExp([Ut+"?"+Nt+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[Dt,Ut,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[Dt,Ut+Mt,"$"].join("|")+")",Ut+"?"+Mt+"+(?:['â](?:d|ll|m|re|s|t|ve))?",Ut+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",qt].join("|"),"g"),Xt=RegExp("[\\u200d\\ud800-\\udfff"+Pt+"\\ufe0e\\ufe0f]"),Yt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,Qt={};Qt[Be]=Qt[qe]=Qt[We]=Qt[He]=Qt[Ve]=Qt[Je]=Qt[Ge]=Qt[Xe]=Qt[Ye]=!0,Qt[_e]=Qt[we]=Qt[Me]=Qt[ke]=Qt[ze]=Qt[Ee]=Qt[Se]=Qt[Oe]=Qt[je]=Qt[Ce]=Qt[Fe]=Qt[Le]=Qt[Ne]=Qt[$e]=Qt[Ue]=!1;var en={};en[_e]=en[we]=en[Me]=en[ze]=en[ke]=en[Ee]=en[Be]=en[qe]=en[We]=en[He]=en[Ve]=en[je]=en[Ce]=en[Fe]=en[Le]=en[Ne]=en[$e]=en[Ie]=en[Je]=en[Ge]=en[Xe]=en[Ye]=!0,en[Se]=en[Oe]=en[Ue]=!1;var tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nn=parseFloat,rn=parseInt,on="object"==typeof e&&e&&e.Object===Object&&e,an="object"==typeof self&&self&&self.Object===Object&&self,sn=on||an||Function("return this")(),ln="object"==typeof n&&n&&!n.nodeType&&n,un=ln&&"object"==typeof t&&t&&!t.nodeType&&t,cn=un&&un.exports===ln,fn=cn&&on.process,pn=function(){try{return fn&&fn.binding&&fn.binding("util")}catch(e){}}(),hn=pn&&pn.isArrayBuffer,dn=pn&&pn.isDate,gn=pn&&pn.isMap,mn=pn&&pn.isRegExp,yn=pn&&pn.isSet,vn=pn&&pn.isTypedArray,bn=E("length"),_n=A({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),wn=A({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),xn=A({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),kn=function e(t){function n(e){if(eo(e)&&!Ws(e)&&!(e instanceof Pt)){if(e instanceof bt)return e;if(Wo.call(e,"__wrapped__"))return Si(e)}return new bt(e)}function A(){}function bt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=W}function Pt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function Ft(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Dt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Lt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Lt;++t<n;)this.add(e[t])}function $t(e){var t=this.__data__=new Dt(e);this.size=t.size}function It(e,t){var n=Ws(e),r=!n&&qs(e),i=!n&&!r&&Vs(e),o=!n&&!r&&!i&&Zs(e),a=n||r||i||o,s=a?T(e.length,Io):[],l=s.length;for(var u in e)!t&&!Wo.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||pi(u,l))||s.push(u);return s}function Rt(e){var t=e.length;return t?e[Yn(0,t-1)]:W}function Ut(e,t,n){(n===W||Vi(e[t],n))&&(n!==W||t in e)||Wt(e,t,n)}function Mt(e,t,n){var r=e[t];Wo.call(e,t)&&Vi(r,n)&&(n!==W||t in e)||Wt(e,t,n)}function zt(e,t){for(var n=e.length;n--;)if(Vi(e[n][0],t))return n;return-1}function Bt(e,t,n,r){return Ba(e,function(e,i,o){t(r,e,n(e),o)}),r}function qt(e,t){return e&&Or(t,go(t),e)}function Wt(e,t,n){"__proto__"==t&&la?la(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Jt(e,t){for(var n=-1,r=t.length,i=Co(r),o=null==e;++n<r;)i[n]=o?W:po(e,t[n]);return i}function Gt(e,t,n){return e==e&&(n!==W&&(e=e<=n?e:n),t!==W&&(e=e>=t?e:t)),e}function Xt(e,t,n,r,i,o){var a,l=t&X,u=t&Y,c=t&Z;if(n&&(a=i?n(e,r,i,o):n(e)),a!==W)return a;if(!Qi(e))return e;var f=Ws(e);if(f){if(a=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Wo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Sr(e,a)}else{var p=es(e),h=p==Oe||p==Te;if(Vs(e))return vr(e,l);if(p==Fe||p==_e||h&&!i){if(a=u||h?{}:ci(e),!l)return u?function(e,t){return Or(e,Qa(e),t)}(e,function(e,t){return e&&Or(t,mo(t),e)}(a,e)):function(e,t){return Or(e,Ka(e),t)}(e,qt(a,e))}else{if(!en[p])return i?e:{};a=function(e,t,n,r){var i=e.constructor;switch(t){case Me:return br(e);case ke:case Ee:return new i(+e);case ze:return function(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case Be:case qe:case We:case He:case Ve:case Je:case Ge:case Xe:case Ye:return xr(e,r);case je:return _r(e,r,n);case Ce:case $e:return new i(e);case Le:return function(e){var t=new e.constructor(e.source,xt.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ne:return wr(e,r,n);case Ie:return function(e){return Ua?No(Ua.call(e)):{}}(e)}}(e,p,Xt,l)}}o||(o=new $t);var d=o.get(e);if(d)return d;o.set(e,a);var g=f?W:(c?u?ni:ti:u?mo:go)(e);return s(g||e,function(r,i){g&&(r=e[i=r]),Mt(a,i,Xt(r,t,n,i,e,o))}),a}function Yt(e,t,n){var r=n.length;if(null==e)return!r;for(e=No(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===W&&!(i in e)||!o(a))return!1}return!0}function tn(e,t,n){if("function"!=typeof e)throw new Ro(V);return rs(function(){e.apply(W,n)},t)}function on(e,t,n,r){var i=-1,o=c,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=p(t,j(n))),r?(o=f,a=!1):t.length>=H&&(o=P,a=!1,t=new Nt(t));e:for(;++i<s;){var h=e[i],d=null==n?h:n(h);if(h=r||0!==h?h:0,a&&d==d){for(var g=u;g--;)if(t[g]===d)continue e;l.push(h)}else o(t,d,r)||l.push(h)}return l}function an(e,t){var n=!0;return Ba(e,function(e,r,i){return n=!!t(e,r,i)}),n}function ln(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===W?a==a&&!io(a):n(a,s)))var s=a,l=o}return l}function un(e,t){var n=[];return Ba(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function fn(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=fi),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?fn(s,t-1,n,r,i):h(i,s):r||(i[i.length]=s)}return i}function pn(e,t){return e&&Wa(e,t,go)}function bn(e,t){return e&&Ha(e,t,go)}function En(e,t){return u(t,function(t){return Yi(e[t])})}function An(e,t){for(var n=0,r=(t=mr(t,e)).length;null!=e&&n<r;)e=e[Ei(t[n++])];return n&&n==r?e:W}function Sn(e,t,n){var r=t(e);return Ws(e)?r:h(r,n(e))}function On(e){return null==e?e===W?Re:Pe:sa&&sa in No(e)?function(e){var t=Wo.call(e,sa),n=e[sa];try{e[sa]=W}catch(e){}var r=Jo.call(e);return t?e[sa]=n:delete e[sa],r}(e):function(e){return Jo.call(e)}(e)}function Tn(e,t){return e>t}function jn(e,t){return null!=e&&Wo.call(e,t)}function Cn(e,t){return null!=e&&t in No(e)}function Pn(e,t,n){for(var r=n?f:c,i=e[0].length,o=e.length,a=o,s=Co(o),l=1/0,u=[];a--;){var h=e[a];a&&t&&(h=p(h,j(t))),l=_a(h.length,l),s[a]=!n&&(t||i>=120&&h.length>=120)?new Nt(a&&h):W}h=e[0];var d=-1,g=s[0];e:for(;++d<i&&u.length<l;){var m=h[d],y=t?t(m):m;if(m=n||0!==m?m:0,!(g?P(g,y):r(u,y,n))){for(a=o;--a;){var v=s[a];if(!(v?P(v,y):r(e[a],y,n)))continue e}g&&g.push(y),u.push(m)}}return u}function Fn(e,t,n){var r=null==(e=_i(e,t=mr(t,e)))?e:e[Ei(Pi(t))];return null==r?W:o(r,e,n)}function Dn(e){return eo(e)&&On(e)==_e}function Ln(e,t,n,r,i){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Ws(e),s=Ws(t),l=a?we:es(e),u=s?we:es(t),c=(l=l==_e?Fe:l)==Fe,f=(u=u==_e?Fe:u)==Fe,p=l==u;if(p&&Vs(e)){if(!Vs(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new $t),a||Zs(e)?Qr(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case ze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Me:return!(e.byteLength!=t.byteLength||!o(new Qo(e),new Qo(t)));case ke:case Ee:case Ce:return Vi(+e,+t);case Se:return e.name==t.name&&e.message==t.message;case Le:case $e:return e==t+"";case je:var s=I;case Ne:var l=r&K;if(s||(s=M),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=Q,a.set(e,t);var c=Qr(s(e),s(t),r,i,o,a);return a.delete(e),c;case Ie:if(Ua)return Ua.call(e)==Ua.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&K)){var h=c&&Wo.call(e,"__wrapped__"),d=f&&Wo.call(t,"__wrapped__");if(h||d){var g=h?e.value():e,m=d?t.value():t;return o||(o=new $t),i(g,m,n,r,o)}}return!!p&&(o||(o=new $t),function(e,t,n,r,i,o){var a=n&K,s=ti(e),l=s.length;if(l!=ti(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Wo.call(t,c)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++u<l;){var d=e[c=s[u]],g=t[c];if(r)var m=a?r(g,d,c,t,e,o):r(d,g,c,e,t,o);if(!(m===W?d===g||i(d,g,n,r,o):m)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var y=e.constructor,v=t.constructor;y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}(e,t,n,r,Ln,i))}function Nn(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=No(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(u===W&&!(l in e))return!1}else{var f=new $t;if(r)var p=r(u,c,l,e,t,f);if(!(p===W?Ln(c,u,K|Q,r,f):p))return!1}}return!0}function $n(e){return!(!Qi(e)||function(e){return!!Vo&&Vo in e}(e))&&(Yi(e)?Yo:At).test(Ai(e))}function In(e){return"function"==typeof e?e:null==e?ko:"object"==typeof e?Ws(e)?qn(e[0],e[1]):Bn(e):Oo(e)}function Rn(e){if(!mi(e))return va(e);var t=[];for(var n in No(e))Wo.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Un(e){if(!Qi(e))return function(e){var t=[];if(null!=e)for(var n in No(e))t.push(n);return t}(e);var t=mi(e),n=[];for(var r in e)("constructor"!=r||!t&&Wo.call(e,r))&&n.push(r);return n}function Mn(e,t){return e<t}function zn(e,t){var n=-1,r=Ji(e)?Co(e.length):[];return Ba(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Bn(e){var t=si(e);return 1==t.length&&t[0][2]?vi(t[0][0],t[0][1]):function(n){return n===e||Nn(n,e,t)}}function qn(e,t){return di(e)&&yi(t)?vi(Ei(e),t):function(n){var r=po(n,e);return r===W&&r===t?ho(n,e):Ln(t,r,K|Q)}}function Wn(e,t,n,r,i){e!==t&&Wa(t,function(o,a){if(Qi(o))i||(i=new $t),function(e,t,n,r,i,o,a){var s=e[n],l=t[n],u=a.get(l);if(u)Ut(e,n,u);else{var c=o?o(s,l,n+"",e,t,a):W,f=c===W;if(f){var p=Ws(l),h=!p&&Vs(l),d=!p&&!h&&Zs(l);c=l,p||h||d?Ws(s)?c=s:Gi(s)?c=Sr(s):h?(f=!1,c=vr(l,!0)):d?(f=!1,c=xr(l,!0)):c=[]:no(l)||qs(l)?(c=s,qs(s)?c=co(s):(!Qi(s)||r&&Yi(s))&&(c=ci(l))):f=!1}f&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),Ut(e,n,c)}}(e,t,a,n,Wn,r,i);else{var s=r?r(e[a],o,a+"",e,t,i):W;s===W&&(s=o),Ut(e,a,s)}},mo)}function Hn(e,t){var n=e.length;if(n)return pi(t+=t<0?n:0,n)?e[t]:W}function Vn(e,t,n){var r=-1;return t=p(t.length?t:[ko],j(oi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(zn(e,function(e,n,i){return{criteria:p(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=kr(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Jn(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=An(e,a);n(s,a)&&Qn(o,mr(a,e),s)}return o}function Gn(e,t,n,r){var i=r?w:_,o=-1,a=t.length,s=e;for(e===t&&(t=Sr(t)),n&&(s=p(e,j(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&ia.call(s,l,1),ia.call(e,l,1);return e}function Xn(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;pi(i)?ia.call(e,i,1):lr(e,i)}}return e}function Yn(e,t){return e+ha(ka()*(t-e+1))}function Zn(e,t){var n="";if(!e||t<1||t>he)return n;do{t%2&&(n+=e),(t=ha(t/2))&&(e+=e)}while(t);return n}function Kn(e,t){return is(bi(e,t,ko),e+"")}function Qn(e,t,n,r){if(!Qi(e))return e;for(var i=-1,o=(t=mr(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Ei(t[i]),u=n;if(i!=a){var c=s[l];(u=r?r(c,l,s):W)===W&&(u=Qi(c)?c:pi(t[i+1])?[]:{})}Mt(s,l,u),s=s[l]}return e}function er(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Co(i);++r<i;)o[r]=e[r+t];return o}function tr(e,t){var n;return Ba(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function nr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=ve){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!io(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return rr(e,t,ko,n)}function rr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!=t,s=null===t,l=io(t),u=t===W;i<o;){var c=ha((i+o)/2),f=n(e[c]),p=f!==W,h=null===f,d=f==f,g=io(f);if(a)var m=r||d;else m=u?d&&(r||p):s?d&&p&&(r||!h):l?d&&p&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);m?i=c+1:o=c}return _a(o,ye)}function ir(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Vi(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function or(e){return"number"==typeof e?e:io(e)?ge:+e}function ar(e){if("string"==typeof e)return e;if(Ws(e))return p(e,ar)+"";if(io(e))return Ma?Ma.call(e):"";var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function sr(e,t,n){var r=-1,i=c,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=f;else if(o>=H){var u=t?null:Ya(e);if(u)return M(u);a=!1,i=P,l=new Nt}else l=t?[]:s;e:for(;++r<o;){var p=e[r],h=t?t(p):p;if(p=n||0!==p?p:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(p)}else i(l,h,n)||(l!==s&&l.push(h),s.push(p))}return s}function lr(e,t){return null==(e=_i(e,t=mr(t,e)))||delete e[Ei(Pi(t))]}function ur(e,t,n,r){return Qn(e,t,n(An(e,t)),r)}function cr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?er(e,r?0:o,r?o+1:i):er(e,r?o+1:0,r?i:o)}function fr(e,t){var n=e;return n instanceof Pt&&(n=n.value()),d(t,function(e,t){return t.func.apply(t.thisArg,h([e],t.args))},n)}function pr(e,t,n){var r=e.length;if(r<2)return r?sr(e[0]):[];for(var i=-1,o=Co(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=on(o[i]||a,e[s],t,n));return sr(fn(o,1),t,n)}function hr(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:W;n(a,e[r],s)}return a}function dr(e){return Gi(e)?e:[]}function gr(e){return"function"==typeof e?e:ko}function mr(e,t){return Ws(e)?e:di(e,t)?[e]:os(fo(e))}function yr(e,t,n){var r=e.length;return n=n===W?r:n,!t&&n>=r?e:er(e,t,n)}function vr(e,t){if(t)return e.slice();var n=e.length,r=ea?ea(n):new e.constructor(n);return e.copy(r),r}function br(e){var t=new e.constructor(e.byteLength);return new Qo(t).set(new Qo(e)),t}function _r(e,t,n){return d(t?n(I(e),X):I(e),r,new e.constructor)}function wr(e,t,n){return d(t?n(M(e),X):M(e),i,new e.constructor)}function xr(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function kr(e,t){if(e!==t){var n=e!==W,r=null===e,i=e==e,o=io(e),a=t!==W,s=null===t,l=t==t,u=io(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Er(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=ba(o-a,0),c=Co(l+u),f=!r;++s<l;)c[s]=t[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function Ar(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=ba(o-s,0),f=Co(c+u),p=!r;++i<c;)f[i]=e[i];for(var h=i;++l<u;)f[h+l]=t[l];for(;++a<s;)(p||i<o)&&(f[h+n[a]]=e[i++]);return f}function Sr(e,t){var n=-1,r=e.length;for(t||(t=Co(r));++n<r;)t[n]=e[n];return t}function Or(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):W;l===W&&(l=e[s]),i?Wt(n,s,l):Mt(n,s,l)}return n}function Tr(e,t){return function(n,r){var i=Ws(n)?a:Bt,o=t?t():{};return i(n,e,oi(r,2),o)}}function jr(e){return Kn(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:W,a=i>2?n[2]:W;for(o=e.length>3&&"function"==typeof o?(i--,o):W,a&&hi(n[0],n[1],a)&&(o=i<3?W:o,i=1),t=No(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function Cr(e,t){return function(n,r){if(null==n)return n;if(!Ji(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=No(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Pr(e){return function(t,n,r){for(var i=-1,o=No(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function Fr(e){return function(t){var n=N(t=fo(t))?B(t):W,r=n?n[0]:t.charAt(0),i=n?yr(n,1).join(""):t.slice(1);return r[e]()+i}}function Dr(e){return function(t){return d(wo(_o(t).replace(Ht,"")),e,"")}}function Lr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=za(e.prototype),r=e.apply(n,t);return Qi(r)?r:n}}function Nr(e,t,n){var r=Lr(e);return function i(){for(var a=arguments.length,s=Co(a),l=a,u=ii(i);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:U(s,u);return(a-=c.length)<n?Vr(e,t,Rr,i.placeholder,W,s,c,W,W,n-a):o(this&&this!==sn&&this instanceof i?r:e,this,s)}}function $r(e){return function(t,n,r){var i=No(t);if(!Ji(t)){var o=oi(n,3);t=go(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:W}}function Ir(e){return ei(function(t){var n=t.length,r=n,i=bt.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Ro(V);if(i&&!a&&"wrapper"==ri(o))var a=new bt([],!0)}for(r=a?r:n;++r<n;){var s=ri(o=t[r]),l="wrapper"==s?Za(o):W;a=l&&gi(l[0])&&l[1]==(se|re|oe|le)&&!l[4].length&&1==l[9]?a[ri(l[0])].apply(a,l[3]):1==o.length&&gi(o)?a[s]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Ws(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Rr(e,t,n,r,i,o,a,s,l,u){var c=t&se,f=t&ee,p=t&te,h=t&(re|ie),d=t&ue,g=p?W:Lr(e);return function m(){for(var y=arguments.length,v=Co(y),b=y;b--;)v[b]=arguments[b];if(h)var _=ii(m),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(v,_);if(r&&(v=Er(v,r,i,h)),o&&(v=Ar(v,o,a,h)),y-=w,h&&y<u){var x=U(v,_);return Vr(e,t,Rr,m.placeholder,n,v,x,s,l,u-y)}var k=f?n:this,E=p?k[e]:e;return y=v.length,s?v=function(e,t){for(var n=e.length,r=_a(t.length,n),i=Sr(e);r--;){var o=t[r];e[r]=pi(o,n)?i[o]:W}return e}(v,s):d&&y>1&&v.reverse(),c&&l<y&&(v.length=l),this&&this!==sn&&this instanceof m&&(E=g||Lr(E)),E.apply(k,v)}}function Ur(e,t){return function(n,r){return function(e,t,n,r){return pn(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function Mr(e,t){return function(n,r){var i;if(n===W&&r===W)return t;if(n!==W&&(i=n),r!==W){if(i===W)return r;"string"==typeof n||"string"==typeof r?(n=ar(n),r=ar(r)):(n=or(n),r=or(r)),i=e(n,r)}return i}}function zr(e){return ei(function(t){return t=p(t,j(oi())),Kn(function(n){var r=this;return e(t,function(e){return o(e,r,n)})})})}function Br(e,t){var n=(t=t===W?" ":ar(t)).length;if(n<2)return n?Zn(t,e):t;var r=Zn(t,pa(e/z(t)));return N(t)?yr(B(r),0,e).join(""):r.slice(0,e)}function qr(e,t,n,r){var i=t&ee,a=Lr(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=r.length,f=Co(c+l),p=this&&this!==sn&&this instanceof t?a:e;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++s];return o(p,i?n:this,f)}}function Wr(e){return function(t,n,r){return r&&"number"!=typeof r&&hi(t,n,r)&&(n=r=W),t=ao(t),n===W?(n=t,t=0):n=ao(n),function(e,t,n,r){for(var i=-1,o=ba(pa((t-e)/(n||1)),0),a=Co(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=r===W?t<n?1:-1:ao(r),e)}}function Hr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=uo(t),n=uo(n)),e(t,n)}}function Vr(e,t,n,r,i,o,a,s,l,u){var c=t&re;t|=c?oe:ae,(t&=~(c?ae:oe))&ne||(t&=~(ee|te));var f=[e,t,i,c?o:W,c?a:W,c?W:o,c?W:a,s,l,u],p=n.apply(W,f);return gi(e)&&ns(p,f),p.placeholder=r,wi(p,e,t)}function Jr(e){var t=Lo[e];return function(e,n){if(e=uo(e),n=null==n?0:_a(so(n),292)){var r=(fo(e)+"e").split("e");return+((r=(fo(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Gr(e){return function(t){var n=es(t);return n==je?I(t):n==Ne?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return p(t,function(t){return[t,e[t]]})}(t,e(t))}}function Xr(e,t,n,r,i,o,a,s){var l=t&te;if(!l&&"function"!=typeof e)throw new Ro(V);var u=r?r.length:0;if(u||(t&=~(oe|ae),r=i=W),a=a===W?a:ba(so(a),0),s=s===W?s:so(s),u-=i?i.length:0,t&ae){var c=r,f=i;r=i=W}var p=l?W:Za(e),h=[e,t,n,r,i,c,f,o,a,s];if(p&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ee|te|se),a=r==se&&n==re||r==se&&n==le&&e[7].length<=t[8]||r==(se|le)&&t[7].length<=t[8]&&n==re;if(!o&&!a)return e;r&ee&&(e[2]=t[2],i|=n&ee?0:ne);var s=t[3];if(s){var l=e[3];e[3]=l?Er(l,s,t[4]):s,e[4]=l?U(e[3],G):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Ar(l,s,t[6]):s,e[6]=l?U(e[5],G):t[6]),(s=t[7])&&(e[7]=s),r&se&&(e[8]=null==e[8]?t[8]:_a(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],!(s=h[9]=h[9]===W?l?0:e.length:ba(h[9]-u,0))&&t&(re|ie)&&(t&=~(re|ie)),t&&t!=ee)d=t==re||t==ie?Nr(e,t,s):t!=oe&&t!=(ee|oe)||i.length?Rr.apply(W,h):qr(e,t,n,r);else var d=function(e,t,n){var r=t&ee,i=Lr(e);return function t(){return(this&&this!==sn&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return wi((p?Va:ns)(d,h),e,t)}function Yr(e,t,n,r){return e===W||Vi(e,zo[n])&&!Wo.call(r,n)?t:e}function Zr(e,t,n,r,i,o){return Qi(e)&&Qi(t)&&(o.set(t,e),Wn(e,t,W,Zr,o),o.delete(t)),e}function Kr(e){return no(e)?W:e}function Qr(e,t,n,r,i,o){var a=n&K,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,f=!0,p=n&Q?new Nt:W;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],d=t[c];if(r)var g=a?r(d,h,c,t,e,o):r(h,d,c,e,t,o);if(g!==W){if(g)continue;f=!1;break}if(p){if(!m(t,function(e,t){if(!P(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)})){f=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ei(e){return is(bi(e,W,ji),e+"")}function ti(e){return Sn(e,go,Ka)}function ni(e){return Sn(e,mo,Qa)}function ri(e){for(var t=e.name+"",n=Fa[t],r=Wo.call(Fa,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function ii(e){return(Wo.call(n,"placeholder")?n:e).placeholder}function oi(){var e=n.iteratee||Eo;return e=e===Eo?In:e,arguments.length?e(arguments[0],arguments[1]):e}function ai(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function si(e){for(var t=go(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,yi(i)]}return t}function li(e,t){var n=function(e,t){return null==e?W:e[t]}(e,t);return $n(n)?n:W}function ui(e,t,n){for(var r=-1,i=(t=mr(t,e)).length,o=!1;++r<i;){var a=Ei(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ki(i)&&pi(a,i)&&(Ws(e)||qs(e))}function ci(e){return"function"!=typeof e.constructor||mi(e)?{}:za(ta(e))}function fi(e){return Ws(e)||qs(e)||!!(oa&&e&&e[oa])}function pi(e,t){return!!(t=null==t?he:t)&&("number"==typeof e||Ot.test(e))&&e>-1&&e%1==0&&e<t}function hi(e,t,n){if(!Qi(n))return!1;var r=typeof t;return!!("number"==r?Ji(n)&&pi(t,n.length):"string"==r&&t in n)&&Vi(n[t],e)}function di(e,t){if(Ws(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!io(e))||lt.test(e)||!st.test(e)||null!=t&&e in No(t)}function gi(e){var t=ri(e),r=n[t];if("function"!=typeof r||!(t in Pt.prototype))return!1;if(e===r)return!0;var i=Za(r);return!!i&&e===i[0]}function mi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||zo)}function yi(e){return e==e&&!Qi(e)}function vi(e,t){return function(n){return null!=n&&n[e]===t&&(t!==W||e in No(n))}}function bi(e,t,n){return t=ba(t===W?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=ba(r.length-t,0),s=Co(a);++i<a;)s[i]=r[t+i];i=-1;for(var l=Co(t+1);++i<t;)l[i]=r[i];return l[t]=n(s),o(e,this,l)}}function _i(e,t){return t.length<2?e:An(e,er(t,0,-1))}function wi(e,t,n){var r=t+"";return is(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(mt,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return s(be,function(n){var r="_."+n[0];t&n[1]&&!c(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(yt);return t?t[1].split(vt):[]}(r),n)))}function xi(e){var t=0,n=0;return function(){var r=wa(),i=fe-(r-n);if(n=r,i>0){if(++t>=ce)return arguments[0]}else t=0;return e.apply(W,arguments)}}function ki(e,t){var n=-1,r=e.length,i=r-1;for(t=t===W?r:t;++n<t;){var o=Yn(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Ei(e){if("string"==typeof e||io(e))return e;var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function Ai(e){if(null!=e){try{return qo.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Si(e){if(e instanceof Pt)return e.clone();var t=new bt(e.__wrapped__,e.__chain__);return t.__actions__=Sr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Oi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:so(n);return i<0&&(i=ba(r+i,0)),b(e,oi(t,3),i)}function Ti(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==W&&(i=so(n),i=n<0?ba(r+i,0):_a(i,r-1)),b(e,oi(t,3),i,!0)}function ji(e){return null!=e&&e.length?fn(e,1):[]}function Ci(e){return e&&e.length?e[0]:W}function Pi(e){var t=null==e?0:e.length;return t?e[t-1]:W}function Fi(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}function Di(e){return null==e?e:Ea.call(e)}function Li(e){if(!e||!e.length)return[];var t=0;return e=u(e,function(e){if(Gi(e))return t=ba(e.length,t),!0}),T(t,function(t){return p(e,E(t))})}function Ni(e,t){if(!e||!e.length)return[];var n=Li(e);return null==t?n:p(n,function(e){return o(t,W,e)})}function $i(e){var t=n(e);return t.__chain__=!0,t}function Ii(e,t){return t(e)}function Ri(e,t){return(Ws(e)?s:Ba)(e,oi(t,3))}function Ui(e,t){return(Ws(e)?function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:qa)(e,oi(t,3))}function Mi(e,t){return(Ws(e)?p:zn)(e,oi(t,3))}function zi(e,t,n){return t=n?W:t,t=e&&null==t?e.length:t,Xr(e,se,W,W,W,W,t)}function Bi(e,t){var n;if("function"!=typeof t)throw new Ro(V);return e=so(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=W),n}}function qi(e,t,n){function r(t){var n=l,r=u;return l=u=W,d=t,f=e.apply(r,n)}function i(e){var n=e-h;return h===W||n>=t||n<0||m&&e-d>=c}function o(){var e=Fs();if(i(e))return a(e);p=rs(o,function(e){var n=t-(e-h);return m?_a(n,c-(e-d)):n}(e))}function a(e){return p=W,y&&l?r(e):(l=u=W,f)}function s(){var e=Fs(),n=i(e);if(l=arguments,u=this,h=e,n){if(p===W)return function(e){return d=e,p=rs(o,t),g?r(e):f}(h);if(m)return p=rs(o,t),r(h)}return p===W&&(p=rs(o,t)),f}var l,u,c,f,p,h,d=0,g=!1,m=!1,y=!0;if("function"!=typeof e)throw new Ro(V);return t=uo(t)||0,Qi(n)&&(g=!!n.leading,c=(m="maxWait"in n)?ba(uo(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),s.cancel=function(){p!==W&&Xa(p),d=0,l=h=u=p=W},s.flush=function(){return p===W?f:a(Fs())},s}function Wi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ro(V);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wi.Cache||Lt),n}function Hi(e){if("function"!=typeof e)throw new Ro(V);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vi(e,t){return e===t||e!=e&&t!=t}function Ji(e){return null!=e&&Ki(e.length)&&!Yi(e)}function Gi(e){return eo(e)&&Ji(e)}function Xi(e){if(!eo(e))return!1;var t=On(e);return t==Se||t==Ae||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Yi(e){if(!Qi(e))return!1;var t=On(e);return t==Oe||t==Te||t==xe||t==De}function Zi(e){return"number"==typeof e&&e==so(e)}function Ki(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=he}function Qi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}function to(e){return"number"==typeof e||eo(e)&&On(e)==Ce}function no(e){if(!eo(e)||On(e)!=Fe)return!1;var t=ta(e);if(null===t)return!0;var n=Wo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&qo.call(n)==Go}function ro(e){return"string"==typeof e||!Ws(e)&&eo(e)&&On(e)==$e}function io(e){return"symbol"==typeof e||eo(e)&&On(e)==Ie}function oo(e){if(!e)return[];if(Ji(e))return ro(e)?B(e):Sr(e);if(aa&&e[aa])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[aa]());var t=es(e);return(t==je?I:t==Ne?M:vo)(e)}function ao(e){return e?(e=uo(e))===pe||e===-pe?(e<0?-1:1)*de:e==e?e:0:0===e?e:0}function so(e){var t=ao(e),n=t%1;return t==t?n?t-n:t:0}function lo(e){return e?Gt(so(e),0,me):0}function uo(e){if("number"==typeof e)return e;if(io(e))return ge;if(Qi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ht,"");var n=Et.test(e);return n||St.test(e)?rn(e.slice(2),n?2:8):kt.test(e)?ge:+e}function co(e){return Or(e,mo(e))}function fo(e){return null==e?"":ar(e)}function po(e,t,n){var r=null==e?W:An(e,t);return r===W?n:r}function ho(e,t){return null!=e&&ui(e,t,Cn)}function go(e){return Ji(e)?It(e):Rn(e)}function mo(e){return Ji(e)?It(e,!0):Un(e)}function yo(e,t){if(null==e)return{};var n=p(ni(e),function(e){return[e]});return t=oi(t),Jn(e,n,function(e,n){return t(e,n[0])})}function vo(e){return null==e?[]:C(e,go(e))}function bo(e){return kl(fo(e).toLowerCase())}function _o(e){return(e=fo(e))&&e.replace(Tt,_n).replace(Vt,"")}function wo(e,t,n){return e=fo(e),(t=n?W:t)===W?$(e)?q(e):y(e):e.match(t)||[]}function xo(e){return function(){return e}}function ko(e){return e}function Eo(e){return In("function"==typeof e?e:Xt(e,X))}function Ao(e,t,n){var r=go(t),i=En(t,r);null!=n||Qi(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=En(t,go(t)));var o=!(Qi(n)&&"chain"in n&&!n.chain),a=Yi(e);return s(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Sr(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,h([this.value()],arguments))})}),e}function So(){}function Oo(e){return di(e)?E(Ei(e)):function(e){return function(t){return An(t,e)}}(e)}function To(){return[]}function jo(){return!1}var Co=(t=null==t?sn:kn.defaults(sn.Object(),t,kn.pick(sn,Zt))).Array,Po=t.Date,Fo=t.Error,Do=t.Function,Lo=t.Math,No=t.Object,$o=t.RegExp,Io=t.String,Ro=t.TypeError,Uo=Co.prototype,Mo=Do.prototype,zo=No.prototype,Bo=t["__core-js_shared__"],qo=Mo.toString,Wo=zo.hasOwnProperty,Ho=0,Vo=function(){var e=/[^.]+$/.exec(Bo&&Bo.keys&&Bo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Jo=zo.toString,Go=qo.call(No),Xo=sn._,Yo=$o("^"+qo.call(Wo).replace(ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zo=cn?t.Buffer:W,Ko=t.Symbol,Qo=t.Uint8Array,ea=Zo?Zo.allocUnsafe:W,ta=R(No.getPrototypeOf,No),na=No.create,ra=zo.propertyIsEnumerable,ia=Uo.splice,oa=Ko?Ko.isConcatSpreadable:W,aa=Ko?Ko.iterator:W,sa=Ko?Ko.toStringTag:W,la=function(){try{var e=li(No,"defineProperty");return e({},"",{}),e}catch(e){}}(),ua=t.clearTimeout!==sn.clearTimeout&&t.clearTimeout,ca=Po&&Po.now!==sn.Date.now&&Po.now,fa=t.setTimeout!==sn.setTimeout&&t.setTimeout,pa=Lo.ceil,ha=Lo.floor,da=No.getOwnPropertySymbols,ga=Zo?Zo.isBuffer:W,ma=t.isFinite,ya=Uo.join,va=R(No.keys,No),ba=Lo.max,_a=Lo.min,wa=Po.now,xa=t.parseInt,ka=Lo.random,Ea=Uo.reverse,Aa=li(t,"DataView"),Sa=li(t,"Map"),Oa=li(t,"Promise"),Ta=li(t,"Set"),ja=li(t,"WeakMap"),Ca=li(No,"create"),Pa=ja&&new ja,Fa={},Da=Ai(Aa),La=Ai(Sa),Na=Ai(Oa),$a=Ai(Ta),Ia=Ai(ja),Ra=Ko?Ko.prototype:W,Ua=Ra?Ra.valueOf:W,Ma=Ra?Ra.toString:W,za=function(){function e(){}return function(t){if(!Qi(t))return{};if(na)return na(t);e.prototype=t;var n=new e;return e.prototype=W,n}}();n.templateSettings={escape:it,evaluate:ot,interpolate:at,variable:"",imports:{_:n}},n.prototype=A.prototype,n.prototype.constructor=n,bt.prototype=za(A.prototype),bt.prototype.constructor=bt,Pt.prototype=za(A.prototype),Pt.prototype.constructor=Pt,Ft.prototype.clear=function(){this.__data__=Ca?Ca(null):{},this.size=0},Ft.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ft.prototype.get=function(e){var t=this.__data__;if(Ca){var n=t[e];return n===J?W:n}return Wo.call(t,e)?t[e]:W},Ft.prototype.has=function(e){var t=this.__data__;return Ca?t[e]!==W:Wo.call(t,e)},Ft.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ca&&t===W?J:t,this},Dt.prototype.clear=function(){this.__data__=[],this.size=0},Dt.prototype.delete=function(e){var t=this.__data__,n=zt(t,e);return!(n<0||(n==t.length-1?t.pop():ia.call(t,n,1),--this.size,0))},Dt.prototype.get=function(e){var t=this.__data__,n=zt(t,e);return n<0?W:t[n][1]},Dt.prototype.has=function(e){return zt(this.__data__,e)>-1},Dt.prototype.set=function(e,t){var n=this.__data__,r=zt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Lt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ft,map:new(Sa||Dt),string:new Ft}},Lt.prototype.delete=function(e){var t=ai(this,e).delete(e);return this.size-=t?1:0,t},Lt.prototype.get=function(e){return ai(this,e).get(e)},Lt.prototype.has=function(e){return ai(this,e).has(e)},Lt.prototype.set=function(e,t){var n=ai(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Nt.prototype.add=Nt.prototype.push=function(e){return this.__data__.set(e,J),this},Nt.prototype.has=function(e){return this.__data__.has(e)},$t.prototype.clear=function(){this.__data__=new Dt,this.size=0},$t.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},$t.prototype.get=function(e){return this.__data__.get(e)},$t.prototype.has=function(e){return this.__data__.has(e)},$t.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Dt){var r=n.__data__;if(!Sa||r.length<H-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Lt(r)}return n.set(e,t),this.size=n.size,this};var Ba=Cr(pn),qa=Cr(bn,!0),Wa=Pr(),Ha=Pr(!0),Va=Pa?function(e,t){return Pa.set(e,t),e}:ko,Ja=la?function(e,t){return la(e,"toString",{configurable:!0,enumerable:!1,value:xo(t),writable:!0})}:ko,Ga=Kn,Xa=ua||function(e){return sn.clearTimeout(e)},Ya=Ta&&1/M(new Ta([,-0]))[1]==pe?function(e){return new Ta(e)}:So,Za=Pa?function(e){return Pa.get(e)}:So,Ka=da?function(e){return null==e?[]:(e=No(e),u(da(e),function(t){return ra.call(e,t)}))}:To,Qa=da?function(e){for(var t=[];e;)h(t,Ka(e)),e=ta(e);return t}:To,es=On;(Aa&&es(new Aa(new ArrayBuffer(1)))!=ze||Sa&&es(new Sa)!=je||Oa&&"[object Promise]"!=es(Oa.resolve())||Ta&&es(new Ta)!=Ne||ja&&es(new ja)!=Ue)&&(es=function(e){var t=On(e),n=t==Fe?e.constructor:W,r=n?Ai(n):"";if(r)switch(r){case Da:return ze;case La:return je;case Na:return"[object Promise]";case $a:return Ne;case Ia:return Ue}return t});var ts=Bo?Yi:jo,ns=xi(Va),rs=fa||function(e,t){return sn.setTimeout(e,t)},is=xi(Ja),os=function(e){var t=Wi(function(e){var t=[];return ut.test(e)&&t.push(""),e.replace(ct,function(e,n,r,i){t.push(r?i.replace(_t,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(),as=Kn(function(e,t){return Gi(e)?on(e,fn(t,1,Gi,!0)):[]}),ss=Kn(function(e,t){var n=Pi(t);return Gi(n)&&(n=W),Gi(e)?on(e,fn(t,1,Gi,!0),oi(n,2)):[]}),ls=Kn(function(e,t){var n=Pi(t);return Gi(n)&&(n=W),Gi(e)?on(e,fn(t,1,Gi,!0),W,n):[]}),us=Kn(function(e){var t=p(e,dr);return t.length&&t[0]===e[0]?Pn(t):[]}),cs=Kn(function(e){var t=Pi(e),n=p(e,dr);return t===Pi(n)?t=W:n.pop(),n.length&&n[0]===e[0]?Pn(n,oi(t,2)):[]}),fs=Kn(function(e){var t=Pi(e),n=p(e,dr);return(t="function"==typeof t?t:W)&&n.pop(),n.length&&n[0]===e[0]?Pn(n,W,t):[]}),ps=Kn(Fi),hs=ei(function(e,t){var n=null==e?0:e.length,r=Jt(e,t);return Xn(e,p(t,function(e){return pi(e,n)?+e:e}).sort(kr)),r}),ds=Kn(function(e){return sr(fn(e,1,Gi,!0))}),gs=Kn(function(e){var t=Pi(e);return Gi(t)&&(t=W),sr(fn(e,1,Gi,!0),oi(t,2))}),ms=Kn(function(e){var t=Pi(e);return t="function"==typeof t?t:W,sr(fn(e,1,Gi,!0),W,t)}),ys=Kn(function(e,t){return Gi(e)?on(e,t):[]}),vs=Kn(function(e){return pr(u(e,Gi))}),bs=Kn(function(e){var t=Pi(e);return Gi(t)&&(t=W),pr(u(e,Gi),oi(t,2))}),_s=Kn(function(e){var t=Pi(e);return t="function"==typeof t?t:W,pr(u(e,Gi),W,t)}),ws=Kn(Li),xs=Kn(function(e){var t=e.length,n=t>1?e[t-1]:W;return n="function"==typeof n?(e.pop(),n):W,Ni(e,n)}),ks=ei(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Jt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Pt&&pi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ii,args:[i],thisArg:W}),new bt(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(W),e})):this.thru(i)}),Es=Tr(function(e,t,n){Wo.call(e,n)?++e[n]:Wt(e,n,1)}),As=$r(Oi),Ss=$r(Ti),Os=Tr(function(e,t,n){Wo.call(e,n)?e[n].push(t):Wt(e,n,[t])}),Ts=Kn(function(e,t,n){var r=-1,i="function"==typeof t,a=Ji(e)?Co(e.length):[];return Ba(e,function(e){a[++r]=i?o(t,e,n):Fn(e,t,n)}),a}),js=Tr(function(e,t,n){Wt(e,n,t)}),Cs=Tr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ps=Kn(function(e,t){if(null==e)return[];var n=t.length;return n>1&&hi(e,t[0],t[1])?t=[]:n>2&&hi(t[0],t[1],t[2])&&(t=[t[0]]),Vn(e,fn(t,1),[])}),Fs=ca||function(){return sn.Date.now()},Ds=Kn(function(e,t,n){var r=ee;if(n.length){var i=U(n,ii(Ds));r|=oe}return Xr(e,r,t,n,i)}),Ls=Kn(function(e,t,n){var r=ee|te;if(n.length){var i=U(n,ii(Ls));r|=oe}return Xr(t,r,e,n,i)}),Ns=Kn(function(e,t){return tn(e,1,t)}),$s=Kn(function(e,t,n){return tn(e,uo(t)||0,n)});Wi.Cache=Lt;var Is=Ga(function(e,t){var n=(t=1==t.length&&Ws(t[0])?p(t[0],j(oi())):p(fn(t,1),j(oi()))).length;return Kn(function(r){for(var i=-1,a=_a(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return o(e,this,r)})}),Rs=Kn(function(e,t){var n=U(t,ii(Rs));return Xr(e,oe,W,t,n)}),Us=Kn(function(e,t){var n=U(t,ii(Us));return Xr(e,ae,W,t,n)}),Ms=ei(function(e,t){return Xr(e,le,W,W,W,t)}),zs=Hr(Tn),Bs=Hr(function(e,t){return e>=t}),qs=Dn(function(){return arguments}())?Dn:function(e){return eo(e)&&Wo.call(e,"callee")&&!ra.call(e,"callee")},Ws=Co.isArray,Hs=hn?j(hn):function(e){return eo(e)&&On(e)==Me},Vs=ga||jo,Js=dn?j(dn):function(e){return eo(e)&&On(e)==Ee},Gs=gn?j(gn):function(e){return eo(e)&&es(e)==je},Xs=mn?j(mn):function(e){return eo(e)&&On(e)==Le},Ys=yn?j(yn):function(e){return eo(e)&&es(e)==Ne},Zs=vn?j(vn):function(e){return eo(e)&&Ki(e.length)&&!!Qt[On(e)]},Ks=Hr(Mn),Qs=Hr(function(e,t){return e<=t}),el=jr(function(e,t){if(mi(t)||Ji(t))Or(t,go(t),e);else for(var n in t)Wo.call(t,n)&&Mt(e,n,t[n])}),tl=jr(function(e,t){Or(t,mo(t),e)}),nl=jr(function(e,t,n,r){Or(t,mo(t),e,r)}),rl=jr(function(e,t,n,r){Or(t,go(t),e,r)}),il=ei(Jt),ol=Kn(function(e){return e.push(W,Yr),o(nl,W,e)}),al=Kn(function(e){return e.push(W,Zr),o(fl,W,e)}),sl=Ur(function(e,t,n){e[t]=n},xo(ko)),ll=Ur(function(e,t,n){Wo.call(e,t)?e[t].push(n):e[t]=[n]},oi),ul=Kn(Fn),cl=jr(function(e,t,n){Wn(e,t,n)}),fl=jr(function(e,t,n,r){Wn(e,t,n,r)}),pl=ei(function(e,t){var n={};if(null==e)return n;var r=!1;t=p(t,function(t){return t=mr(t,e),r||(r=t.length>1),t}),Or(e,ni(e),n),r&&(n=Xt(n,X|Y|Z,Kr));for(var i=t.length;i--;)lr(n,t[i]);return n}),hl=ei(function(e,t){return null==e?{}:function(e,t){return Jn(e,t,function(t,n){return ho(e,n)})}(e,t)}),dl=Gr(go),gl=Gr(mo),ml=Dr(function(e,t,n){return t=t.toLowerCase(),e+(n?bo(t):t)}),yl=Dr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),vl=Dr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),bl=Fr("toLowerCase"),_l=Dr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),wl=Dr(function(e,t,n){return e+(n?" ":"")+kl(t)}),xl=Dr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),kl=Fr("toUpperCase"),El=Kn(function(e,t){try{return o(e,W,t)}catch(e){return Xi(e)?e:new Fo(e)}}),Al=ei(function(e,t){return s(t,function(t){t=Ei(t),Wt(e,t,Ds(e[t],e))}),e}),Sl=Ir(),Ol=Ir(!0),Tl=Kn(function(e,t){return function(n){return Fn(n,e,t)}}),jl=Kn(function(e,t){return function(n){return Fn(e,n,t)}}),Cl=zr(p),Pl=zr(l),Fl=zr(m),Dl=Wr(),Ll=Wr(!0),Nl=Mr(function(e,t){return e+t},0),$l=Jr("ceil"),Il=Mr(function(e,t){return e/t},1),Rl=Jr("floor"),Ul=Mr(function(e,t){return e*t},1),Ml=Jr("round"),zl=Mr(function(e,t){return e-t},0);return n.after=function(e,t){if("function"!=typeof t)throw new Ro(V);return e=so(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=zi,n.assign=el,n.assignIn=tl,n.assignInWith=nl,n.assignWith=rl,n.at=il,n.before=Bi,n.bind=Ds,n.bindAll=Al,n.bindKey=Ls,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ws(e)?e:[e]},n.chain=$i,n.chunk=function(e,t,n){t=(n?hi(e,t,n):t===W)?1:ba(so(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Co(pa(r/t));i<r;)a[o++]=er(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Co(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return h(Ws(n)?Sr(n):[n],fn(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=oi();return e=t?p(e,function(e){if("function"!=typeof e[1])throw new Ro(V);return[n(e[0]),e[1]]}):[],Kn(function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}})},n.conforms=function(e){return function(e){var t=go(e);return function(n){return Yt(n,e,t)}}(Xt(e,X))},n.constant=xo,n.countBy=Es,n.create=function(e,t){var n=za(e);return null==t?n:qt(n,t)},n.curry=function e(t,n,r){var i=Xr(t,re,W,W,W,W,W,n=r?W:n);return i.placeholder=e.placeholder,i},n.curryRight=function e(t,n,r){var i=Xr(t,ie,W,W,W,W,W,n=r?W:n);return i.placeholder=e.placeholder,i},n.debounce=qi,n.defaults=ol,n.defaultsDeep=al,n.defer=Ns,n.delay=$s,n.difference=as,n.differenceBy=ss,n.differenceWith=ls,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?er(e,(t=n||t===W?1:so(t))<0?0:t,r):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?er(e,0,(t=r-(t=n||t===W?1:so(t)))<0?0:t):[]},n.dropRightWhile=function(e,t){return e&&e.length?cr(e,oi(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?cr(e,oi(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&hi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=so(n))<0&&(n=-n>i?0:i+n),(r=r===W||r>i?i:so(r))<0&&(r+=i),r=n>r?0:lo(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},n.filter=function(e,t){return(Ws(e)?u:un)(e,oi(t,3))},n.flatMap=function(e,t){return fn(Mi(e,t),1)},n.flatMapDeep=function(e,t){return fn(Mi(e,t),pe)},n.flatMapDepth=function(e,t,n){return n=n===W?1:so(n),fn(Mi(e,t),n)},n.flatten=ji,n.flattenDeep=function(e){return null!=e&&e.length?fn(e,pe):[]},n.flattenDepth=function(e,t){return null!=e&&e.length?fn(e,t=t===W?1:so(t)):[]},n.flip=function(e){return Xr(e,ue)},n.flow=Sl,n.flowRight=Ol,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:En(e,go(e))},n.functionsIn=function(e){return null==e?[]:En(e,mo(e))},n.groupBy=Os,n.initial=function(e){return null!=e&&e.length?er(e,0,-1):[]},n.intersection=us,n.intersectionBy=cs,n.intersectionWith=fs,n.invert=sl,n.invertBy=ll,n.invokeMap=Ts,n.iteratee=Eo,n.keyBy=js,n.keys=go,n.keysIn=mo,n.map=Mi,n.mapKeys=function(e,t){var n={};return t=oi(t,3),pn(e,function(e,r,i){Wt(n,t(e,r,i),e)}),n},n.mapValues=function(e,t){var n={};return t=oi(t,3),pn(e,function(e,r,i){Wt(n,r,t(e,r,i))}),n},n.matches=function(e){return Bn(Xt(e,X))},n.matchesProperty=function(e,t){return qn(e,Xt(t,X))},n.memoize=Wi,n.merge=cl,n.mergeWith=fl,n.method=Tl,n.methodOf=jl,n.mixin=Ao,n.negate=Hi,n.nthArg=function(e){return e=so(e),Kn(function(t){return Hn(t,e)})},n.omit=pl,n.omitBy=function(e,t){return yo(e,Hi(oi(t)))},n.once=function(e){return Bi(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(Ws(t)||(t=null==t?[]:[t]),Ws(n=r?W:n)||(n=null==n?[]:[n]),Vn(e,t,n))},n.over=Cl,n.overArgs=Is,n.overEvery=Pl,n.overSome=Fl,n.partial=Rs,n.partialRight=Us,n.partition=Cs,n.pick=hl,n.pickBy=yo,n.property=Oo,n.propertyOf=function(e){return function(t){return null==e?W:An(e,t)}},n.pull=ps,n.pullAll=Fi,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gn(e,t,oi(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gn(e,t,W,n):e},n.pullAt=hs,n.range=Dl,n.rangeRight=Ll,n.rearg=Ms,n.reject=function(e,t){return(Ws(e)?u:un)(e,Hi(oi(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=oi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Xn(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new Ro(V);return Kn(e,t=t===W?t:so(t))},n.reverse=Di,n.sampleSize=function(e,t,n){return t=(n?hi(e,t,n):t===W)?1:so(t),(Ws(e)?function(e,t){return ki(Sr(e),Gt(t,0,e.length))}:function(e,t){var n=vo(e);return ki(n,Gt(t,0,n.length))})(e,t)},n.set=function(e,t,n){return null==e?e:Qn(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:W,null==e?e:Qn(e,t,n,r)},n.shuffle=function(e){return(Ws(e)?function(e){return ki(Sr(e))}:function(e){return ki(vo(e))})(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&hi(e,t,n)?(t=0,n=r):(t=null==t?0:so(t),n=n===W?r:so(n)),er(e,t,n)):[]},n.sortBy=Ps,n.sortedUniq=function(e){return e&&e.length?ir(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?ir(e,oi(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&hi(e,t,n)&&(t=n=W),(n=n===W?me:n>>>0)?(e=fo(e))&&("string"==typeof t||null!=t&&!Xs(t))&&!(t=ar(t))&&N(e)?yr(B(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new Ro(V);return t=null==t?0:ba(so(t),0),Kn(function(n){var r=n[t],i=yr(n,0,t);return r&&h(i,r),o(e,this,i)})},n.tail=function(e){var t=null==e?0:e.length;return t?er(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?er(e,0,(t=n||t===W?1:so(t))<0?0:t):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?er(e,(t=r-(t=n||t===W?1:so(t)))<0?0:t,r):[]},n.takeRightWhile=function(e,t){return e&&e.length?cr(e,oi(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?cr(e,oi(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ro(V);return Qi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),qi(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=Ii,n.toArray=oo,n.toPairs=dl,n.toPairsIn=gl,n.toPath=function(e){return Ws(e)?p(e,Ei):io(e)?[e]:Sr(os(fo(e)))},n.toPlainObject=co,n.transform=function(e,t,n){var r=Ws(e),i=r||Vs(e)||Zs(e);if(t=oi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Qi(e)&&Yi(o)?za(ta(e)):{}}return(i?s:pn)(e,function(e,r,i){return t(n,e,r,i)}),n},n.unary=function(e){return zi(e,1)},n.union=ds,n.unionBy=gs,n.unionWith=ms,n.uniq=function(e){return e&&e.length?sr(e):[]},n.uniqBy=function(e,t){return e&&e.length?sr(e,oi(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:W,e&&e.length?sr(e,W,t):[]},n.unset=function(e,t){return null==e||lr(e,t)},n.unzip=Li,n.unzipWith=Ni,n.update=function(e,t,n){return null==e?e:ur(e,t,gr(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:W,null==e?e:ur(e,t,gr(n),r)},n.values=vo,n.valuesIn=function(e){return null==e?[]:C(e,mo(e))},n.without=ys,n.words=wo,n.wrap=function(e,t){return Rs(gr(t),e)},n.xor=vs,n.xorBy=bs,n.xorWith=_s,n.zip=ws,n.zipObject=function(e,t){return hr(e||[],t||[],Mt)},n.zipObjectDeep=function(e,t){return hr(e||[],t||[],Qn)},n.zipWith=xs,n.entries=dl,n.entriesIn=gl,n.extend=tl,n.extendWith=nl,Ao(n,n),n.add=Nl,n.attempt=El,n.camelCase=ml,n.capitalize=bo,n.ceil=$l,n.clamp=function(e,t,n){return n===W&&(n=t,t=W),n!==W&&(n=(n=uo(n))===n?n:0),t!==W&&(t=(t=uo(t))===t?t:0),Gt(uo(e),t,n)},n.clone=function(e){return Xt(e,Z)},n.cloneDeep=function(e){return Xt(e,X|Z)},n.cloneDeepWith=function(e,t){return Xt(e,X|Z,t="function"==typeof t?t:W)},n.cloneWith=function(e,t){return Xt(e,Z,t="function"==typeof t?t:W)},n.conformsTo=function(e,t){return null==t||Yt(e,t,go(t))},n.deburr=_o,n.defaultTo=function(e,t){return null==e||e!=e?t:e},n.divide=Il,n.endsWith=function(e,t,n){e=fo(e),t=ar(t);var r=e.length,i=n=n===W?r:Gt(so(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=Vi,n.escape=function(e){return(e=fo(e))&&rt.test(e)?e.replace(tt,wn):e},n.escapeRegExp=function(e){return(e=fo(e))&&pt.test(e)?e.replace(ft,"\\$&"):e},n.every=function(e,t,n){var r=Ws(e)?l:an;return n&&hi(e,t,n)&&(t=W),r(e,oi(t,3))},n.find=As,n.findIndex=Oi,n.findKey=function(e,t){return v(e,oi(t,3),pn)},n.findLast=Ss,n.findLastIndex=Ti,n.findLastKey=function(e,t){return v(e,oi(t,3),bn)},n.floor=Rl,n.forEach=Ri,n.forEachRight=Ui,n.forIn=function(e,t){return null==e?e:Wa(e,oi(t,3),mo)},n.forInRight=function(e,t){return null==e?e:Ha(e,oi(t,3),mo)},n.forOwn=function(e,t){return e&&pn(e,oi(t,3))},n.forOwnRight=function(e,t){return e&&bn(e,oi(t,3))},n.get=po,n.gt=zs,n.gte=Bs,n.has=function(e,t){return null!=e&&ui(e,t,jn)},n.hasIn=ho,n.head=Ci,n.identity=ko,n.includes=function(e,t,n,r){e=Ji(e)?e:vo(e),n=n&&!r?so(n):0;var i=e.length;return n<0&&(n=ba(i+n,0)),ro(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&_(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:so(n);return i<0&&(i=ba(r+i,0)),_(e,t,i)},n.inRange=function(e,t,n){return t=ao(t),n===W?(n=t,t=0):n=ao(n),function(e,t,n){return e>=_a(t,n)&&e<ba(t,n)}(e=uo(e),t,n)},n.invoke=ul,n.isArguments=qs,n.isArray=Ws,n.isArrayBuffer=Hs,n.isArrayLike=Ji,n.isArrayLikeObject=Gi,n.isBoolean=function(e){return!0===e||!1===e||eo(e)&&On(e)==ke},n.isBuffer=Vs,n.isDate=Js,n.isElement=function(e){return eo(e)&&1===e.nodeType&&!no(e)},n.isEmpty=function(e){if(null==e)return!0;if(Ji(e)&&(Ws(e)||"string"==typeof e||"function"==typeof e.splice||Vs(e)||Zs(e)||qs(e)))return!e.length;var t=es(e);if(t==je||t==Ne)return!e.size;if(mi(e))return!Rn(e).length;for(var n in e)if(Wo.call(e,n))return!1;return!0},n.isEqual=function(e,t){return Ln(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:W)?n(e,t):W;return r===W?Ln(e,t,W,n):!!r},n.isError=Xi,n.isFinite=function(e){return"number"==typeof e&&ma(e)},n.isFunction=Yi,n.isInteger=Zi,n.isLength=Ki,n.isMap=Gs,n.isMatch=function(e,t){return e===t||Nn(e,t,si(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:W,Nn(e,t,si(t),n)},n.isNaN=function(e){return to(e)&&e!=+e},n.isNative=function(e){if(ts(e))throw new Fo("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return $n(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=to,n.isObject=Qi,n.isObjectLike=eo,n.isPlainObject=no,n.isRegExp=Xs,n.isSafeInteger=function(e){return Zi(e)&&e>=-he&&e<=he},n.isSet=Ys,n.isString=ro,n.isSymbol=io,n.isTypedArray=Zs,n.isUndefined=function(e){return e===W},n.isWeakMap=function(e){return eo(e)&&es(e)==Ue},n.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==On(e)},n.join=function(e,t){return null==e?"":ya.call(e,t)},n.kebabCase=yl,n.last=Pi,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==W&&(i=(i=so(n))<0?ba(r+i,0):_a(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):b(e,x,i,!0)},n.lowerCase=vl,n.lowerFirst=bl,n.lt=Ks,n.lte=Qs,n.max=function(e){return e&&e.length?ln(e,ko,Tn):W},n.maxBy=function(e,t){return e&&e.length?ln(e,oi(t,2),Tn):W},n.mean=function(e){return k(e,ko)},n.meanBy=function(e,t){return k(e,oi(t,2))},n.min=function(e){return e&&e.length?ln(e,ko,Mn):W},n.minBy=function(e,t){return e&&e.length?ln(e,oi(t,2),Mn):W},n.stubArray=To,n.stubFalse=jo,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=Ul,n.nth=function(e,t){return e&&e.length?Hn(e,so(t)):W},n.noConflict=function(){return sn._===this&&(sn._=Xo),this},n.noop=So,n.now=Fs,n.pad=function(e,t,n){e=fo(e);var r=(t=so(t))?z(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Br(ha(i),n)+e+Br(pa(i),n)},n.padEnd=function(e,t,n){e=fo(e);var r=(t=so(t))?z(e):0;return t&&r<t?e+Br(t-r,n):e},n.padStart=function(e,t,n){e=fo(e);var r=(t=so(t))?z(e):0;return t&&r<t?Br(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xa(fo(e).replace(dt,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&hi(e,t,n)&&(t=n=W),n===W&&("boolean"==typeof t?(n=t,t=W):"boolean"==typeof e&&(n=e,e=W)),e===W&&t===W?(e=0,t=1):(e=ao(e),t===W?(t=e,e=0):t=ao(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ka();return _a(e+i*(t-e+nn("1e-"+((i+"").length-1))),t)}return Yn(e,t)},n.reduce=function(e,t,n){var r=Ws(e)?d:S,i=arguments.length<3;return r(e,oi(t,4),n,i,Ba)},n.reduceRight=function(e,t,n){var r=Ws(e)?g:S,i=arguments.length<3;return r(e,oi(t,4),n,i,qa)},n.repeat=function(e,t,n){return t=(n?hi(e,t,n):t===W)?1:so(t),Zn(fo(e),t)},n.replace=function(){var e=arguments,t=fo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=mr(t,e)).length;for(i||(i=1,e=W);++r<i;){var o=null==e?W:e[Ei(t[r])];o===W&&(r=i,o=n),e=Yi(o)?o.call(e):o}return e},n.round=Ml,n.runInContext=e,n.sample=function(e){return(Ws(e)?Rt:function(e){return Rt(vo(e))})(e)},n.size=function(e){if(null==e)return 0;if(Ji(e))return ro(e)?z(e):e.length;var t=es(e);return t==je||t==Ne?e.size:Rn(e).length},n.snakeCase=_l,n.some=function(e,t,n){var r=Ws(e)?m:tr;return n&&hi(e,t,n)&&(t=W),r(e,oi(t,3))},n.sortedIndex=function(e,t){return nr(e,t)},n.sortedIndexBy=function(e,t,n){return rr(e,t,oi(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=nr(e,t);if(r<n&&Vi(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return nr(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return rr(e,t,oi(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=nr(e,t,!0)-1;if(Vi(e[n],t))return n}return-1},n.startCase=wl,n.startsWith=function(e,t,n){return e=fo(e),n=null==n?0:Gt(so(n),0,e.length),t=ar(t),e.slice(n,n+t.length)==t},n.subtract=zl,n.sum=function(e){return e&&e.length?O(e,ko):0},n.sumBy=function(e,t){return e&&e.length?O(e,oi(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&hi(e,t,r)&&(t=W),e=fo(e),t=nl({},t,i,Yr);var o,a,s=nl({},t.imports,i.imports,Yr),l=go(s),u=C(s,l),c=0,f=t.interpolate||jt,p="__p += '",h=$o((t.escape||jt).source+"|"+f.source+"|"+(f===at?wt:jt).source+"|"+(t.evaluate||jt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Kt+"]")+"\n";e.replace(h,function(t,n,r,i,s,l){return r||(r=i),p+=e.slice(c,l).replace(Ct,L),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),p+="';\n";var g=t.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(Ze,""):p).replace(Ke,"$1").replace(Qe,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=El(function(){return Do(l,d+"return "+p).apply(W,u)});if(m.source=p,Xi(m))throw m;return m},n.times=function(e,t){if((e=so(e))<1||e>he)return[];var n=me,r=_a(e,me);t=oi(t),e-=me;for(var i=T(r,t);++n<e;)t(n);return i},n.toFinite=ao,n.toInteger=so,n.toLength=lo,n.toLower=function(e){return fo(e).toLowerCase()},n.toNumber=uo,n.toSafeInteger=function(e){return e?Gt(so(e),-he,he):0===e?e:0},n.toString=fo,n.toUpper=function(e){return fo(e).toUpperCase()},n.trim=function(e,t,n){if((e=fo(e))&&(n||t===W))return e.replace(ht,"");if(!e||!(t=ar(t)))return e;var r=B(e),i=B(t);return yr(r,F(r,i),D(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=fo(e))&&(n||t===W))return e.replace(gt,"");if(!e||!(t=ar(t)))return e;var r=B(e);return yr(r,0,D(r,B(t))+1).join("")},n.trimStart=function(e,t,n){if((e=fo(e))&&(n||t===W))return e.replace(dt,"");if(!e||!(t=ar(t)))return e;var r=B(e);return yr(r,F(r,B(t))).join("")},n.truncate=function(e,t){var n=30,r="...";if(Qi(t)){var i="separator"in t?t.separator:i;n="length"in t?so(t.length):n,r="omission"in t?ar(t.omission):r}var o=(e=fo(e)).length;if(N(e)){var a=B(e);o=a.length}if(n>=o)return e;var s=n-z(r);if(s<1)return r;var l=a?yr(a,0,s).join(""):e.slice(0,s);if(i===W)return l+r;if(a&&(s+=l.length-s),Xs(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=$o(i.source,fo(xt.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var f=u.index;l=l.slice(0,f===W?s:f)}}else if(e.indexOf(ar(i),s)!=s){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},n.unescape=function(e){return(e=fo(e))&&nt.test(e)?e.replace(et,xn):e},n.uniqueId=function(e){var t=++Ho;return fo(e)+t},n.upperCase=xl,n.upperFirst=kl,n.each=Ri,n.eachRight=Ui,n.first=Ci,Ao(n,function(){var e={};return pn(n,function(t,r){Wo.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.4",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){Pt.prototype[e]=function(n){n=n===W?1:ba(so(n),0);var r=this.__filtered__&&!t?new Pt(this):this.clone();return r.__filtered__?r.__takeCount__=_a(n,r.__takeCount__):r.__views__.push({size:_a(n,me),type:e+(r.__dir__<0?"Right":"")}),r},Pt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Pt.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");Pt.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Pt.prototype[e]=function(){return this.__filtered__?new Pt(this):this[n](1)}}),Pt.prototype.compact=function(){return this.filter(ko)},Pt.prototype.find=function(e){return this.filter(e).head()},Pt.prototype.findLast=function(e){return this.reverse().find(e)},Pt.prototype.invokeMap=Kn(function(e,t){return"function"==typeof e?new Pt(this):this.map(function(n){return Fn(n,e,t)})}),Pt.prototype.reject=function(e){return this.filter(Hi(oi(e)))},Pt.prototype.slice=function(e,t){e=so(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Pt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==W&&(n=(t=so(t))<0?n.dropRight(-t):n.take(t-e)),n)},Pt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pt.prototype.toArray=function(){return this.take(me)},pn(Pt.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=n[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,l=t instanceof Pt,u=s[0],c=l||Ws(t),f=function(e){var t=o.apply(n,h([e],s));return i&&p?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var p=this.__chain__,d=!!this.__actions__.length,g=a&&!p,m=l&&!d;if(!a&&c){t=m?t:new Pt(this);var y=e.apply(t,s);return y.__actions__.push({func:Ii,args:[f],thisArg:W}),new bt(y,p)}return g&&m?e.apply(this,s):(y=this.thru(f),g?i?y.value()[0]:y.value():y)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=Uo[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Ws(n)?n:[],e)}return this[r](function(n){return t.apply(Ws(n)?n:[],e)})}}),pn(Pt.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(Fa[i]||(Fa[i]=[])).push({name:t,func:r})}}),Fa[Rr(W,te).name]=[{name:"wrapper",func:W}],Pt.prototype.clone=function(){var e=new Pt(this.__wrapped__);return e.__actions__=Sr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Sr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Sr(this.__views__),e},Pt.prototype.reverse=function(){if(this.__filtered__){var e=new Pt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Pt.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ws(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_a(t,e+a);break;case"takeRight":e=ba(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=_a(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return fr(e,this.__actions__);var d=[];e:for(;l--&&p<h;){for(var g=-1,m=e[u+=t];++g<f;){var y=c[g],v=y.iteratee,b=y.type,_=v(m);if(2==b)m=_;else if(!_){if(1==b)continue e;break e}}d[p++]=m}return d},n.prototype.at=ks,n.prototype.chain=function(){return $i(this)},n.prototype.commit=function(){return new bt(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===W&&(this.__values__=oo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?W:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof A;){var r=Si(n);r.__index__=0,r.__values__=W,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Pt){var t=e;return this.__actions__.length&&(t=new Pt(this)),(t=t.reverse()).__actions__.push({func:Ii,args:[Di],thisArg:W}),new bt(t,this.__chain__)}return this.thru(Di)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,aa&&(n.prototype[aa]=function(){return this}),n}();un?((un.exports=kn)._=kn,ln._=kn):sn._=kn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){(function(e){!function(e,n,r){n[e]=n[e]||function(){function e(e,t){p.add(e,t),f||(f=d(p.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,n,r){var i,o;try{!1===n?r.reject(e.msg):(i=!0===n?e.msg:n.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=t(i))?o.call(i,r.resolve,r.reject):r.resolve(i)}catch(e){r.reject(e)}}function i(r){var a,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(a=t(r))?e(function(){var e=new s(l);try{a.call(r,function(){i.apply(e,arguments)},function(){o.apply(e,arguments)})}catch(t){o.call(e,t)}}):(l.msg=r,l.state=1,l.chain.length>0&&e(n,l))}catch(e){o.call(new s(l),e)}}}function o(t){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=t,r.state=2,r.chain.length>0&&e(n,r))}function a(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then(function(e){n(i,e)},r)}(i)}function s(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new l(this);this.then=function(t,i){var o={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),r.chain.push(o),0!==r.state&&e(n,r),o.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){i.call(r,e)},function(e){o.call(r,e)})}catch(e){o.call(r,e)}}var c,f,p,h=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){c=function(e,t,n){return e[t]=n,e}}p=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,r;return{add:function(i,o){r=new e(i,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var e=t;for(t=n=f=void 0;e;)e.fn.call(e.self),e=e.next}}}();var g=c({},"constructor",u,!1);return u.prototype=g,c(g,"__NPO__",0,!1),c(u,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),c(u,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),c(u,"all",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),s=0;a(t,e,function(e,t){o[e]=t,++s===i&&n(o)},r)})}),c(u,"race",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");a(t,e,function(e,t){n(t)},r)})}),u}(),void 0!==t&&t.exports&&(t.exports=n[e])}("Promise",void 0!==e?e:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return(i?"/":"")+(n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"))||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===a(e,-1);return(e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var u=[];for(l=s;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:29}],26:[function(e,t,n){var r={file:e("./lib/loaders/file"),http:e("./lib/loaders/http"),https:e("./lib/loaders/http")},i="object"==typeof window||"function"==typeof importScripts?r.http:r.file;"undefined"==typeof Promise&&e("native-promise-only"),t.exports.load=function(e,t){var n=Promise.resolve();return void 0===t&&(t={}),(n=n.then(function(){if(void 0===e)throw new TypeError("location is required");if("string"!=typeof e)throw new TypeError("location must be a string");if(void 0!==t){if("object"!=typeof t)throw new TypeError("options must be an object");if(void 0!==t.processContent&&"function"!=typeof t.processContent)throw new TypeError("options.processContent must be a function")}})).then(function(){return new Promise(function(n,o){(function(e){var t=function(e){return void 0!==e&&(e=-1===e.indexOf("://")?"":e.split("://")[0]),e}(e),n=r[t];if(void 0===n){if(""!==t)throw new Error("Unsupported scheme: "+t);n=i}return n})(e).load(e,t||{},function(e,t){e?o(e):n(t)})})}).then(function(e){return t.processContent?new Promise(function(n,r){t.processContent("object"==typeof e?e:{text:e},function(e,t){e?r(e):n(t)})}):"object"==typeof e?e.text:e})}},{"./lib/loaders/file":27,"./lib/loaders/http":28,"native-promise-only":24}],27:[function(e,t,n){var r=new TypeError("The 'file' scheme is not supported in the browser");t.exports.getBase=function(){throw r},t.exports.load=function(){var e=arguments[arguments.length-1];if("function"!=typeof e)throw r;e(r)}},{}],28:[function(e,t,n){(function(n){var r=e("superagent"),i=["delete","get","head","patch","post","put"];t.exports.load=function(e,t,o){function a(e,t){e?o(e):("[object process]"===Object.prototype.toString.call(void 0!==n?n:0)&&"function"==typeof t.buffer&&t.buffer(!0),t.end(function(e,t){e?o(e):o(void 0,t)}))}var s,l,u=t.method?t.method.toLowerCase():"get";if(void 0!==t.method?"string"!=typeof t.method?s=new TypeError("options.method must be a string"):-1===i.indexOf(t.method)&&(s=new TypeError("options.method must be one of the following: "+i.slice(0,i.length-1).join(", ")+" or "+i[i.length-1])):void 0!==t.prepareRequest&&"function"!=typeof t.prepareRequest&&(s=new TypeError("options.prepareRequest must be a function")),s)o(s);else if(l=r["delete"===u?"del":u](e),t.prepareRequest)try{t.prepareRequest(l,a)}catch(e){o(e)}else a(void 0,l)}}).call(this,e("_process"))},{_process:29,superagent:35}],29:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(){g&&h&&(g=!1,h.length?d=h.concat(d):m=-1,d.length&&s())}function s(){if(!g){var e=o(a);g=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,g=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var h,d=[],g=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new l(e,t)),1!==d.length||g||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],30:[function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var f,p,h,d,g=e[c].replace(s,"%20"),m=g.indexOf(n);m>=0?(f=g.substr(0,m),p=g.substr(m+1)):(f=g,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),r(a,h)?i(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],31:[function(e,t,n){function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],32:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":30,"./encode":31}],33:[function(e,t,n){t.exports=function(e){var t=/^\\\\\?\\/.test(e),n=/[^\x00-\x80]+/.test(e);return t||n?e:e.replace(/\\/g,"/")}},{}],34:[function(e,t,n){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),r.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},t.exports=r},{}],35:[function(e,t,n){function r(){}function i(e){if(!d(e))return e;var t=[];for(var n in e)o(t,n,e[n]);return t.join("&")}function o(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(e,t,n)});else if(d(n))for(var r in n)o(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function a(e){for(var t,n,r={},i=e.split("&"),o=0,a=i.length;o<a;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function s(e){return/[\/+]json($|[^-\w])/.test(e)}function l(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,o=e.split(/\r?\n/),a={},s=0,l=o.length;s<l;++s)-1!==(t=(n=o[s]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=v(n.slice(t+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function u(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new l(n)}catch(r){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=r,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function c(e,t,n){var r=y("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var p=e("component-emitter"),h=e("./request-base"),d=e("./is-object"),g=e("./response-base"),m=e("./agent-base"),y=n=t.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=u,y.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var v="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};y.serializeObject=i,y.parseString=a,y.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},y.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},y.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},g(l.prototype),l.prototype._parseBody=function(e){var t=y.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&s(this.type)&&(t=y.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},l.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},y.Response=l,p(u.prototype),h(u.prototype),u.prototype.type=function(e){return this.set("Content-Type",y.types[e]||e),this},u.prototype.accept=function(e){return this.set("Accept",y.types[e]||e),this},u.prototype.auth=function(e,t,n){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"}),this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},u.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},u.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},u.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},u.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},u.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},u.prototype.buffer=u.prototype.ca=u.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},u.prototype.pipe=u.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},u.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},u.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||r,this._finalizeQueryString(),this._end()},u.prototype._end=function(){var e=this,t=this.xhr=y.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||y.serialize[i?i.split(";")[0]:""];!o&&s(i)&&(o=y.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},y.agent=function(){return new m},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){m.prototype[e.toLowerCase()]=function(t,n){var r=new y.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),m.prototype.del=m.prototype.delete,y.get=function(e,t,n){var r=y("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},y.head=function(e,t,n){var r=y("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},y.options=function(e,t,n){var r=y("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.del=c,y.delete=c,y.patch=function(e,t,n){var r=y("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.post=function(e,t,n){var r=y("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},y.put=function(e,t,n){var r=y("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},{"./agent-base":34,"./is-object":36,"./request-base":37,"./response-base":38,"component-emitter":2}],36:[function(e,t,n){t.exports=function(e){return null!==e&&"object"==typeof e}},{}],37:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=e("./is-object");t.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},r.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},r.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=i(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":36}],38:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=e("./utils");t.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var n=i.params(t);for(var r in n)this[r]=n[r];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},{"./utils":39}],39:[function(e,t,n){n.type=function(e){return e.split(/ *; */).shift()},n.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},n.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},n.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},{}],40:[function(e,t,n){!function(e,r){!function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r=t("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",l=e?"[\\uE000-\\uF8FF]":"[]",u=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",s),c=(n("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),n(n(i+"|"+t(u,o,"[\\:]"))+"*"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]")),f=n(c+"\\."+c+"\\."+c+"\\."+c),p=n(r+"{1,4}"),h=n(n(p+"\\:"+p)+"|"+f),d=n([n(n(p+"\\:")+"{6}"+h),n("\\:\\:"+n(p+"\\:")+"{5}"+h),n(n(p)+"?\\:\\:"+n(p+"\\:")+"{4}"+h),n(n(n(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+n(p+"\\:")+"{3}"+h),n(n(n(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+n(p+"\\:")+"{2}"+h),n(n(n(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+h),n(n(n(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+h),n(n(n(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),n(n(n(p+"\\:")+"{0,6}"+p)+"?\\:\\:")].join("|")),g=(n("\\["+n(d+"|"+n("[vV]"+r+"+\\."+t(u,o,"[\\:]")+"+"))+"\\]"),n(n(i+"|"+t(u,o))+"*"),n(i+"|"+t(u,o,"[\\:\\@]")));n(n(i+"|"+t(u,o,"[\\@]"))+"+"),n(n(g+"|"+t("[\\/\\?]",l))+"*");return{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV6ADDRESS:new RegExp("\\[?("+d+")\\]?","g")}}function a(e){throw new RangeError(E[e])}function s(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(k,".")).split("."),t).join(".")}function l(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}function u(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function c(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function f(e,t){function n(e){var n=c(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,u).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,u).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,u).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,u).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,u).replace(t.PCT_ENCODED,i)),e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?b:v;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(L);if(i){N?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=n.host.replace(r.IPV6ADDRESS,"$1")),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=D[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)f(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=F.toASCII(n.host.replace(r.PCT_ENCODED,c).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}f(n,v)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function h(e){for(var t=[];e.length;)if(e.match($))e=e.replace($,"");else if(e.match(I))e=e.replace(I,"/");else if(e.match(R))e=e.replace(R,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(U);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?b:v,r=[],i=D[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,c).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}f(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=function(e,t){var n=!1!==t.iri?b:v,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(String(e.host).replace(n.IPV6ADDRESS,"[$1]")),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0}(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var a=e.path;t.absolutePath||i&&i.absolutePath||(a=h(a)),void 0===o&&(a=a.replace(/^\/\//,"/%2F")),r.push(a)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=p(d(e,n),n),t=p(d(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=h(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=h(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=h(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=h(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function m(e,t){return e&&e.toString().replace(t&&t.iri?b.PCT_ENCODED:v.PCT_ENCODED,c)}function y(e){var t=c(e);return t.match(J)?t:e}var v=o(!1),b=o(!0),_=2147483647,w=/^xn--/,x=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=Math.floor,S=String.fromCharCode,O=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},T=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},j=function(e,t,n){var r=0;for(e=n?A(e/700):e>>1,e+=A(e/t);e>455;r+=36)e=A(e/35);return A(r+36*e/(e+38))},C=function(e){var t=[],n=e.length,r=0,i=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&a("not-basic"),t.push(e.charCodeAt(l));for(var u=s>0?s+1:0;u<n;){for(var c=r,f=1,p=36;;p+=36){u>=n&&a("invalid-input");var h=O(e.charCodeAt(u++));(h>=36||h>A((_-r)/f))&&a("overflow"),r+=h*f;var d=p<=o?1:p>=o+26?26:p-o;if(h<d)break;var g=36-d;f>A(_/g)&&a("overflow"),f*=g}var m=t.length+1;o=j(r-c,m,0==c),A(r/m)>_-i&&a("overflow"),i+=A(r/m),r%=m,t.splice(r++,0,i)}return String.fromCodePoint.apply(String,t)},P=function(e){var t=[],n=(e=l(e)).length,r=128,i=0,o=72,s=!0,u=!1,c=void 0;try{for(var f,p=e[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;h<128&&t.push(S(h))}}catch(e){u=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(u)throw c}}var d=t.length,g=d;for(d&&t.push("-");g<n;){var m=_,y=!0,v=!1,b=void 0;try{for(var w,x=e[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;k>=r&&k<m&&(m=k)}}catch(e){v=!0,b=e}finally{try{!y&&x.return&&x.return()}finally{if(v)throw b}}var E=g+1;m-r>A((_-i)/E)&&a("overflow"),i+=(m-r)*E,r=m;var O=!0,C=!1,P=void 0;try{for(var F,D=e[Symbol.iterator]();!(O=(F=D.next()).done);O=!0){var L=F.value;if(L<r&&++i>_&&a("overflow"),L==r){for(var N=i,$=36;;$+=36){var I=$<=o?1:$>=o+26?26:$-o;if(N<I)break;var R=N-I,U=36-I;t.push(S(T(I+R%U,0))),N=A(R/U)}t.push(S(T(N,0))),o=j(i,E,g==d),i=0,++g}}}catch(e){C=!0,P=e}finally{try{!O&&D.return&&D.return()}finally{if(C)throw P}}++i,++r}return t.join("")},F={version:"2.1.0",ucs2:{decode:l,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))}},decode:C,encode:P,toASCII:function(e){return s(e,function(e){return x.test(e)?"xn--"+P(e):e})},toUnicode:function(e){return s(e,function(e){return w.test(e)?C(e.slice(4).toLowerCase()):e})}},D={},L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[\dA-F:.]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1],$=/^\.\.?\//,I=/^\/\.(\/|$)/,R=/^\/\.\.(\/|$)/,U=/^\/?(?:.|\n)*?(?=\/|$)/,M={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},z={scheme:"https",domainHost:M.domainHost,parse:M.parse,serialize:M.serialize},B={},q="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",W="[0-9A-Fa-f]",H=n(n("%[EFef][0-9A-Fa-f]%"+W+W+"%"+W+W)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+W+W)+"|"+n("%"+W+W)),V=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(q,"g"),G=new RegExp(H,"g"),X=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',V),"g"),Y=new RegExp(t("[^]",q,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Z=Y,K={scheme:"mailto",parse:function(e,t){var n=e.to=e.path?e.path.split(","):[];if(e.path=void 0,e.query){for(var r=!1,i={},o=e.query.split("&"),a=0,s=o.length;a<s;++a){var l=o[a].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),c=0,f=u.length;c<f;++c)n.push(u[c]);break;case"subject":e.subject=m(l[1],t);break;case"body":e.body=m(l[1],t);break;default:r=!0,i[m(l[0],t)]=m(l[1],t)}}r&&(e.headers=i)}e.query=void 0;for(var p=0,h=n.length;p<h;++p){var d=n[p].split("@");if(d[0]=m(d[0]),t.unicodeSupport)d[1]=m(d[1],t).toLowerCase();else try{d[1]=F.toASCII(m(d[1],t).toLowerCase())}catch(t){e.error=e.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}n[p]=d.join("@")}return e},serialize:function(e,t){var n=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var r=0,o=n.length;r<o;++r){var a=String(n[r]),s=a.lastIndexOf("@"),l=a.slice(0,s).replace(G,y).replace(G,i).replace(X,u),c=a.slice(s+1);try{c=t.iri?F.toUnicode(c):F.toASCII(m(c,t).toLowerCase())}catch(n){e.error=e.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}n[r]=l+"@"+c}e.path=n.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var p=[];for(var h in f)f[h]!==B[h]&&p.push(h.replace(G,y).replace(G,i).replace(Y,u)+"="+f[h].replace(G,y).replace(G,i).replace(Z,u));return p.length&&(e.query=p.join("&")),e}},Q=new RegExp("^urn\\:((?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31}))$"),ee=/^([^\:]+)\:(.*)/,te=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,ne={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ee);if(n){var r="urn:"+n[1].toLowerCase(),i=D[r];i||(i=D[r]={scheme:r,parse:function(e,t){return e},serialize:D.urn.serialize}),e.scheme=r,e.path=n[2],e=i.parse(e,t)}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){var n=e.scheme||t.scheme;if(n&&"urn"!==n){var r=n.match(Q)||["urn:"+n,n];e.scheme="urn",e.path=r[1]+":"+(e.path?e.path.replace(te,u):"")}return e}},re=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ie={scheme:"urn:uuid",parse:function(e,t){return t.tolerant||e.path&&e.path.match(re)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e,t){return t.tolerant||e.path&&e.path.match(re)?e.path=(e.path||"").toLowerCase():e.scheme=void 0,D.urn.serialize(e,t)}};D.http=M,D.https=z,D.mailto=K,D.urn=ne,D["urn:uuid"]=ie,e.SCHEMES=D,e.pctEncChar=u,e.pctDecChars=c,e.parse=p,e.removeDotSegments=h,e.serialize=d,e.resolveComponents=g,e.resolve=function(e,t,n){return d(g(p(e,n),p(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=d(p(e,t),t):"object"===r(e)&&(e=p(d(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=d(p(e,n),n):"object"===r(e)&&(e=d(e,n)),"string"==typeof t?t=d(p(t,n),n):"object"===r(t)&&(t=d(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?b.ESCAPE:v.ESCAPE,u)},e.unescapeComponent=m,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:e.URI=e.URI||{})}(this)},{}]},{},[1])(1)});const getCurrDir=()=>window.location.href.replace(/(index\.html)?#.*$/,""),getMetaProp=function(e,t,n,r){let i;return n="string"==typeof n?[n]:n,e.some(e=>{const o=n.slice(0);let a=t["localization-strings"][e];for(;a&&o.length;)a=a[o.shift()];return i=r||"string"==typeof a?a:void 0}),i},getMetadata=async(e,t,n)=>{try{return(await JsonRefs.resolveRefsAt((n||getCurrDir())+e+(t?"#/"+t:""),{loaderOptions:{processContent(e,t){t(void 0,JSON.parse(e.text||e.body.toString()))}}})).resolved}catch(e){throw e}},getFieldNameAndValueAliases=function({field:e,schemaItems:t,metadataObj:n,getFieldAliasOrName:r,lang:i}){const o=t.findIndex(t=>t.title===e),a=t[o],s={fieldName:r(e)},l=n.fields[e];let u=l&&l["fieldvalue-aliases"];return u&&(u.localeKey&&(u=getMetaProp(i,n,u.localeKey.split("/"),!0)),s.rawFieldValueAliasMap=JSON.parse(JSON.stringify(u)),s.aliases=[],a.enum&&a.enum.length?a.enum.forEach(t=>{s.aliases.push(getMetaProp(i,n,["fieldvalue",e,t],!0)),t in u&&"string"==typeof u[t]&&s.aliases.push(...u[t])}):Object.entries(u).forEach(([e,t])=>{Array.isArray(t)||(t=Object.values(t)),s.aliases.push(...t.filter(e=>t.every(t=>t===e||!t.toLowerCase().startsWith(e.toLowerCase()))).map(t=>t+" ("+e+")"))}),s.fieldValueAliasMap=JSON.parse(JSON.stringify(u))),s.fieldSchema=a,s.fieldSchemaIndex=o,s.preferAlias=l.prefer_alias,s.lang=l.lang,s},getBrowseFieldData=function({metadataObj:e,schemaItems:t,getFieldAliasOrName:n,lang:r,callback:i}){e.table.browse_fields.forEach((o,a)=>{"string"==typeof o&&(o={set:[o]}),o.name||(o.name=o.set.join(","));const s=o.name,l=o.set,{presort:u}=o,c=l.map(i=>getFieldNameAndValueAliases({lang:r,field:i,schemaItems:t,metadataObj:e,getFieldAliasOrName:n}));i({setName:s,browseFields:c,i:a,presort:u})})};class Metadata{constructor({metadataObj:e}){this.metadataObj=e}getFieldLang(e){const{metadataObj:t}=this,n=t&&t.fields;return n&&n[e]&&n[e].lang}getFieldMatchesLocale({namespace:e,preferredLocale:t,schemaItems:n,pluginsForWork:r}){const{metadataObj:i}=this;return o=>{const a=getPreferredLanguages({namespace:e,preferredLocale:t});if(r.isPluginField({namespace:e,field:o})){let[,,n]=r.getPluginFieldParts({namespace:e,field:o});return"{locale}"===n&&(n=t),!n||a.includes(n)}const s=this.getFieldLang(o),l=i&&i["localization-strings"];return l&&Object.keys(l).some(e=>{const t=l[e]&&l[e].fieldvalue;return t&&t[o]})||s&&a.includes(s)||n.some(e=>e.title===o&&"string"!==e.type)}}}const escapePluginComponent=e=>e.replace(/\^/g,"^^").replace(/-/g,"^0"),unescapePluginComponent=e=>e?e.replace(/(\^+)0/g,(e,t)=>t.length%2?t.slice(1)+"-":e).replace(/\^\^/g,"^"):e,escapePlugin=({pluginName:e,applicableField:t,targetLanguage:n})=>escapePluginComponent(e)+(t?"-"+escapePluginComponent(t):"-")+(n?"-"+escapePluginComponent(n):"");class PluginsForWork{constructor({pluginsInWork:e,pluginFieldMappings:t,pluginObjects:n}){this.pluginsInWork=e,this.pluginFieldMappings=t,this.pluginObjects=n}getPluginObject(e){const t=this.pluginsInWork.findIndex(([t])=>t===e);return this.pluginObjects[t]}iterateMappings(e){this.pluginFieldMappings.forEach(({placement:t,"applicable-fields":n},r)=>{const[i,{onByDefault:o,lang:a,meta:s}]=this.pluginsInWork[r],l=this.getPluginObject(i);e({plugin:l,placement:t,applicableFields:n,pluginName:i,pluginLang:a,onByDefaultDefault:o,meta:s})})}processTargetLanguages(e,t){return!!e&&(Object.entries(e).forEach(([e,{targetLanguage:n,onByDefault:r,meta:i}])=>{Array.isArray(n)?n.forEach(n=>{t({applicableField:e,targetLanguage:n,onByDefault:r,metaApplicableField:i})}):t({applicableField:e,targetLanguage:n,onByDefault:r,metaApplicableField:i})}),!0)}isPluginField({namespace:e,field:t}){return t.startsWith(`${e}-plugin-`)}getPluginFieldParts({namespace:e,field:t}){let n,r,i;return(t=t.replace(`${e}-plugin-`,"")).includes("-")?[n,r,i]=t.split("-"):n=t,[n,r,i].map(unescapePluginComponent)}}const getWorkFiles=async function(e=this.files){const t=await simpleGetJson(e),n=[];return t.groups.forEach(e=>{e.files.forEach(r=>{const{file:i,schemaFile:o,metadataFile:a}=getFilePaths(t,e,r);n.push(i,o,a)})}),n.push(...Object.values(t.plugins).map(e=>e.path)),n},getFilePaths=function(e,t,n){const r=(e.baseDirectory||"")+(t.baseDirectory||"")+"/",i=(e.schemaBaseDirectory||"")+(t.schemaBaseDirectory||"")+"/",o=(e.metadataBaseDirectory||"")+(t.metadataBaseDirectory||"")+"/";return{file:r+n.file.$ref,schemaFile:n.schemaFile?i+n.schemaFile:"",metadataFile:n.metadataFile?o+n.metadataFile:""}},getWorkData=async function({lang:e,fallbackLanguages:t,work:n,files:r,allowPlugins:i,basePath:o}){const a=await simpleGetJson(r),s=e=>a["localization-strings"][e],l=dist({locales:e.map(s),fallbackLocales:t.map(s)}).getFormatter();let u;const c=a.groups.find(e=>(u=e.files.find(t=>n===l(["workNames",e.id,t.name])),Boolean(u))),f=a.groups.map(e=>({name:l({key:e.name.localeKey,fallback:!0}),workNames:e.files.map(t=>l(["workNames",e.id,t.name])),shortcuts:e.files.map(e=>e.shortcut)})),p=getFilePaths(a,c,u),{file:h}=p;let{schemaFile:d,metadataFile:g}=p,m="",y="";d||(d=h,m="schema"),g||(g=h,y="metadata");let v,b,_,w,x=[];if(i){const e=a["plugin-field-mapping"][c.id][u.name];e&&(_=Object.keys(e),x=(b=Object.entries(a.plugins).filter(([e])=>_.includes(e))).map(([t])=>e[t]),w=b.map(([,e])=>e.path),v=b)}const k=await getMetadata(g,y,o),E=function(t){const n=k.fields&&k.fields[t];let r,i;return n&&(i=n.alias),i?"string"==typeof i?r=i:(i=i.localeKey,r=getMetaProp(e,k,i.split("/"))):"object"==typeof(r=n.name)&&(r=r.localeKey,r=getMetaProp(e,k,r.split("/"))),r},A=x;"undefined"!=typeof process&&require("babel-polyfill");const[S,O]=await Promise.all([getMetadata(d,m,o),v?Promise.all(w.map(e=>"undefined"!=typeof process?(e=require("path").resolve(require("path").join(process.cwd(),"node_modules/textbrowser/server",e)),require("babel-register")({presets:["env"]}),Promise.resolve().then(()=>require(e))):window.importer(e))):null]),T=new PluginsForWork({pluginsInWork:b,pluginFieldMappings:A,pluginObjects:O}),j=S.items.items,C=j.map(({title:e})=>({field:e,fieldAliasOrName:E(e)||e}));return{fileData:u,lf:l,getFieldAliasOrName:E,metadataObj:k,schemaObj:S,schemaItems:j,fieldInfo:C,pluginsForWork:T,groupsToWorks:f}},setServiceWorkerDefaults=(e,t)=>(e.userJSON=t.userJSON||"resources/user.json",e.languages=t.languages||new URL("../appdata/languages.json",new URL("node_modules/textbrowser/resources/index.js",location)).href,e.serviceWorkerPath=t.serviceWorkerPath||`sw.js?pathToUserJSON=${encodeURIComponent(e.userJSON)}`,e.files=t.files||"files.json",e.namespace=t.namespace||"textbrowser",e),listenForWorkerUpdate=({r:e,logger:t})=>{e.addEventListener("updatefound",t=>{console.log("update found",t);const n=e.installing;n.addEventListener("statechange",async()=>{const{state:e}=n;switch(e){case"installing":console.log("Installing new worker");break;case"installed":console.log("Installation status",e),await dialogs.alert("\nA new version of this offlinable app has been downloaded.\n\nIf you have work to complete in this tab, you can dismiss\nthis dialog now and continue working with the old version.\n\nHowever, when you are finished, you should close this tab\nand any other old tabs for this site in order to be able to\nbegin using the new version.\n");break;case"redundant":console.log("Installation status",e),await dialogs.alert("\nThere was an error during installation (to allow offline/speeded\ncache use).\n\nIf you have work to complete in this tab, you can dismiss\nthis dialog now and continue working with the old version.\n\nHowever, when you are finished, you may wish to close this tab\nand any other old tabs for this site in order to try again\nfor offline installation.\n");break;case"activating":console.log("Activating new worker");break;case"activated":console.log("Activated new worker");break;default:throw new Error(`Unknown worker update state: ${e}`)}})})},respondToState=async({r:e,logger:t})=>new Promise(async(n,r)=>{navigator.serviceWorker.onmessage=(({data:n})=>{const{message:r,type:i,name:o,errorType:a}=n;switch(console.log("msg1",r,e),i){case"log":return void t.addLogEntry({text:r});case"beginInstall":return void t.addLogEntry({text:"Install: Begun..."});case"finishedInstall":return void t.addLogEntry({text:"Install: Finished..."});case"beginActivate":return t.addLogEntry({text:"Activate: Caching finished"}),void t.addLogEntry({text:"Activate: Begin database resources storage..."});case"finishedActivate":return t.addLogEntry({text:"Activate: Finished..."}),void location.reload();case"error":t.addLogEntry({text:r+`${"dbError"===a?`Database error ${o}`:""}; trying again...`})}});const i=e.installing||e.waiting||e.active;i&&"redundant"===i.state?(await dialogs.alert('\nThere was likely an error installing. Click "ok" to try again.\n(Error code: Service worker is redundant)\n'),location.reload()):e.installing?console.log("INSTALLING"):e.waiting&&await dialogs.alert("\nAn update is in progress. After finishing any work\nyou have in them, please close this and any other existing tabs\nrunning this web application and then open the site again.\nPlease note it may take some time to install and may not show\nany indication it is installing.\n",{ok:!1})}),registerServiceWorker=async({serviceWorkerPath:e,logger:t})=>{let n;console.log("--ready to register service worker",e);try{n=await navigator.serviceWorker.register(e)}catch(e){return void await dialogs.alert("\nThere was an error during registration (for offline ability).\nPlease refresh the page if you wish to reattempt.\n")}return t.addLogEntry({text:"Worker registration: Complete"}),respondToState({r:n,logger:t})},escapeHTML=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/,"&gt;"):"",kRSubmitter=/^(?:submit|button|image|reset|file)$/i,kRSuccessContrls=/^(?:input|select|textarea|keygen)/i,brackets=/(\[[^[\]]*\])/g;function serialize(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);let n=t.hash?{}:"";const r=t.serializer||(t.hash?hashSerializer:strSerialize),i=e&&e.elements?[...e.elements]:[],o=Object.create(null);return i.forEach(e=>{if(!t.disabled&&e.disabled||!e.name)return;if(!kRSuccessContrls.test(e.nodeName)||kRSubmitter.test(e.type))return;const{name:i,type:a,name:s,checked:l}=e;let{value:u}=e;if("checkbox"!==a&&"radio"!==a||l||(u=void 0),t.empty){if("checkbox"!==a||l||(u=""),"radio"===a&&(o[s]||l?l&&(o[s]=!0):o[s]=!1,void 0===u))return}else if(!u)return;if("select-multiple"===a){u=[];let o=!1;return[...e.options].forEach(e=>{const a=t.empty&&!e.value,s=e.value||a;e.selected&&s&&(o=!0,n=t.hash&&"[]"!==i.slice(i.length-2)?r(n,i+"[]",e.value):r(n,i,e.value))}),void(!o&&t.empty&&(n=r(n,i,"")))}n=r(n,i,u)}),t.empty&&Object.entries(o).forEach(([e,t])=>{t||(n=r(n,e,""))}),n}function parseKeys(e){const t=[],n=new RegExp(brackets);let r=/^([^[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}function hashAssign(e,t,n){if(0===t.length)return n;const r=t.shift(),i=r.match(/^\[(.+?)\]$/);if("[]"===r)return e=e||[],Array.isArray(e)?e.push(hashAssign(null,t,n)):(e._values=e._values||[],e._values.push(hashAssign(null,t,n))),e;if(i){const r=i[1],o=+r;isNaN(o)?(e=e||{})[r]=hashAssign(e[r],t,n):(e=e||[])[o]=hashAssign(e[o],t,n)}else e[r]=hashAssign(e[r],t,n);return e}function hashSerializer(e,t,n){if(t.match(brackets)){hashAssign(e,parseKeys(t),n)}else{const r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function strSerialize(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}function deserialize(e,t){Object.entries(t).forEach(([t,n])=>{let r=e[t];e[t]||"length"in(r=e[t+"[]"])||(r=e.querySelectorAll(`[name="${t}[]"]`));const{type:i}=r;if("checkbox"===i&&(r.checked=""!==n),Array.isArray(n)){if("select-multiple"===i)return void[...r.options].forEach(e=>{n.includes(e.value)&&(e.selected=!0)});n.forEach((e,t)=>{const n=r[t];if("checkbox"!==n.type)n.value=e;else{const t=n.value===e||"on"===e;n.checked=t}})}else r.value=n})}var languageSelect={main({langs:e,languages:t,followParams:n,$p:r}){jml("form",{class:"focus",id:"languageSelectionContainer",$on:{submit(e){e.preventDefault()}}},[["select",{name:"lang",size:e.length,$on:{click({target:{parentNode:{selectedOptions:e}}}){n("#languageSelectionContainer",()=>{r.set("lang",e[0].value,!0)})}}},e.map(({code:e})=>["option",{value:e},[t.getLanguageFromCode(e)]])]],body),history.state&&"object"==typeof history.state&&deserialize(document.querySelector("#languageSelectionContainer"),history.state)}},workSelect=({groups:e,lf:t,getNextAlias:n,$p:r,followParams:i})=>{const o=jml("form",{id:"workSelect",class:"focus",$on:{submit(e){e.preventDefault()}}},e.map((e,o)=>["div",[o>0?["br","br","br"]:"",["div",[t({key:e.directions.localeKey,fallback:!0})]],["br"],["select",{class:"file",name:"work"+o,dataset:{name:e.name.localeKey},$on:{change({target:{value:e}}){i("#workSelect",()=>{r.set("work",e)})}}},[["option",{value:""},["--"]],...e.files.map(({name:r})=>["option",{value:t(["workNames",e.id,r])},[n()]])]]]]),body);return history.state&&"object"==typeof history.state&&deserialize(document.querySelector("#workSelect"),history.state),o};const colors=["aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"],fonts=["Helvetica, sans-serif","Verdana, sans-serif","Gill Sans, sans-serif","Avantgarde, sans-serif","Helvetica Narrow, sans-serif","sans-serif","Times, serif","Times New Roman, serif","Palatino, serif","Bookman, serif","New Century Schoolbook, serif","serif","Andale Mono, monospace","Courier New, monospace","Courier, monospace","Lucidatypewriter, monospace","Fixed, monospace","monospace","Comic Sans, Comic Sans MS, cursive","Zapf Chancery, cursive","Coronetscript, cursive","Florence, cursive","Parkavenue, cursive","cursive","Impact, fantasy","Arnoldboecklin, fantasy","Oldtown, fantasy","Blippo, fantasy","Brushstroke, fantasy","fantasy"],nbsp2=nbsp.repeat(2),nbsp3=nbsp.repeat(3),getDataForSerializingParamsAsURL=()=>({form:$("form#browse"),random:$("#rand")||{},checkboxes:$$("input[type=checkbox]")});var resultsDisplayServerOrClient={caption:({heading:e,ranges:t})=>e+" "+t,startSeparator:({l:e})=>e("colon"),innerBrowseFieldSeparator:({l:e})=>e("comma-space"),ranges:({l:e,startRange:t,endVals:n,rangeNames:r})=>t+"-"+n.join(Templates.resultsDisplayServerOrClient.startSeparator({l:e}))+" ("+r+")",fieldValueAlias:({key:e,value:t})=>t+" ("+e+")",interlinearSegment:({lang:e,dir:t,html:n})=>`<span${e?` lang="${e}"`:""}${t?` dir="${t}"`:""}>${n}</span>`,interlinearTitle:({l:e,val:t})=>`<span class="interlintitle">${t}</span>${e("colon-space")}`,styles({$p:e,$pRaw:t,$pRawEsc:n,$pEscArbitrary:r,escapeQuotedCSS:i,escapeCSS:o,tableWithFixedHeaderAndFooter:a,checkedFieldIndexes:s,hasCaption:l}){const u=e.has("color",!0)&&"#"!==e.get("color",!0)?r("color"):r("colorName"),c=e.has("bgcolor",!0)&&"#"!==e.get("bgcolor",!0)?r("bgcolor"):r("bgcolorName"),f=1+(0+(l?2:0)),p=f+1+"em",h=`100% - ${p} - 2em - 0.5em`,d=`calc(${h})`,g=`calc(${h} + 0.5em)`;return["style",[("y"===t("caption")?a?".caption div.inner-caption, ":".caption, ":"")+("y"===t("header")?a?"":".thead .th, ":"")+("y"===t("footer")?a?"":".tfoot .th, ":"")+".tbody td"+` {\n    vertical-align: top;\n    font-style: ${n("fontstyle")};\n    font-variant: ${n("fontvariant")};\n    font-weight: ${r("fontweight")};\n    ${r("fontsize")?`font-size: ${r("fontsize")};`:""}\n    font-family: ${r("fontSeq")};\n\n    font-stretch: ${r("fontstretch")};\n    letter-spacing: ${r("letterspacing")};\n    line-height: ${r("lineheight")};\n    ${u?`color: ${o(u)} !important;`:""}\n    ${c?`background-color: ${o(c)} !important;`:""}\n}\n${o(r("pagecss")||"")}\n`+(a?`\nhtml, body, body > div {\n    height: 100%; /* Needed to ensure descendent heights retain 100%; could be avoided if didn't want percent on table height */\n    overflow-y: hidden; /* Not sure why we're getting extra here, but... */\n}\n.anchor-table-header {\n    background-color: ${c||"white"}; /* Header background (not just for div text inside header, but for whole header area) */\n    overflow-x: hidden; /* Not sure why we're getting extra here, but... */\n    position: relative; /* Ensures we are still flowing, but provides anchor for absolutely positioned thead below (absolute positioning positions relative to nearest non-static ancestor; clear demo at https://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=fixed ) */\n    padding-top: ${p}; /* Provides space for the header (and caption) (the one that is absolutely positioned below relative to here) */\n    height: 100%; /* Percent of the whole screen taken by the table */\n}\n.anchor-table-body {\n    overflow-y: auto; /* Provides scrollbars when text fills up beyond the height */\n    height: ${d}; /* If < 100%, the header anchor background color will seep below table */\n}\n\n.caption, .thead .th, .tfoot .th {\n    line-height: 0; /* th div will have own line-height; reducing here avoids fattening it by an inner div */\n    color: transparent; /* Hides the non-div duplicated header text */\n    white-space: nowrap; /* Ensures column header text uses up full width without overlap (esp. wrap no longer seems to work); this must be applied outside of the div */\n    border: none; /* We don't want a border for this invisible section */\n}\ndiv.inner-caption, .thead .th div.th-inner, .tfoot .th div.th-inner { /* divs are used as th is supposedly problematic */\n    position: absolute; /* Puts relative to nearest non-static ancestor (our relative header anchor) */\n    color: initial; /* Header must have an explicit color or it will get transparent container color */\n    line-height: normal; /* Revert ancestor line height of 0 */\n}\n.thead .th div.th-inner {\n    top: ${f}em; /* Ensures our header stays fixed at top outside of normal flow of table */\n}\ndiv.inner-caption {\n    top: 1em;\n}\n.tfoot .th div.th-inner { /* divs are used as th is supposedly problematic */\n    top: ${g}; /* Ensures our header stays fixed at top outside of normal flow of table */\n}\n.zupa div.zupa1 {\n    margin: 0 auto !important;\n    width: 0 !important;\n}\n.zupa div.th-inner, .zupa div.inner-caption {\n    width: 100%;\n    margin-left: -50%;\n    text-align: center;\n}\n`:"")+s.map((e,n)=>("y"===t("header")?a?`.thead .th:nth-child(${n+1}) div.th-inner, `:`.thead .th:nth-child(${n+1}), `:"")+("y"===t("footer")?a?`.tfoot .th:nth-child(${n+1}) div.th-inner, `:`.tfoot .th:nth-child(${n+1}), `:"")+`.tbody td:nth-child(${n+1}) `+`{\n    ${r("css"+(n+1))}\n}\n`).join("")+(r("interlintitle_css")?`\n/* http://salzerdesign.com/test/fixedTable.html */\n.interlintitle {\n    ${o(r("interlintitle_css"))}\n}\n`:"")+(c?`\nbody {\n    background-color: ${c};\n}\n`:"")]]},main({tableData:e,$p:t,$pRaw:n,$pRawEsc:r,$pEscArbitrary:i,escapeQuotedCSS:o,escapeCSS:a,escapeHTML:s,l:l,localizedFieldNames:u,fieldLangs:c,fieldDirs:f,caption:p,hasCaption:h,showInterlinTitles:d,determineEnd:g,getCanonicalID:m,canonicalBrowseFieldSetName:y,getCellValue:v,checkedAndInterlinearFieldInfo:b,interlinearSeparator:_="<br /><br />"}){const w={table:[["table",{class:"table",border:n("border")||"0"}],["tr",{class:"tr"}],["td"],["th",{class:"th"}],["caption",{class:"caption"}],["thead",{class:"thead"}],["tbody",{class:"tbody"}],["tfoot",{class:"tfoot"}]],div:[["div",{class:"table",style:"display: table;"}],["div",{class:"tr",style:"display: table-row;"}],["div",{class:"td",style:"display: table-cell;"}],["div",{class:"th",style:"display: table-cell;"}],["div",{class:"caption",style:"display: table-caption;"}],["div",{class:"thead",style:"display: table-header-group;"}],["div",{class:"tbody",style:"display: table-row-group;"}],["div",{class:"tfoot",style:"display: table-footer-group;"}]],"json-array":"json","json-object":"json"},x=t.get("outputmode",!0),k=w[Object.keys(w).includes(x)?x:"table"];if("json"===k)throw new Error("JSON support is currently not available");const[E,A,S,O,T,j,C,P]=k,[F,D,L]=b,N="yes"===n("headerfooterfixed"),$=(e,t)=>((e=JSON.parse(JSON.stringify(e))).push(t),e),I=([e,t],n)=>[e,Object.assign({},t,n)],R={start:!1,end:!1},U=[],M=this.showEmptyInterlinear,z=this.showTitleOnSingleInterlinear,B=(e,t)=>{if(!M&&(t||([...(e=(new DOMParser).parseFromString(e,"text/html").body).querySelectorAll("br")].forEach(e=>{e.remove()}),e=e.innerHTML),!e.trim()))return!0};return e.some((e,t)=>{const n=g({tr:e,foundState:R});if("boolean"==typeof n)return n;const r=m({tr:e});U.push($(I(A,{dataset:{row:n,"canonical-type":y,"canonical-id":r}}),D.map((n,r)=>{const i=L[r],o=i,{tdVal:a,htmlEscaped:s}=v({tr:e,idx:n}),p=o&&i.map(t=>{const{tdVal:n,htmlEscaped:r}=v({tr:e,idx:t});return console.log("showEmptyInterlinear",M,r),B(n,r)?"":o?Templates.resultsDisplayServerOrClient.interlinearSegment({lang:c[t],dir:f[t],html:(d?Templates.resultsDisplayServerOrClient.interlinearTitle({l:l,val:u[t]}):"")+n}):n}).filter(e=>""!==e);return I(S,{id:"row"+(t+1)+"col"+(r+1),lang:c[n],dir:f[n],dataset:{col:u[n]},innerHTML:(o&&!B(a,s)&&(z||p.length)?Templates.resultsDisplayServerOrClient.interlinearSegment({lang:c[n],html:(d?Templates.resultsDisplayServerOrClient.interlinearTitle({l:l,val:u[n]}):"")+a}):a)+(i&&p.length?_+p.join(_):"")})})))}),["div",[Templates.resultsDisplayServerOrClient.styles({$p:t,$pRaw:n,$pRawEsc:r,$pEscArbitrary:i,escapeQuotedCSS:o,escapeCSS:a,tableWithFixedHeaderAndFooter:N,checkedFieldIndexes:D,hasCaption:h}),(e=>N?["div",{class:"table-responsive anchor-table-header zupa"},[["div",{class:"table-responsive anchor-table-body"},e]]]:["div",{class:"table-responsive"},e])([$(E,[p?$(T,[p,N?["div",{class:"zupa1"},[["div",{class:"inner-caption"},[["span",[p]]]]]]:""]):"","0"!==n("header")?$(j,[$(A,F.map((e,t)=>{const n=L[t];return e=s(e)+(n?l("comma-space")+n.map(e=>u[e]).join(l("comma-space")):""),$(O,[e,N?["div",{class:"zupa1"},[["div",{class:"th-inner"},[["span",[e]]]]]]:""])}))]):"",n("footer")&&"0"!==n("footer")?$(P,[$(A,F.map((e,t)=>{const n=L[t];return e=s(e)+(n?l("comma-space")+n.map(e=>u[e]).join(l("comma-space")):""),$(O,[e,N?["div",{class:"zupa1"},[["div",{class:"th-inner"},[["span",[e]]]]]]:""])}))]):"",$(C,U)])])]]}},resultsDisplayClient={anchorRowCol:({anchorRowCol:e})=>$("#"+e),anchors:({escapedRow:e,escapedCol:t})=>$('tr[data-row="'+e+'"]'+(t?'> td[data-col="'+t+'"]':"")),main(...e){let t;try{t=Templates.resultsDisplayServerOrClient.main(...e)}catch(e){"JSON support is currently not available"===e.message&&dialogs.alert(e.message)}jml(...t,body)}};const Templates={languageSelect:languageSelect,workSelect:workSelect,workDisplay:workDisplay={bdo:({fallbackDirection:e,message:t})=>["div",{style:"display: inline; direction: "+e},[t]],columnsTable:({ld:e,fieldInfo:t,$p:n,le:r,iil:i,l:o,metadataObj:a,preferredLocale:s,schemaItems:l,fieldMatchesLocale:u})=>["table",{border:"1",cellpadding:"5",align:"center"},[["tr",[["th",[e("fieldno")]],["th",{align:"left",width:"20"},[e("field_enabled")]],["th",[e("field_title")]],["th",[e("fieldinterlin")]],["th",[e("fieldcss")]]]],...t.map((e,a)=>{const s=a+1,l="checked"+s,u="field"+s,c=n.get(u);return["tr",[["td",[String(s)]],r("check-columns-to-browse","td","title",{},[r("yes","input","value",{class:"fieldSelector",id:l,name:i("checked")+s,checked:n.get(l)!==o("no")&&(n.has(l)||!1!==e.onByDefault),type:"checkbox"})]),r("check-sequence","td","title",{},[["select",{name:i("field")+s,id:u,size:"1"},t.map(({field:e,fieldAliasOrName:t},r)=>{return["option",{dataset:{name:e},value:t,selected:c&&c===t||r===a&&!n.has(u)},[t]]})]]),["td",[r("interlinear-tips","input","title",{name:i("interlin")+s,value:n.get("interlin"+s)})]],["td",[["input",{name:i("css")+s,value:n.get("css"+s)}]]]]]}),["tr",[["td",{colspan:3},[r("check_all","input","value",{type:"button",$on:{click(){$$(".fieldSelector").forEach(e=>{e.checked=!0})}}}),r("uncheck_all","input","value",{type:"button",$on:{click(){$$(".fieldSelector").forEach(e=>{e.checked=!1})}}}),r("checkmark_locale_fields_only","input","value",{type:"button",$on:{click(){t.forEach(({field:e},t)=>{const n=t+1,r=$("#field"+n).selectedOptions[0].dataset.name;$("#checked"+n).checked=u(r)})}}})]]]]]],advancedFormatting:({ld:e,il:t,l:n,lo:r,le:i,$p:o,hideFormattingSection:a})=>["td",{id:"advancedformatting",style:{display:a?"none":"block"}},[["h3",[e("advancedformatting")]],["label",[e("textcolor"),nbsp2,["select",{name:t("colorName")},colors.map((e,t)=>{const i={value:n(["param_values","colors",e])};return(o.get("colorName")===n(["param_values","colors",e])||1===t&&!o.has("colorName"))&&(i.selected="selected"),r(["param_values","colors",e],i)})]]],["label",[nbsp,e("or_entercolor"),nbsp2,["input",{name:t("color"),type:"text",value:o.get("color")||"#",size:"7",maxlength:"7"}]]],["br"],["br"],["label",[e("backgroundcolor"),nbsp2,["select",{name:t("bgcolorName")},colors.map((e,t)=>{const i={value:n(["param_values","colors",e])};return(o.get("bgcolorName")===n(["param_values","colors",e])||14===t&&!o.has("bgcolorName"))&&(i.selected="selected"),r(["param_values","colors",e],i)})]]],["label",[nbsp,e("or_entercolor"),nbsp2,["input",{name:t("bgcolor"),type:"text",value:o.get("bgcolor")||"#",size:"7",maxlength:"7"}]]],["br"],["br"],["label",[e("text_font"),nbsp2,["select",{name:t("fontSeq"),dir:"ltr"},fonts.map((e,t)=>{const n={value:e};return(o.get("fontSeq")===e||7===t&&!o.has("fontSeq"))&&(n.selected="selected"),["option",n,[e]]})]]],["br"],["br"],["label",[e("font_style"),nbsp2,["select",{name:t("fontstyle")},["italic","normal","oblique"].map((e,t)=>{const i={value:n(["param_values","fontstyle",e])};return(o.get("fontstyle")===n(["param_values","fontstyle",e])||1===t&&!o.has("fontstyle"))&&(i.selected="selected"),r(["param_values","fontstyle",e],i)})]]],["br"],["div",[e("font_variant"),nbsp3,["label",[["input",{name:t("fontvariant"),type:"radio",value:n(["param_values","fontvariant","normal"]),checked:o.get("fontvariant")!==e(["param_values","fontvariant","small-caps"])}],e(["param_values","fontvariant","normal"]),nbsp]],["label",[["input",{name:t("fontvariant"),type:"radio",value:n(["param_values","fontvariant","small-caps"]),checked:o.get("fontvariant")===e(["param_values","fontvariant","small-caps"])}],e(["param_values","fontvariant","small-caps"]),nbsp]]]],["br"],["label",[e("font_weight")," (normal, bold, 100-900, etc.):",nbsp2,["input",{name:t("fontweight"),type:"text",value:o.has("fontweight")?o.get("fontweight"):"normal",size:"7",maxlength:"12"}]]],["br"],["label",[e("font_size")," (14pt, 14px, small, 75%, etc.):",nbsp2,["input",{name:t("fontsize"),type:"text",value:o.get("fontsize"),size:"7",maxlength:"12"}]]],["br"],["label",{dir:"ltr"},[e("font_stretch"),nbsp,["select",{name:t("fontstretch")},["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"].map(t=>{const n={value:e(["param_values","font-stretch",t])};return(o.get("fontstretch")===t||!o.has("fontstretch")&&"normal"===t)&&(n.selected="selected"),["option",n,[e(["param_values","font-stretch",t])]]})]]],["br"],["br"],["label",[e("letter_spacing")," (normal, .9em, -.05cm): ",["input",{name:t("letterspacing"),type:"text",value:o.has("letterspacing")?o.get("letterspacing"):"normal",size:"7",maxlength:"12"}]]],["br"],["label",[e("line_height")," (normal, 1.5, 22px, 150%): ",["input",{name:t("lineheight"),type:"text",value:o.has("lineheight")?o.get("lineheight"):"normal",size:"7",maxlength:"12"}]]],["br"],["br"],i("tableformatting_tips","h3","title",{},[e("tableformatting")]),["div",[e("header_wstyles"),nbsp2,...[["yes",e(["param_values","y"])],["no",e(["param_values","n"])],["none",e(["param_values","0"])]].map(([n,r],i,a)=>["label",[["input",{name:t("header"),type:"radio",value:r,checked:o.get("header")===r||!o.has("header")&&1===i}],e(n),i===a.length-1?"":nbsp3]])]],["div",[e("footer_wstyles"),nbsp2,...[["yes",e(["param_values","y"])],["no",e(["param_values","n"])],["none",e(["param_values","0"])]].map(([n,r],i,a)=>["label",[["input",{name:t("footer"),type:"radio",value:r,checked:o.get("footer")===r||!o.has("footer")&&2===i}],e(n),i===a.length-1?"":nbsp3]])]],["label",[["input",{name:t("headerfooterfixed"),type:"checkbox",value:n("yes"),checked:o.get("headerfooterfixed")===n("yes")}],nbsp2,e("headerfooterfixed-wishtoscroll")]],["br"],["div",[e("caption_wstyles"),nbsp2,...[["yes",e(["param_values","y"])],["no",e(["param_values","n"])],["none",e(["param_values","0"])]].map(([n,r],i,a)=>["label",[["input",{name:t("caption"),type:"radio",value:r,checked:o.get("caption")===r||!o.has("caption")&&2===i}],e(n),i===a.length-1?"":nbsp3]])]],["br"],["div",[e("table_wborder"),nbsp2,["label",[["input",{name:t("border"),type:"radio",value:"1",checked:"0"!==o.get("border")}],e("yes"),nbsp3]],["label",[["input",{name:t("border"),type:"radio",value:"0",checked:"0"===o.get("border")}],e("no")]]]],["div",[e("interlin_repeat_field_names"),nbsp2,["label",[["input",{name:t("interlintitle"),type:"radio",value:"1",checked:"0"!==o.get("interlintitle")}],e("yes"),nbsp3]],["label",[["input",{name:t("interlintitle"),type:"radio",value:"0",checked:"0"===o.get("interlintitle")}],e("no")]]]],["label",[e("interlintitle_css"),nbsp2,["input",{name:t("interlintitle_css"),type:"text",value:o.get("interlintitle_css")||"",size:"12"}]]],["br"],["br"],i("pageformatting_tips","h3","title",{},[e("pageformatting")]),["label",[e("page_css"),nbsp2,["textarea",{name:t("pagecss"),title:n("page_css_tips"),value:o.get("pagecss")}]]],["br"],i("outputmode_tips","label","title",{},[e("outputmode"),nbsp2,["select",{name:t("outputmode")},["table","div"].map(e=>{const t={value:e};return o.get("outputmode")===e&&(t.selected="selected"),r(["param_values","outputmode",e],t)})]])]],addRandomFormFields:({il:e,ld:t,l:n,le:r,$p:i,serializeParamsAsURL:o,content:a})=>{[[["td",{colspan:12,align:"center"},[["br"],t("or"),["br"],["br"]]]],[["td",{colspan:12,align:"center"},[["label",[t("rnd"),nbsp3,["input",{id:"rand",name:e("rand"),type:"checkbox",value:n("yes"),checked:i.get("rand")===n("yes")}]]],nbsp3,["label",[t("verses-context"),nbsp,["input",{name:e("context"),type:"number",min:1,size:4,value:i.get("context")}]]],nbsp3,r("view-random-URL","input","value",{type:"button",$on:{click(){const e=o(_extends({},getDataForSerializingParamsAsURL(),{type:"randomResult"}));$("#randomURL").value=e}}}),["input",{id:"randomURL",type:"text"}]]]]].forEach(e=>{e&&e.length&&a.push(["tr",e])})},getPreferences:({siteBaseURL:e,languageParam:t,lf:n,paramsSetter:r,replaceHash:i,getFieldAliasOrNames:o,work:a,langs:s,imfl:l,l:u,localizeParamNames:c,namespace:f,hideFormattingSection:p,groups:h})=>["div",{style:{textAlign:"left"},id:"preferences",hidden:"true"},[["div",{style:"margin-top: 10px;"},[["label",[u("localizeParamNames"),["input",{id:"localizeParamNames",type:"checkbox",checked:c,$on:{change({target:{checked:e}}){localStorage.setItem(f+"-localizeParamNames",e)}}}]]]]],["div",[["label",[u("Hide formatting section"),["input",{id:"hideFormattingSection",type:"checkbox",checked:p,$on:{change({target:{checked:e}}){$("#advancedformatting").style.display=e?"none":"block",localStorage.setItem(f+"-hideFormattingSection",e)}}}]]]]],["div",[["label",{for:"prefLangs"},[u("Preferred language(s)")]],["br"],["select",{id:"prefLangs",multiple:"multiple",size:s.length,$on:{change({target:{selectedOptions:e}}){localStorage.setItem(f+"-langCodes",JSON.stringify(Array.from(e).map(e=>e.value)))}}},s.map(e=>{let t=localStorage.getItem(f+"-langCodes");t=t&&JSON.parse(t);const n={value:e.code};return t&&t.includes(e.code)&&(n.selected="selected"),["option",n,[l(["languages",e.code])]]})]]],["div",[["button",{title:u("bookmark_generation_tooltip"),$on:{async click(){const e=(new Date).getTime(),t=e,n=e,s=new Blob([(new XMLSerializer).serializeToString(jml({$document:{$DOCTYPE:{name:"NETSCAPE-Bookmark-file-1"},title:u("Bookmarks"),body:[["h1",[u("Bookmarks_Menu")]],...(await o()).flatMap(({groupName:e,worksToFields:o})=>[["dt",[["h3",{ADD_DATE:t,LAST_MODIFIED:n},[e]]]],["dl",[["p"],...o.map(({fieldAliasOrNames:e,workName:o,shortcut:s})=>{const l=r(_extends({},getDataForSerializingParamsAsURL(),{fieldAliasOrNames:e,workName:a,type:"shortcutResult"}));return["dt",[["a",{href:i(l)+`&work=${o}&${o}-startEnd1=%s`,ADD_DATE:t,LAST_MODIFIED:n,SHORTCUTURL:s},[o]]]]})]]])]}})).replace(/<dt>/g,"\n<dt>")],{type:"text/html"}),l=window.URL.createObjectURL(s);jml("a",{hidden:!0,download:"bookmarks.html",href:l},body).click(),URL.revokeObjectURL(l)}}},[u("Generate_bookmarks")]]]]]],addBrowseFields:({browseFields:e,fieldInfo:t,ld:n,i:r,iil:i,$p:o,content:a})=>{const s=o.get("work");[r>0?[["td",{colspan:12,align:"center"},[["br"],n("or"),["br"],["br"]]]]:"",[...(()=>{const t=t=>e.reduce((e,{fieldName:n,aliases:a,fieldSchema:{minimum:l,maximum:u}},c)=>{const f=s+"-"+i(t)+(r+1)+"-"+(c+1),p=f;return e["#"].push(["td",[["label",{for:f},[n]]]],["td",[a?["datalist",{id:"dl-"+p},a.map(e=>["option",[e]])]:"",a?["input",{name:f,id:p,class:"browseField",list:"dl-"+p,value:o.get(f,!0),$on:"start"===t?{change(e){$$("input.browseField").forEach(t=>{t.id.includes(r+1+"-"+(c+1))&&(t.value=e.target.value)})}}:void 0}]:["input",{name:f,id:p,type:"number",min:l,max:u,value:o.get(f,!0)}],nbsp3]]),e},{"#":[]});return[t("start"),["td",[["b",[n("to")]],nbsp3]],t("end")]})(),["td",[e.length>1?n("versesendingdataoptional"):""]]],[["td",{colspan:4*e.length+2+1,align:"center"},[["table",[["tr",[e.reduce((e,{fieldName:t,aliases:n,fieldSchema:{minimum:a,maximum:l}},u)=>{const c=s+"-"+i("anchor")+(r+1)+"-"+(u+1),f=c;return e["#"].push(["td",[["label",{for:c},[t]]]],["td",[n?["datalist",{id:"dl-"+f},n.map(e=>["option",[e]])]:"",n?["input",{name:c,id:f,class:"browseField",list:"dl-"+f,value:o.get(c,!0)}]:["input",{name:c,id:f,type:"number",min:a,max:l,value:o.get(c,!0)}],nbsp2]]),e},{"#":[["td",{style:"font-weight: bold; vertical-align: bottom;"},[n("anchored-at")+nbsp3]]]}),["td",[["label",[n("field")+nbsp2,["select",{name:i("anchorfield")+(r+1),size:"1"},t.map(({fieldAliasOrName:e})=>{return o.get(i("anchorfield")+(r+1),!0)===e?["option",{selected:!0},[e]]:["option",[e]]})]]]]]]]]]]]]].forEach(e=>{e&&e.length&&a.push(["tr",e])})},main:({siteBaseURL:e,lf:t,languageParam:n,l:r,namespace:i,heading:o,fallbackDirection:a,imfl:s,langs:l,fieldInfo:u,localizeParamNames:c,serializeParamsAsURL:f,paramsSetter:p,replaceHash:h,getFieldAliasOrNames:d,hideFormattingSection:g,$p:m,metadataObj:y,il:v,le:b,ld:_,iil:w,fieldMatchesLocale:x,preferredLocale:k,schemaItems:E,content:A,groups:S})=>{const O=m.get("work"),T=({type:e})=>f(_extends({},getDataForSerializingParamsAsURL(),{type:e}));jml("div",{class:"focus"},[["div",{style:"float: left;"},[["button",{$on:{click(){const e=$("#preferences");e.hidden=!e.hidden}}},[r("Preferences")]],Templates.workDisplay.getPreferences({siteBaseURL:e,languageParam:n,lf:t,paramsSetter:p,replaceHash:h,getFieldAliasOrNames:d,work:O,langs:l,imfl:s,l:r,localizeParamNames:c,namespace:i,groups:S,hideFormattingSection:g})]],["h2",[o]],["br"],["form",{id:"browse",$on:{submit(e){e.preventDefault()}},name:v("browse")},[["table",{align:"center"},A],["br"],["div",{style:"margin-left: 20px"},[["br"],["br"],["table",{border:"1",align:"center",cellpadding:"5"},[["tr",{valign:"top"},[["td",[Templates.workDisplay.columnsTable({ld:_,fieldInfo:u,$p:m,le:b,iil:w,l:r,metadataObj:y,preferredLocale:k,schemaItems:E,fieldMatchesLocale:x}),b("save-settings-URL","input","value",{type:"button",$on:{click(){const e=T({type:"saveSettings"});$("#settings-URL").value=e}}}),["input",{id:"settings-URL"}]]],Templates.workDisplay.advancedFormatting({ld:_,il:v,l:r,lo:(e,t)=>["option",t,[r({key:e,fallback:({message:e})=>(t.dir=a,e)})]],le:b,$p:m,hideFormattingSection:g})]]]]]],["p",{align:"center"},[b("submitgo","input","value",{type:"submit",$on:{click(){const e=T({type:"saveSettings"}).replace(/^[^#]*#/,"");console.log("history thisParams",e),history.replaceState(e,document.title,location.href);const t=T({type:"result"});location.href=t}}})]]]]],body)}},resultsDisplayServerOrClient:resultsDisplayServerOrClient,resultsDisplayClient:resultsDisplayClient,defaultBody(){for($("html").style.height="100%";body.hasChildNodes();)body.firstChild.remove();return jml(body,{style:"height: 100%;"})}};function _prepareParam(e,t){if(t||!this.localizeParamNames)return e;const n=/\d+(-\d+)?$/,r=e.match(n);return r?this.l10n(["params","indexed",e.replace(n,"")])+r[0]:this.l10n(["params",e])}function IntlURLSearchParams({l10n:e,params:t}={}){this.l10n=e,t||(t=location.hash.slice(1)),"string"==typeof t&&(t=new URLSearchParams(t)),this.params=t}Templates.permissions={versionChange(){$("#versionChange").showModal()},addLogEntry({text:e}){const t=$("#installationLogContainer");try{t.showModal(),$("#dialogContainer").hidden=!1}catch(e){}$("#installationLog").append(e+"\n")},exitDialogs(){const e=$("#dialogContainer");e&&(e.hidden=!0)},dbError({type:e,escapedErrorMessage:t}){e&&jml("span",[e," ",t],$("#dbError")),$("#dbError").showModal()},errorRegistering(e){e&&jml("span",[e],$("#errorRegistering")),$("#errorRegistering").showModal()},browserNotGrantingPersistence(){$("#browserNotGrantingPersistence").showModal()},main({l:e,ok:t,refuse:n,close:r,closeBrowserNotGranting:i}){const o=jml("dialog",{style:"text-align: center; height: 100%",id:"installationLogContainer",class:"focus"},[["p",[e("wait-installing")]],["div",{style:"height: 80%; overflow: auto;"},[["pre",{id:"installationLog"},[]]]]]);let a="";t&&(a=jml("dialog",{id:"willRequestStoragePermissions",$on:{close:r}},[["section",[e("will-request-storage-permissions")]],["br"],["div",{class:"focus"},[["button",{$on:{click:t}},[e("OK")]],["br"],["br"],["button",{$on:{click:n}},[e("refuse-request-storage-permissions")]]]]]));const s=jml("dialog",{id:"errorRegistering"},[["section",[e("errorRegistering")]]]);let l="";i&&(l=jml("dialog",{id:"browserNotGrantingPersistence"},[["section",[e("browser-not-granting-persistence")]],["br"],["div",{class:"focus"},[["button",{$on:{click:i}},[e("OK")]]]]]));const u=jml("dialog",{id:"versionChange"},[["section",[e("versionChange")]]]),c=jml("dialog",{id:"dbError"},[["section",[e("dbError")]]]);return jml("div",{id:"dialogContainer",style:"height: 100%"},[o,a,l,s,u,c],body),[o,a,l,s,u,c]}},IntlURLSearchParams.prototype.get=function(e,t){return this.params.get(_prepareParam.call(this,e,t))},IntlURLSearchParams.prototype.getAll=function(e,t){return this.params.getAll(_prepareParam.call(this,e,t))},IntlURLSearchParams.prototype.has=function(e,t){return this.params.has(_prepareParam.call(this,e,t))},IntlURLSearchParams.prototype.delete=function(e,t){return this.params.delete(_prepareParam.call(this,e,t))},IntlURLSearchParams.prototype.set=function(e,t,n){return this.params.set(_prepareParam.call(this,e,n),t)},IntlURLSearchParams.prototype.append=function(e,t,n){return this.params.append(_prepareParam.call(this,e,n),t)},IntlURLSearchParams.prototype.toString=function(){return this.params.toString()};workSelect=async function({files:e,lang:t,fallbackLanguages:n,$p:r,followParams:i}){try{const o=await simpleGetJson(e),a=e=>o["localization-strings"][e],s=await simpleGetJson(o.groups.reduce((e,t)=>{const n=(o.metadataBaseDirectory||"")+(t.metadataBaseDirectory||"")+"/";return t.files.reduce((e,t)=>e.concat(n+t.metadataFile),e)},[])),l=dist({locales:t.map(a),fallbackLocales:n.map(a)}).getFormatter();document.title=l({key:"browserfile-workselect",fallback:!0});const u=s[Symbol.iterator](),c=()=>{const e=u.next().value;return getMetaProp(t,e,"alias")};Templates.workSelect({groups:o.groups,lf:l,getNextAlias:c,$p:r,followParams:i})}catch(e){dialogs.alert(e)}};const replaceHash=e=>location.href.replace(/#.*$/,"")+"#"+e.toString(),getSerializeParamsAsURL=function(...e){const t=getParamsSetter(...e);return function(...e){const n=t(...e);return replaceHash(n)}},getParamsSetter=function({l:e,il:t,$p:n}){return function({form:r,random:i={},checkboxes:o,type:a,fieldAliasOrNames:s,workName:l}){const u=new URLSearchParams(n.params),c=serialize(r,{hash:!0,empty:!0});switch(Object.keys(c).forEach(e=>{u.set(e,c[e])}),u.delete(t("rand")),u.set(t("rand"),i.checked?e("yes"):e("no")),o.forEach(t=>{u.delete(t.name),u.set(t.name,t.checked?e("yes"):e("no"))}),a){case"saveSettings":u.delete(t("rand"));break;case"shortcutResult":{u.delete(t("rand"));let n=1;for(;u.has(`anchorfield${n}`,!0);)u.delete(`anchorfield${n}`,!0),n++;n=1;let r=1;for(;u.has(`${l}-start${n}-${r}`,!0);){for(;u.has(`${l}-start${n}-${r}`,!0);)u.delete(`${l}-start${n}-${r}`,!0),u.delete(`${l}-end${n}-${r}`,!0),u.delete(`${l}-anchor${n}-${r}`,!0),r++;r=1,n++}for(n=1;u.has(`field${n}`,!0);)u.delete(`field${n}`,!0),u.delete(`checked${n}`,!0),u.delete(`interlin${n}`,!0),u.delete(`css${n}`,!0),n++;s.forEach((t,n)=>{u.set(`field${n+1}`,t,!0),u.set(`checked${n+1}`,e("yes"),!0),u.set(`interlin${n+1}`,""),u.set(`css${n+1}`,"")}),u.set("work",l,!0)}case"randomResult":case"result":("randomResult"===a||i.checked)&&(u.delete(t("rand")),u.set(t("rand"),e("yes"))),u.set(t("result"),e("yes"))}return u}};var self$1,workDisplay=async function({l:e,languageParam:t,lang:n,preferredLocale:r,languages:i,fallbackLanguages:o,$p:a}){const s=this.langData.languages,l=this.getDirectionForLanguageCode(o[0]),u=localStorage.getItem(this.namespace+"-localizeParamNames"),c=a.localizeParamNames=a.has("i18n",!0)?"1"===a.get("i18n",!0):"true"===u||"false"!==u&&this.localizeParamNames,f=localStorage.getItem(this.namespace+"-hideFormattingSection"),p=a.has("formatting",!0)?"0"===a.get("formatting",!0):"true"===f||"false"!==f&&this.hideFormattingSection;try{const u=await this.getWorkData({lang:n,fallbackLanguages:o,work:a.get("work")}),{lf:f,fileData:h,metadataObj:d}=u,g=objectWithoutProperties(u,["lf","fileData","metadataObj"]);document.title=f({key:"browserfile-workdisplay",values:{work:h?getMetaProp(n,d,"alias"):""},fallback:!0}),await async function({lf:u,metadataObj:f,getFieldAliasOrName:h,schemaObj:d,schemaItems:g,fieldInfo:m,pluginsForWork:y,groupsToWorks:v}){const b=c?t=>e(["params",t]):e=>e,_=c?t=>e(["params","indexed",t]):e=>e,w=i.localeFromLangData.bind(i),x=dist({locales:n.map(w),fallbackLocales:o.map(w)}).getFormatter(),k=(t,n,r)=>e({key:t,values:n,formats:r,fallback:({message:e})=>Templates.workDisplay.bdo({fallbackDirection:l,message:e})}),E=new Metadata({metadataObj:f});if(y){console.log("pluginsForWork",y);const{lang:e}=this;y.iterateMappings(({plugin:t,pluginName:n,pluginLang:o,onByDefaultDefault:a,placement:s,applicableFields:l,meta:c})=>{const p=({applicableField:t,targetLanguage:l,onByDefault:p,metaApplicableField:h}={})=>{const d=y.getPluginObject(n),g=E.getFieldLang(t);d.getTargetLanguage&&(l=d.getTargetLanguage({applicableField:t,targetLanguage:l,pluginLang:o,applicableFieldLang:g}));const v=escapePlugin({pluginName:n,applicableField:t,targetLanguage:l||o||g});"{locale}"===l&&(l=r);const b=getMetaProp(e,f,["fieldnames",t]),_=d.getFieldAliasOrName?d.getFieldAliasOrName({locales:e,lf:u,targetLanguage:l,applicableField:t,applicableFieldI18N:b,meta:c,metaApplicableField:h,targetLanguageI18N:i.getLanguageFromCode(l)}):i.getFieldNameFromPluginNameAndLocales({pluginName:n,locales:e,lf:u,targetLanguage:l,applicableFieldI18N:b,meta:c,metaApplicableField:h});m.splice("end"===s?1/0:s,0,{field:`${this.namespace}-plugin-${v}`,fieldAliasOrName:_,onByDefault:"boolean"==typeof p?p:a||!1,applicableField:t,metaApplicableField:h,fieldLang:l})};y.processTargetLanguages(l,p)||p()})}const A=E.getFieldMatchesLocale({namespace:this.namespace,preferredLocale:r,schemaItems:g,pluginsForWork:y}),S=[];this.getBrowseFieldData({metadataObj:f,schemaItems:g,getFieldAliasOrName:h,callback({browseFields:e,i:t}){Templates.workDisplay.addBrowseFields({browseFields:e,fieldInfo:m,ld:k,i:t,iil:_,$p:a,content:S})}});const O=getSerializeParamsAsURL({l:e,il:b,$p:a}),T=getParamsSetter({l:e,il:b,$p:a}),{groups:j}=await simpleGetJson(this.files),C=getMetaProp(n,f,"heading"),P=(()=>{const e=Promise.all(v.map(async({name:e,workNames:t,shortcuts:r})=>({groupName:e,worksToFields:await Promise.all(t.map(async(e,t)=>({workName:e,shortcut:r[t],fieldAliasOrNames:(await this.getWorkData({lang:n,fallbackLanguages:o,work:e})).fieldInfo.map(({fieldAliasOrName:e})=>e)})))})));return async()=>e})();Templates.workDisplay.main({languageParam:t,siteBaseURL:this.siteBaseURL,lang:n,lf:u,l:e,namespace:this.namespace,groups:j,heading:C,imfl:x,fallbackDirection:l,langs:s,fieldInfo:m,localizeParamNames:c,serializeParamsAsURL:O,paramsSetter:T,replaceHash:replaceHash,getFieldAliasOrNames:P,hideFormattingSection:p,$p:a,metadataObj:f,il:b,le:(t,n,r,i,o)=>(i[r]=e({key:t,fallback:({message:e})=>(i.dir=l,e)}),[n,i,o]),ld:k,iil:_,fieldMatchesLocale:A,preferredLocale:r,schemaItems:g,content:S})}.call(this,_extends({lf:f,metadataObj:d},g))}catch(e){dialogs.alert(e)}},RtlDetectLib=self$1={_escapeRegExpPattern:function(e){return"string"!=typeof e?e:e.replace(/([\.\*\+\^\$\[\]\\\(\)\|\{\}\,\-\:\?])/g,"\\$1")},_toLowerCase:function(e,t){return"string"!=typeof e?t&&e:e.toLowerCase()},_toUpperCase:function(e,t){return"string"!=typeof e?t&&e:e.toUpperCase()},_trim:function(e,t,n){var r,i=[],o=function(e){i.push("^"+e+"+|"+e+"+$")};if("boolean"==typeof t&&(n=t,t=null),"string"!=typeof e)return n&&e;if(Array.isArray(t)&&t.map(function(e){var t=self$1._escapeRegExpPattern(e);o(t)}),"string"==typeof t){var a=self$1._escapeRegExpPattern(t);o(a)}t||o("\\s");var s="("+i.join("|")+")";for(r=new RegExp(s,"g");e.match(r);)e=e.replace(r,"");return e},_parseLocale:function(e){var t,n=/^([a-zA-Z]*)([_\-a-zA-Z]*)$/.exec(e);if(e&&n)return n[2]=self$1._trim(n[2],["-","_"]),{lang:self$1._toLowerCase(n[1]),countryCode:t=self$1._toUpperCase(n[2])||t}},isRtlLang:function(e){var t=self$1._parseLocale(e);if(t)return self$1._BIDI_RTL_LANGS.indexOf(t.lang)>=0},getLangDir:function(e){return self$1.isRtlLang(e)?"rtl":"ltr"}};Object.defineProperty(self$1,"_BIDI_RTL_LANGS",{value:["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],writable:!1,enumerable:!0,configurable:!1});var rtlDetect=RtlDetectLib,rtlDetect_1={isRtlLang:rtlDetect.isRtlLang,getLangDir:rtlDetect.getLangDir},rtlDetect_3=rtlDetect_1.getLangDir;const fieldValueAliasRegex=/^.* \((.*?)\)$/,getRawFieldValue=e=>"string"==typeof e?e.replace(fieldValueAliasRegex,"$1"):e,setAnchor=({applicableBrowseFieldSet:e,fieldValueAliasMapPreferred:t,ilRaw:n,iil:r,max:i,$p:o})=>{const a=e.map(e=>e.fieldSchemaIndex),s=o.get("work");let l;const u=n("anchorrowcol");if(u&&(l=Templates.resultsDisplayClient.anchorRowCol({anchorRowCol:u})),!l){const e=[];let n="";for(let l,u=1;!l&&!e.length;u++)for(let c=1;;c++){const f=s+"-anchor"+u+"-"+c,p=o.get(f,!0);if(!p){(u===i||e.length)&&(l=!0);break}n=o.get(r("anchorfield")+u,!0);const h=a[c-1],d=getRawFieldValue(p),g=t[h]&&t[h][d];e.push(g||p)}if(e.length){const t=e=>(e||"").replace(/["\\]/g,"\\$&"),r=t(e.join("-")),i=n?t(n):void 0;l=Templates.resultsDisplayClient.anchors({escapedRow:r,escapedCol:i})}}l&&l.scrollIntoView()},resultsDisplayClient$1=async function(e){const t=await navigator.storage.persisted(),n=this.skipIndexedDB||!t||!navigator.serviceWorker.controller,r=localStorage.getItem(this.namespace+"-localizeParamNames"),{fieldInfo:i,$p:o,browseFieldSets:a,applicableBrowseFieldSet:s,lang:l,metadataObj:u,fileData:c,fieldValueAliasMapPreferred:f,lf:p,iil:h,ilRaw:d,templateArgs:g}=await resultsDisplayServerOrClient$1.call(this,_extends({},e,{skipIndexedDB:n,prefI18n:r}));document.title=p({key:"browserfile-resultsdisplay",values:{work:c?getMetaProp(l,u,"alias"):""},fallback:!0}),Templates.resultsDisplayClient.main(g),setAnchor({applicableBrowseFieldSet:s,fieldValueAliasMapPreferred:f,iil:h,ilRaw:d,$p:e.$p,max:a.length}),i.forEach(({plugin:e,applicableField:t,meta:n,j:r})=>{e&&e.done&&e.done({$p:o,applicableField:t,meta:n,j:r,thisObj:this})})},resultsDisplayServerOrClient$1=async function({l:e,lang:t,fallbackLanguages:n,imfLocales:r,$p:i,skipIndexedDB:o,noIndexedDB:a,prefI18n:s,files:l,allowPlugins:u,langData:c,basePath:f="",dynamicBasePath:p=""}){const h=new Languages({langData:c}),d=({schemaItems:e,fieldInfo:n,metadataObj:r,getFieldAliasOrName:i,usePreferAlias:o})=>n.map(({field:n,plugin:a})=>{if(a)return;const{preferAlias:s,fieldValueAliasMap:l}=getFieldNameAndValueAliases({field:n,schemaItems:e,metadataObj:r,getFieldAliasOrName:i,lang:t});return o?l?(Object.entries(l).forEach(([e,t])=>{Array.isArray(t)?l[e]=t.map(t=>Templates.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:t})):t&&"object"==typeof t?"string"==typeof s?l[e]=Templates.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:t[s]}):Object.entries(t).forEach(([t,n])=>{l[e][t]=Templates.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:n})}):l[e]=Templates.resultsDisplayServerOrClient.fieldValueAlias({key:e,value:t})}),!1!==s?l:void 0):void 0:!1!==s?l:void 0}),g=(e,t)=>{let n;const o=i.get(e,!0);return function e(t){if(Array.isArray(t))return t.some(e);return Object.values(t).some((r,i)=>"string"!=typeof r?e(r):r===o?(n=Object.keys(t)[i],!0):void 0)}(r),n||t||console.log("Bad param/value",e,"::",o),n},m=escapeHTML,{fileData:y,lf:v,getFieldAliasOrName:b,schemaObj:_,metadataObj:w,pluginsForWork:x}=await getWorkData({files:l||this.files,allowPlugins:u||this.allowPlugins,lang:t,fallbackLanguages:n,work:i.get("work"),basePath:f});console.log("pluginsForWork",x);const k=getMetaProp(t,w,"heading"),E=_.items.items,A=[],S=[],O=[];getBrowseFieldData({metadataObj:w,schemaItems:E,getFieldAliasOrName:b,lang:t,callback({setName:e,browseFields:t,presort:n}){A.push(e),S.push(n),O.push(t)}});const T=E.map(({title:e,format:t})=>({field:e,fieldAliasOrName:b(e)||e,escapeColumn:"html"!==t,fieldLang:w.fields[e].lang})),[j]=t,C=new Metadata({metadataObj:w});if(x){console.log("pluginsForWork",x);const{lang:e}=this;x.iterateMappings(({plugin:t,pluginName:n,pluginLang:r,onByDefaultDefault:i,placement:o,applicableFields:a,meta:s})=>{o="end"===o?1/0:o;const l=({applicableField:t,targetLanguage:a,onByDefault:l,metaApplicableField:u}={})=>{const c=x.getPluginObject(n),f=C.getFieldLang(t);c.getTargetLanguage&&(a=c.getTargetLanguage({applicableField:t,targetLanguage:a,pluginLang:r,applicableFieldLang:f})),"{locale}"===a&&(a=j);const p=getMetaProp(e,w,["fieldnames",t]),d=c.getFieldAliasOrName?c.getFieldAliasOrName({locales:e,lf:v,targetLanguage:a,applicableField:t,applicableFieldI18N:p,meta:s,metaApplicableField:u,targetLanguageI18N:h.getLanguageFromCode(a)}):h.getFieldNameFromPluginNameAndLocales({pluginName:n,locales:e,lf:v,targetLanguage:a,applicableFieldI18N:p,meta:s,metaApplicableField:u});T.splice(o,0,{plugin:c,meta:s,placement:o,fieldAliasOrName:d,escapeColumn:!1!==c.escapeColumn,onByDefault:"boolean"==typeof l?l:i||!1,applicableField:t,metaApplicableField:u,fieldLang:a})};x.processTargetLanguages(a,l)||l()})}const P=T.map(e=>e.fieldAliasOrName),F=T.map(e=>e.escapeColumn),D=T.map(({fieldLang:e})=>e!==j?e:null),L=d({schemaItems:E,fieldInfo:T,metadataObj:w,getFieldAliasOrName:b,usePreferAlias:!1}),N=d({schemaItems:E,fieldInfo:T,metadataObj:w,getFieldAliasOrName:b,usePreferAlias:!0}),$=i.localizeParamNames=i.has("i18n",!0)?"1"===i.get("i18n",!0):"true"===s||"false"!==s&&this.localizeParamNames,I=$?t=>e(["params",t]):e=>e,R=$?t=>e(["params","indexed",t]):e=>e,U=$?(e,t="")=>i.get(I(e)+t,!0):(e,t="")=>i.get(e+t,!0),M=$?(e,t="")=>i.get(i.get("work")+"-"+R(e)+t,!0):(e,t="")=>i.get(i.get("work")+"-"+e+t,!0),z=O.findIndex((e,t)=>"string"==typeof M("startEnd",t+1));if(-1!==z){const e="-",t=":",n=(M("startEnd",z+1)||"").trim(),[r,o]=n.split(e);if(void 0!==o){const e=r.split(t),n=o.split(t),a=e.length-n.length;a>0?n.unshift(...e.slice(0,a)):a<0&&e.push(...Array(-a).fill("1")),console.log("startPartVals",e),console.log("endPartVals",n),e.forEach((e,t)=>{const r=n[t];i.set(`${i.get("work")}-start${z+1}-${t+1}`,e,!0),i.set(`${i.get("work")}-end${z+1}-${t+1}`,r,!0)})}}const B=O.findIndex((e,t)=>"string"==typeof M("start",t+1+"-1")),q=O[B],W=A[B],H=q.map(e=>e.fieldName),V=O[0],J=A[0],G=V.map(e=>e.fieldName),X=q.map(e=>e.fieldSchema.type),Y=e=>H.map((t,n)=>i.get(i.get("work")+"-"+e+(B+1)+"-"+(n+1),!0)),Z=Y("start"),K=Y("end"),[Q,ee]=(({starts:t,ends:n,applicableBrowseFieldNames:r,heading:i})=>{let o;const a="0"!==g("caption");if(a){const a=Templates.resultsDisplayServerOrClient.startSeparator({l:e}),s=Templates.resultsDisplayServerOrClient.innerBrowseFieldSeparator({l:e}),l=(()=>{const i=[],o=t.reduce((e,t,r)=>{const o=e+t;return t===n[r]?o+(r>0?s:" "):(i.push(n[r]),o+a)},"").slice(0,-a.length),l=r.join(s);return escapeHTML(Templates.resultsDisplayServerOrClient.ranges({l:e,startRange:o,endVals:i,rangeNames:l}))})();o=Templates.resultsDisplayServerOrClient.caption({heading:i,ranges:l})}return[a,o]})({starts:Z,ends:K,applicableBrowseFieldNames:H,heading:k}),te="1"===g("interlintitle");console.log("rand","yes"===U("rand"));const ne=(e,t)=>{let n;if(e.match(/^\d+$/)||e.match(fieldValueAliasRegex))n=getRawFieldValue(e);else{const r=q[t].rawFieldValueAliasMap;let i;if(r){const t=Object.entries(r);Array.isArray(t[0][1])?t.some(([t,n])=>{if(n.includes(e))return i=t,!0}):t.some(([t,n])=>{if(Object.values(n).includes(e))return i=t,!0})}n=void 0===i?e:i}return"integer"===X[t]?parseInt(n,10):n},re=y.name,ie=Z.map(ne),oe=K.map(ne);let ae,se=!1;if(o||a){const e=S[B];if(this.noDynamic)({resolved:{data:ae}}=await JsonRefs.resolveRefs(y.file)),(({presort:e,tableData:t,applicableBrowseFieldNames:n,localizedFieldNames:r})=>{e&&t.sort((e,t)=>{let i;return n.some(n=>{const o=r.indexOf(n),a=e[o]<t[o],s=e[o]>t[o];return i=s?1:-1,a||s}),i})})({presort:e,tableData:ae,applicableBrowseFieldNames:H,localizedFieldNames:P});else{const e=`${p}textbrowser?${i.toString()}`;ae=await(await fetch(e)).json(),se=!0}}else ae=await new Promise((e,t)=>{const n=this.namespace+"-textbrowser-cache-data";indexedDB.open(n).onsuccess=(({target:{result:t}})=>{const n="files-to-cache-"+re;t.transaction(n).objectStore(n).index("browseFields-"+W).getAll(IDBKeyRange.bound(ie,oe)).onsuccess=(({target:{result:t}})=>{const n=t.map(e=>e.value);e(n)})})});!se&&x&&(T.forEach(({plugin:e,placement:t},n)=>{e&&ae.forEach((e,n)=>{e.splice(t,0,null)})}),T.forEach(({plugin:e,applicableField:t,fieldLang:n,meta:r,metaApplicableField:o},a)=>{if(!e)return;const s=T.findIndex(({field:e})=>e===t);ae.forEach((l,u)=>{const c=l[s];l[a]=e.getCellData({tr:l,tableData:ae,i:u,j:a,applicableField:t,fieldInfo:T,applicableFieldIdx:s,applicableFieldText:c,fieldLang:n,meta:r,metaApplicableField:o,$p:i,thisObj:this})}),console.log("applicableFieldIdx",s)}));const le=rtlDetect_3(j),ue=D.map(e=>{if(!e)return null;const t=rtlDetect_3(e);return t!==le?t:null}),ce={tableData:ae,$p:i,$pRaw:g,$pRawEsc:e=>escapeHTML(g(e)),$pEscArbitrary:e=>escapeHTML(i.get(e,!0)),escapeQuotedCSS:e=>e.replace(/"/g,'\\"'),escapeCSS:m,escapeHTML:escapeHTML,l:e,localizedFieldNames:P,fieldLangs:D,fieldDirs:ue,caption:ee,hasCaption:Q,showInterlinTitles:te,determineEnd:(({fieldValueAliasMap:e,fieldValueAliasMapPreferred:t,localizedFieldNames:n,applicableBrowseFieldNames:r,startsRaw:i,endsRaw:o})=>({tr:a,foundState:s})=>{const l=[],u=r.map(r=>{const i=n.indexOf(r);return void 0!==e[i]&&l.push(t[i][a[i]]),l.push(a[i]),a[i]});if(!s.start){if(i.some((e,t)=>e!==u[t]))return!1;s.start=!0}if(o.every((e,t)=>e===u[t]))s.end=!0;else if(s.end)return!0;return l.join("-")})({applicableBrowseFieldNames:H,fieldValueAliasMap:L,fieldValueAliasMapPreferred:N,localizedFieldNames:P,startsRaw:ie,endsRaw:oe}),canonicalBrowseFieldSetName:J,getCanonicalID:(({fieldValueAliasMap:e,fieldValueAliasMapPreferred:t,localizedFieldNames:n,canonicalBrowseFieldNames:r})=>({tr:i,foundState:o})=>r.map(r=>{const o=n.indexOf(r);return void 0!==e[o]?t[o][i[o]]:i[o]}).join("-"))({canonicalBrowseFieldNames:G,fieldValueAliasMap:L,fieldValueAliasMapPreferred:N,localizedFieldNames:P}),getCellValue:(({fieldValueAliasMapPreferred:t,escapeColumnIndexes:n})=>({tr:r,idx:i})=>{let o=void 0!==t[i]?t[i][r[i]]:r[i];return o&&"object"==typeof o&&(o=Object.values(o)),Array.isArray(o)&&(o=o.join(e("comma-space"))),!n[i]&&this.trustFormatHTML||"string"!=typeof o?{tdVal:o}:{tdVal:escapeHTML(o),htmlEscaped:!0}})({fieldValueAliasMapPreferred:N,escapeColumnIndexes:F,escapeHTML:escapeHTML}),checkedAndInterlinearFieldInfo:(({localizedFieldNames:t})=>{let n,r,o=1,a=[];do{n=i.get("field"+o,!0),r=i.get("checked"+o,!0),o++,!n||r!==e("yes")&&null!==r||a.push(n)}while(n);const s=(a=a.filter(e=>t.includes(e))).map(e=>t.indexOf(e)),l=s.map((e,t)=>{const n=i.get("interlin"+(e+1),!0);return n&&n.split(/\s*,\s*/).map(e=>parseInt(e,10)-1).filter(e=>!Number.isNaN(e))});return[a,s,l]})({localizedFieldNames:P}),interlinearSeparator:this.interlinearSeparator};return{fieldInfo:T,$p:i,applicableBrowseFieldSet:q,fieldValueAliasMapPreferred:N,lf:v,iil:R,ilRaw:U,browseFieldSets:O,lang:t,metadataObj:w,fileData:y,templateArgs:ce}};function TextBrowser(e){if(!(this instanceof TextBrowser))return new TextBrowser(e);const t=new URL("node_modules/textbrowser/resources/index.js",location);this.site=e.site||"site.json",setServiceWorkerDefaults(this,e),this.allowPlugins=e.allowPlugins,this.dynamicBasePath=e.dynamicBasePath,this.trustFormatHTML=e.trustFormatHTML,this.requestPersistentStorage=e.requestPersistentStorage,this.localizeParamNames=void 0===e.localizeParamNames||e.localizeParamNames,this.hideFormattingSection=Boolean(e.hideFormattingSection),this.interlinearSeparator=e.interlinearSeparator,this.showEmptyInterlinear=e.showEmptyInterlinear,this.showTitleOnSingleInterlinear=e.showTitleOnSingleInterlinear,this.noDynamic=e.noDynamic,this.skipIndexedDB=e.skipIndexedDB,this.stylesheets=(e.stylesheets||["@builtin"]).map(e=>"@builtin"===e?new URL("index.css",t).href:e)}async function prepareForServiceWorker(e){try{if(Templates.permissions.addLogEntry({text:"Worker registration: Beginning..."}),!await navigator.storage.persist())return void Templates.permissions.browserNotGrantingPersistence();await registerServiceWorker({serviceWorkerPath:this.serviceWorkerPath,logger:Templates.permissions})}catch(e){if(console.log("err",e),e&&"object"==typeof e){const{errorType:t}=e;if("versionChange"===t)return void Templates.permissions.versionChange()}Templates.permissions.errorRegistering(escapeHTML(e&&e.message))}}async function requestPermissions(e,t){await new Promise((n,r)=>{const[,i,o]=Templates.permissions.main({l:t,ok:async()=>{const e=await Notification.requestPermission();i.close(e)},refuse:()=>{i.close()},close:async()=>{try{if(!i.returnValue)return void function(){localStorage.setItem(this.namespace+"-refused","true")}()}catch(e){Templates.permissions.errorRegistering(escapeHTML(e&&e.message))}switch(i.returnValue){case"denied":case"default":return void n();case"granted":if(navigator.serviceWorker.controller)return void n();await prepareForServiceWorker.call(this,e)}},closeBrowserNotGranting:e=>{o.close()}});i.showModal()})}TextBrowser.prototype.workDisplay=workDisplay,TextBrowser.prototype.resultsDisplayClient=resultsDisplayClient$1,TextBrowser.prototype.init=async function(){return this._stylesheetElements=await loadStylesheets(this.stylesheets),this.displayLanguages()},TextBrowser.prototype.displayLanguages=async function(){try{const[e,t]=await simpleGetJson([this.languages,this.site]);this.langData=e,this.siteData=t;const n=this.paramChange();return window.addEventListener("hashchange",()=>this.paramChange()),n}catch(e){dialogs.alert(e)}},TextBrowser.prototype.getWorkFiles=getWorkFiles,TextBrowser.prototype.getWorkData=function(e){try{return getWorkData(_extends({},e,{files:this.files,allowPlugins:this.allowPlugins}))}catch(e){dialogs.alert("catch:"+e)}},TextBrowser.prototype.getDirectionForLanguageCode=function(e){const t=this.langData.languages,n=t.find(t=>t.code===e);return n&&n.direction||t.find(t=>t.code.startsWith(e+"-"))},TextBrowser.prototype.getFieldNameAndValueAliases=function(e){return getFieldNameAndValueAliases(_extends({},e,{lang:this.lang}))},TextBrowser.prototype.getBrowseFieldData=function(e){return getBrowseFieldData(_extends({},e,{lang:this.lang}))},TextBrowser.prototype.paramChange=async function(){Templates.defaultBody();const e=this.$p="string"==typeof history.state?new IntlURLSearchParams({params:history.state}):new IntlURLSearchParams,t=(t,n)=>{const r=document.querySelector(t),i=location.href.replace(/#.*$/,"")+"#"+e.toString();history.replaceState(serialize(r,{hash:!0,empty:!0}),document.title,i),n(),location.hash="#"+e.toString()},n=new Languages({langData:this.langData}),{lang:r,langs:i,languageParam:o,fallbackLanguages:a}=n.getLanguageInfo({$p:e});this.lang=r;const[s]=r,l=this.getDirectionForLanguageCode(s);document.dir=l;const u=localStorage.getItem(this.namespace+"-refused"),c=()=>{const e=e=>this.siteData["localization-strings"][e];return dist({locales:r.map(e),fallbackLocales:a.map(e)}).getFormatter()};let f;const p=e.get("result"),h=await navigator.storage.persisted(),d=await navigator.serviceWorker.getRegistration(this.serviceWorkerPath),g=async()=>{if(p)return;!(u||navigator.serviceWorker.controller&&h)&&(f=c(),h?(Templates.permissions.main({l:f}),await prepareForServiceWorker.call(this,i)):await requestPermissions.call(this,i,f),Templates.permissions.exitDialogs())};if(d){f=c();const e=d.installing||d.waiting||d.active;if(!e)return console.error("Unexpected error: worker registration received without a worker."),void await g();Templates.permissions.main({l:f}),setInterval(()=>{d.update()},36e5),console.log("worker.state",e.state);const t=async()=>{try{return respondToState({r:d,langs:i,languages:this.languages,logger:Templates.permissions})}catch(e){return dialogs.alert("\n    There was an unexpected error activating the new version;\n    please save any unfinished work, close this tab, and try\n    opening this site again.\n\n    Please contact a service administrator if the problem\n    persists (Error type: worker activation).\n    ")}};switch(e.state){case"installing":t(),listenForWorkerUpdate({r:d,logger:{addLogEntry(e){console.log(e)}}});break;case"installed":await t();break;case"activating":return await dialogs.alert("\nPlease wait for a short while as we work to update to a new version.\n"),t(),void navigator.serviceWorker.onmessage({data:"finishActivate"});case"activated":listenForWorkerUpdate({r:d,logger:{addLogEntry(e){console.log(e)}}});break;case"redundant":return void await t()}}else await g();if(Templates.permissions.exitDialogs(),!o){return void(r=>{e.l10n=r,document.title=r("browser-title"),Templates.languageSelect.main({langs:i,languages:n,followParams:t,$p:e})})(f||c())}document.documentElement.lang=s;return getIMFFallbackResults({$p:e,lang:r,langs:i,langData:this.langData,fallbackLanguages:a,resultsDisplay:e=>{const t=u||!navigator.serviceWorker.controller;return this.resultsDisplayClient(_extends({langData:this.langData},e,{noIndexedDB:t,dynamicBasePath:this.dynamicBasePath,files:this.files,allowPlugins:this.allowPlugins}))},localeCallback:i=>{return this.l10n=i,e.l10n=i,e.get("work")?!p&&(this.workDisplay({l:i,lang:r,preferredLocale:s,fallbackLanguages:a,languageParam:o,$p:e,languages:n}),!0):(workSelect({files:this.files,lang:r,fallbackLanguages:a,$p:e,followParams:t}),!0)}})};export default TextBrowser;
